<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>DRC: Digital Room Correction
</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<META name="GENERATOR" content="hevea 1.10">
<STYLE type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
DIV TABLE{margin-left:inherit;margin-right:inherit;}
PRE{text-align:left;margin-left:0ex;margin-right:auto;}
BLOCKQUOTE{margin-left:4ex;margin-right:4ex;text-align:left;}
TD P{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px;width:auto; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px;width:auto; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
</STYLE>
<STYLE type="text/css">
  BODY { font-family:Helvetica, Universe, Arial, sans-serif }
  H1 { font-size: x-large; font-weight:bold; color:teal }
  H2 { font-size: large; font-weight:bold; color:teal }
  H3 { font-size: medium; font-weight:bold; color:teal }
  H4 { font-weight:bold; color:teal }
  A { color:teal }
</STYLE>
</HEAD>
<BODY >
<!--HEVEA command line is: hevea drc.tex -->
<!--CUT DEF section 1 --><TABLE CLASS="title"><TR><TD><H1 CLASS="titlemain">DRC: Digital Room Correction</H1><H3 CLASS="titlerest">Denis Sbragion</H3><H3 CLASS="titlerest">
2012-10-01
<BR>
<BR>
Copyright &#XA9; 2002-2012 Denis Sbragion
<BR>
<BR>
Version 3.2.1
</H3></TD></TR>
</TABLE><P><FONT COLOR=purple>This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License as published
by the Free Software Foundation; either version 2 of the License, or (at
your option) any later version.
<BR>
</FONT></P><P><FONT COLOR=purple>This program is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
Public License for more details.
<BR>
</FONT></P><P><FONT COLOR=purple>You should have received a copy of the GNU General Public
License along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
<BR>
</FONT></P><P><FONT COLOR=purple>You can contact the author on Internet at the following
address:</FONT></P><BLOCKQUOTE CLASS="quote"><FONT COLOR=purple>
</FONT><A HREF="d.sbragion@infotecna.it"><TT>d.sbragion@infotecna.it</TT></A><FONT COLOR=purple>
</FONT></BLOCKQUOTE><P><FONT COLOR=purple>This program uses the FFT routines from Takuya Ooura and
the GNU Scientific Library (GSL) FFT routines. Many thanks to Takuya
Ooura and the GSL developers for these efficient routines.</FONT></P><!--TOC section Contents-->
<H2 CLASS="section"><!--SEC ANCHOR -->Contents</H2><!--SEC END --><UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc1">1&#XA0;&#XA0;Introduction</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc2">2&#XA0;&#XA0;Getting the latest version</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc3">3&#XA0;&#XA0;What&#X2019;s new in version 3.2.1</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc4">3.1&#XA0;&#XA0;Compatibility with previous versions</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc5">3.2&#XA0;&#XA0;History: what was new in previous versions</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc6">3.2.1&#XA0;&#XA0;Version 3.2.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc7">3.2.2&#XA0;&#XA0;Version 3.1.1</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc8">3.2.3&#XA0;&#XA0;Version 3.1.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc9">3.2.4&#XA0;&#XA0;Version 3.0.1</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc10">3.2.5&#XA0;&#XA0;Version 3.0.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc11">3.2.6&#XA0;&#XA0;Version 2.7.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc12">3.2.7&#XA0;&#XA0;Version 2.6.2</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc13">3.2.8&#XA0;&#XA0;Version 2.6.1</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc14">3.2.9&#XA0;&#XA0;Version 2.6.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc15">3.2.10&#XA0;&#XA0;Version 2.5.1</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc16">3.2.11&#XA0;&#XA0;Version 2.5.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc17">3.2.12&#XA0;&#XA0;Version 2.4.2</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc18">3.2.13&#XA0;&#XA0;Version 2.4.1</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc19">3.2.14&#XA0;&#XA0;Version 2.4.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc20">3.2.15&#XA0;&#XA0;Version 2.3.2</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc21">3.2.16&#XA0;&#XA0;Version 2.3.1</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc22">3.2.17&#XA0;&#XA0;Version 2.3.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc23">3.2.18&#XA0;&#XA0;Version 2.2.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc24">3.2.19&#XA0;&#XA0;Version 2.1.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc25">3.2.20&#XA0;&#XA0;Version 2.0.0</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc26">3.2.21&#XA0;&#XA0;Version 1.3.0</A>
</LI></UL>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc27">4&#XA0;&#XA0;Program description and operation</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc28">4.1&#XA0;&#XA0;Filter generation procedure</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc29">4.2&#XA0;&#XA0;Frequency dependent windowing</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc30">4.2.1&#XA0;&#XA0;Pre-echo truncation</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc31">4.2.2&#XA0;&#XA0;Ringing truncation stage</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc32">4.3&#XA0;&#XA0;Psychoacoustic target computation</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc33">4.4&#XA0;&#XA0;Impulse response measurement</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc34">4.4.1&#XA0;&#XA0;The glsweep program</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc35">4.4.2&#XA0;&#XA0;The lsconv program</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc36">4.4.3&#XA0;&#XA0;Sample automated script file</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc37">4.4.4&#XA0;&#XA0;Beware cheap, resampling, soundcards</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc38">4.4.5&#XA0;&#XA0;How to work around your cheap, resampling, soundcard</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc39">4.5&#XA0;&#XA0;Sample rate conversion</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc40">4.6&#XA0;&#XA0;Correction tuning</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc41">4.6.1&#XA0;&#XA0;Preventing pre-echo artifacts</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc42">4.6.2&#XA0;&#XA0;Preventing clipping</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc43">4.6.3&#XA0;&#XA0;Some notes about loudspeaker placement</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc44">4.6.4&#XA0;&#XA0;Some notes about channel balance</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc45">4.6.5&#XA0;&#XA0;Interchannel time alignment</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc46">4.6.6&#XA0;&#XA0;How to tune the filters for your audio system</A>
</LI></UL>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc47">5&#XA0;&#XA0;Program compilation and execution</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc48">5.1&#XA0;&#XA0;Command line parameters replacing</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc49">5.2&#XA0;&#XA0;Sample configuration files</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc50">5.2.1&#XA0;&#XA0;Target magnitude response</A>
</LI></UL>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc51">6&#XA0;&#XA0;DRC Configuration file reference</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc52">6.1&#XA0;&#XA0;BC - Base Configuration</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc53">6.1.1&#XA0;&#XA0;BCBaseDir</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc54">6.1.2&#XA0;&#XA0;BCInFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc55">6.1.3&#XA0;&#XA0;BCInFileType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc56">6.1.4&#XA0;&#XA0;BCSampleRate</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc57">6.1.5&#XA0;&#XA0;BCImpulseCenterMode</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc58">6.1.6&#XA0;&#XA0;BCImpulseCenter (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc59">6.1.7&#XA0;&#XA0;BCInitWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc60">6.1.8&#XA0;&#XA0;BCPreWindowLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc61">6.1.9&#XA0;&#XA0;BCPreWindowGap</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc62">6.1.10&#XA0;&#XA0;BCNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc63">6.1.11&#XA0;&#XA0;BCNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc64">6.1.12&#XA0;&#XA0;BCDLType, BCDLMinGain, BCDLStartFreq, BCDLEndFreq, BCDLStart,
BCDLMultExponent</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc65">6.2&#XA0;&#XA0;MC - Microphone Compensation</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc66">6.2.1&#XA0;&#XA0;MCFilterType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc67">6.2.2&#XA0;&#XA0;MCInterpolationType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc68">6.2.3&#XA0;&#XA0;MCMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc69">6.2.4&#XA0;&#XA0;MCFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc70">6.2.5&#XA0;&#XA0;MCNumPoints</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc71">6.2.6&#XA0;&#XA0;MCPointsFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc72">6.2.7&#XA0;&#XA0;MCMagType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc73">6.2.8&#XA0;&#XA0;MCFilterFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc74">6.2.9&#XA0;&#XA0;MCOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc75">6.2.10&#XA0;&#XA0;MCNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc76">6.2.11&#XA0;&#XA0;MCNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc77">6.2.12&#XA0;&#XA0;MCOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc78">6.2.13&#XA0;&#XA0;MCOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc79">6.3&#XA0;&#XA0;HD - Homomorphic Deconvolution</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc80">6.3.1&#XA0;&#XA0;HDMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc81">6.3.2&#XA0;&#XA0;HDMPNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc82">6.3.3&#XA0;&#XA0;HDMPNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc83">6.3.4&#XA0;&#XA0;HDMPOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc84">6.3.5&#XA0;&#XA0;HDMPOutFileType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc85">6.3.6&#XA0;&#XA0;HDEPNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc86">6.3.7&#XA0;&#XA0;HDEPNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc87">6.3.8&#XA0;&#XA0;HDEPOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc88">6.3.9&#XA0;&#XA0;HDEPOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc89">6.4&#XA0;&#XA0;MP - Minimum phase Prefiltering</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc90">6.4.1&#XA0;&#XA0;MPPrefilterType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc91">6.4.2&#XA0;&#XA0;MPPrefilterFctn</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc92">6.4.3&#XA0;&#XA0;MPWindowGap</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc93">6.4.4&#XA0;&#XA0;MPLowerWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc94">6.4.5&#XA0;&#XA0;MPUpperWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc95">6.4.6&#XA0;&#XA0;MPStartFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc96">6.4.7&#XA0;&#XA0;MPEndFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc97">6.4.8&#XA0;&#XA0;MPWindowExponent (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc98">6.4.9&#XA0;&#XA0;MPFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc99">6.4.10&#XA0;&#XA0;MPFSharpness (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc100">6.4.11&#XA0;&#XA0;MPBandSplit</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc101">6.4.12&#XA0;&#XA0;MPHDRecover</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc102">6.4.13&#XA0;&#XA0;MPEPPreserve</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc103">6.4.14&#XA0;&#XA0;MPHDMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc104">6.4.15&#XA0;&#XA0;MPPFFinalWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc105">6.4.16&#XA0;&#XA0;MPPFNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc106">6.4.17&#XA0;&#XA0;MPPFNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc107">6.4.18&#XA0;&#XA0;MPPFOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc108">6.4.19&#XA0;&#XA0;MPPFOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc109">6.5&#XA0;&#XA0;DL - Dip Limiting</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc110">6.5.1&#XA0;&#XA0;DLType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc111">6.5.2&#XA0;&#XA0;DLMinGain</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc112">6.5.3&#XA0;&#XA0;DLStartFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc113">6.5.4&#XA0;&#XA0;DLEndFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc114">6.5.5&#XA0;&#XA0;DLStart</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc115">6.5.6&#XA0;&#XA0;DLMultExponent</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc116">6.6&#XA0;&#XA0;EP - Excess phase Prefiltering</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc117">6.6.1&#XA0;&#XA0;EPPrefilterType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc118">6.6.2&#XA0;&#XA0;EPPrefilterFctn</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc119">6.6.3&#XA0;&#XA0;EPWindowGap</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc120">6.6.4&#XA0;&#XA0;EPLowerWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc121">6.6.5&#XA0;&#XA0;EPUpperWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc122">6.6.6&#XA0;&#XA0;EPStartFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc123">6.6.7&#XA0;&#XA0;EPEndFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc124">6.6.8&#XA0;&#XA0;EPWindowExponent (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc125">6.6.9&#XA0;&#XA0;EPFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc126">6.6.10&#XA0;&#XA0;EPFSharpness (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc127">6.6.11&#XA0;&#XA0;EPBandSplit</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc128">6.6.12&#XA0;&#XA0;EPPFFinalWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc129">6.6.13&#XA0;&#XA0;EPPFFlatGain</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc130">6.6.14&#XA0;&#XA0;EPPFOGainFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc131">6.6.15&#XA0;&#XA0;EPPFFlatType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc132">6.6.16&#XA0;&#XA0;EPPFFGMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc133">6.6.17&#XA0;&#XA0;EPPFNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc134">6.6.18&#XA0;&#XA0;EPPFNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc135">6.6.19&#XA0;&#XA0;EPPFOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc136">6.6.20&#XA0;&#XA0;EPPFOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc137">6.7&#XA0;&#XA0;PC - Prefilter Completion</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc138">6.7.1&#XA0;&#XA0;PCOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc139">6.7.2&#XA0;&#XA0;PCNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc140">6.7.3&#XA0;&#XA0;PCNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc141">6.7.4&#XA0;&#XA0;PCOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc142">6.7.5&#XA0;&#XA0;PCOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc143">6.8&#XA0;&#XA0;IS - Inversion Stage</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc144">6.8.1&#XA0;&#XA0;ISType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc145">6.8.2&#XA0;&#XA0;ISPETType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc146">6.8.3&#XA0;&#XA0;ISPrefilterFctn</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc147">6.8.4&#XA0;&#XA0;ISPELowerWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc148">6.8.5&#XA0;&#XA0;ISPEUpperWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc149">6.8.6&#XA0;&#XA0;ISPEStartFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc150">6.8.7&#XA0;&#XA0;ISPEEndFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc151">6.8.8&#XA0;&#XA0;ISPEFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc152">6.8.9&#XA0;&#XA0;ISPEFSharpness</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc153">6.8.10&#XA0;&#XA0;ISPEBandSplit</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc154">6.8.11&#XA0;&#XA0;ISPEWindowExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc155">6.8.12&#XA0;&#XA0;ISPEOGainFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc156">6.8.13&#XA0;&#XA0;ISSMPMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc157">6.8.14&#XA0;&#XA0;ISOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc158">6.8.15&#XA0;&#XA0;ISNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc159">6.8.16&#XA0;&#XA0;ISNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc160">6.8.17&#XA0;&#XA0;ISOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc161">6.8.18&#XA0;&#XA0;ISOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc162">6.9&#XA0;&#XA0;PT - Psychoacoustic Target</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc163">6.9.1&#XA0;&#XA0;PTType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc164">6.9.2&#XA0;&#XA0;PTReferenceWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc165">6.9.3&#XA0;&#XA0;PTDLType, PTDLMinGain, PTDLStartFreq, PTDLEndFreq, PTDLStart,
PTDLMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc166">6.9.4&#XA0;&#XA0;PTBandWidth (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc167">6.9.5&#XA0;&#XA0;PTPeakDetectionStrength (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc168">6.9.6&#XA0;&#XA0;PTMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc169">6.9.7&#XA0;&#XA0;PTFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc170">6.9.8&#XA0;&#XA0;PTFilterFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc171">6.9.9&#XA0;&#XA0;PTFilterFileType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc172">6.9.10&#XA0;&#XA0;PTNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc173">6.9.11&#XA0;&#XA0;PTNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc174">6.9.12&#XA0;&#XA0;PTOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc175">6.9.13&#XA0;&#XA0;PTOutFileType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc176">6.9.14&#XA0;&#XA0;PTOutWindow</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc177">6.10&#XA0;&#XA0;PL - Peak Limiting</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc178">6.10.1&#XA0;&#XA0;PLType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc179">6.10.2&#XA0;&#XA0;PLMaxGain</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc180">6.10.3&#XA0;&#XA0;PLStart</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc181">6.10.4&#XA0;&#XA0;PLStartFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc182">6.10.5&#XA0;&#XA0;PLEndFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc183">6.10.6&#XA0;&#XA0;PLMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc184">6.10.7&#XA0;&#XA0;PLOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc185">6.10.8&#XA0;&#XA0;PLNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc186">6.10.9&#XA0;&#XA0;PLNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc187">6.10.10&#XA0;&#XA0;PLOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc188">6.10.11&#XA0;&#XA0;PLOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc189">6.11&#XA0;&#XA0;RT - Ringing Truncation</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc190">6.11.1&#XA0;&#XA0;RTType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc191">6.11.2&#XA0;&#XA0;RTPrefilterFctn</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc192">6.11.3&#XA0;&#XA0;RTWindowGap</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc193">6.11.4&#XA0;&#XA0;RTLowerWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc194">6.11.5&#XA0;&#XA0;RTUpperWindow (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc195">6.11.6&#XA0;&#XA0;RTStartFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc196">6.11.7&#XA0;&#XA0;RTEndFreq</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc197">6.11.8&#XA0;&#XA0;RTWindowExponent (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc198">6.11.9&#XA0;&#XA0;RTFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc199">6.11.10&#XA0;&#XA0;RTFSharpness (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc200">6.11.11&#XA0;&#XA0;RTBandSplit</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc201">6.11.12&#XA0;&#XA0;RTOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc202">6.11.13&#XA0;&#XA0;RTNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc203">6.11.14&#XA0;&#XA0;RTNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc204">6.11.15&#XA0;&#XA0;RTOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc205">6.11.16&#XA0;&#XA0;RTOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc206">6.12&#XA0;&#XA0;PS - Postfiltering Stage</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc207">6.12.1&#XA0;&#XA0;PSFilterType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc208">6.12.2&#XA0;&#XA0;PSInterpolationType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc209">6.12.3&#XA0;&#XA0;PSMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc210">6.12.4&#XA0;&#XA0;PSFilterLen</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc211">6.12.5&#XA0;&#XA0;PSNumPoints</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc212">6.12.6&#XA0;&#XA0;PSMagType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc213">6.12.7&#XA0;&#XA0;PSPointsFile (*)</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc214">6.12.8&#XA0;&#XA0;PSOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc215">6.12.9&#XA0;&#XA0;PSNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc216">6.12.10&#XA0;&#XA0;PSNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc217">6.12.11&#XA0;&#XA0;PSOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc218">6.12.12&#XA0;&#XA0;PSOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc219">6.13&#XA0;&#XA0;MS - Minimum phase filter extraction Stage</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc220">6.13.1&#XA0;&#XA0;MSMultExponent</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc221">6.13.2&#XA0;&#XA0;MSOutWindow</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc222">6.13.3&#XA0;&#XA0;MSFilterDelay</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc223">6.13.4&#XA0;&#XA0;MSNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc224">6.13.5&#XA0;&#XA0;MSNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc225">6.13.6&#XA0;&#XA0;MSOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc226">6.13.7&#XA0;&#XA0;MSOutFileType</A>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc227">6.14&#XA0;&#XA0;TC - Test Convolution</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc228">6.14.1&#XA0;&#XA0;TCNormFactor</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc229">6.14.2&#XA0;&#XA0;TCNormType</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc230">6.14.3&#XA0;&#XA0;TCOutFile</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc231">6.14.4&#XA0;&#XA0;TCOutFileType</A>
</LI></UL>
</LI></UL>
</LI><LI CLASS="li-toc"><A HREF="#htoc232">7&#XA0;&#XA0;Acknowledgments</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc233">8&#XA0;&#XA0;Similar software</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc234">9&#XA0;&#XA0;Commercial products</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc235">A&#XA0;&#XA0;Sample results</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc236">A.1&#XA0;&#XA0;Time response</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc237">A.2&#XA0;&#XA0;Frequency response</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc238">A.3&#XA0;&#XA0;Phase response</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc239">A.4&#XA0;&#XA0;Time-frequency analysis</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc240">A.5&#XA0;&#XA0;Wavelet cycle-octave analysis</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc241">A.6&#XA0;&#XA0;Baseline</A>
<UL CLASS="toc"><LI CLASS="li-toc">
<A HREF="#htoc242">A.6.1&#XA0;&#XA0;Baseline time response</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc243">A.6.2&#XA0;&#XA0;Baseline frequency response</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc244">A.6.3&#XA0;&#XA0;Baseline phase response</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc245">A.6.4&#XA0;&#XA0;Baseline time-frequency analysis</A>
</LI><LI CLASS="li-toc"><A HREF="#htoc246">A.6.5&#XA0;&#XA0;Baseline wavelet cycle-octave analysis</A>
</LI></UL>
</LI></UL>
</LI></UL><!--TOC section Introduction-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc1">1</A>&#XA0;&#XA0;Introduction</H2><!--SEC END --><P>DRC uses a lot of signal, linear system and DSP theory to achieve its
results. In this user manual some knowledge about those
arguments is assumed. I&#X2019;m planning to write a more extensive manual with
the basics needed to understand what DRC does, or at least is trying to
do, but unfortunately I have just little spare time to dedicate to this
project, so I will concentrate just on improving the program
performances. Of course volunteers, suggestion, patches, better
documentation, pointers and references on the subject are all
appreciated.</P><P>For a basic introductory guide to DSP theory and practice you might look
at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.dspguide.com/"><TT>http://www.dspguide.com/</TT></A>
</BLOCKQUOTE><P>
For a basic introduction to DSP applied to audio you might read the good
book available at:</P><BLOCKQUOTE CLASS="quote"><DIV CLASS="flushleft">
<A HREF="http://profs.sci.univr.it/~rocchess/htmls/corsi/SoundProcessing/SoundProcessingBook/"><TT>http://profs.sci.univr.it/~rocchess/htmls/corsi/SoundProcessing/SoundProcessingBook/</TT></A>
</DIV></BLOCKQUOTE><P>
To better understand what DRC is trying to do you might look at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://en.wikipedia.org/wiki/Digital_Room_Correction"><TT>http://en.wikipedia.org/wiki/Digital_Room_Correction</TT></A>
</BLOCKQUOTE><P>
This clear and concise Wikipedia article contains all the basics needed
to understand digital room correction in general. Another interesting
page is available at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.ludd.luth.se/~torger/filter.html"><TT>http://www.ludd.luth.se/~torger/filter.html</TT></A>
</BLOCKQUOTE><P>
On this web page you&#X2019;ll find some good explanations about the Nwfiir
Audio Tools suite, which was a project, now discontinued, similar to
DRC but implemented using warped FIR filters instead of the usual standard
FIR filters.</P><P>Compared with the Nwfiir Audio Tools suite DRC does only the job carried
out by the wfird program, generating just the FIR filters for
digital room correction.</P><P>In order to measure the room impulse response
and to perform real time or offline convolution (i.e. the correction) of
the digital signal, you have to use some external programs, like, for
example, BruteFIR (see section <A HREF="#BruteFIR">2</A>).</P><P>A good DRC step by step guide has been written by &#X201C;Jones Rush&#X201D;, and it
is available at the following URL:</P><P><A NAME="JonesRushGuide"></A></P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.duffroomcorrection.com/images/d/de/DRC_Guide_v1.0.pdf"><TT>http://www.duffroomcorrection.com/images/d/de/DRC_Guide_v1.0.pdf</TT></A>
</BLOCKQUOTE><P>
&#X201C;Jones Rush&#X201D; spent quite a lot of time learning the complete procedure
needed to set up a full digital room correction system and also spent a
lot of time writing the guide from the beginner&#X2019;s point of view, so this
is a really good starting point for everyone who has never played before
with this sort of things. The guide is now a bit outdated, but despite
this it is still a valid reference for the whole procedure of
DRC filters creation. The main difference is in the name of the output file
generated by the latest sample configuration files, which now is
&#X201C;rps.pcm&#X201D; instead of &#X201C;dxf.pcm&#X201D;.</P><P>Ed Wildgoose is trying to create a collaborative documentation effort at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.duffroomcorrection.com/"><TT>http://www.duffroomcorrection.com/</TT></A>
</BLOCKQUOTE><P>
Please, take the time to improve the available documentation and to
share your experience participating to those nice Wiki pages. It could
be really useful for other DRC users.</P><!--TOC section Getting the latest version-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc2">2</A>&#XA0;&#XA0;Getting the latest version</H2><!--SEC END --><P>The official DRC web site is available at the following address:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://drc-fir.sourceforge.net/"><TT>http://drc-fir.sourceforge.net/</TT></A>
</BLOCKQUOTE><P>
On the web site you will always find news and up to date informations,
the full documentation for the latest version, informations about where to
download it and many other DRC related informations. New DRC releases
are announced using the Freshmeat announcement and tracking service. The
Freshmeat DRC page is available at the following address:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://freshmeat.net/projects/drc/"><TT>http://freshmeat.net/projects/drc/</TT></A>
</BLOCKQUOTE><!--TOC section What&#X2019;s new in version 3.2.1-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc3">3</A>&#XA0;&#XA0;What&#X2019;s new in version 3.2.1</H2><!--SEC END --><P>Minor accuracy improvements and minor changes to the default
configuration templates have been introduced. Configuration file handling 
now is performed using the minIni library instead of the parsecfg library. 
A minor bug in the axis labeling of the Morlet cycle/octave scalograms 
has been corrected. The plot generation scripts have been reworked for better
readability, better axis labeling and compatibility with the latest version
of Octave.</P><!--TOC subsection Compatibility with previous versions-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc4">3.1</A>&#XA0;&#XA0;Compatibility with previous versions</H3><!--SEC END --><P>Configuration files for version 3.2.0 are compatible with the
the current version, but it is suggested to change PLStartFreq and
PLEndFreq to match the new default values, i.e. 100 and 10000
respectively.</P><!--TOC subsection History: what was new in previous versions-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc5">3.2</A>&#XA0;&#XA0;History: what was new in previous versions</H3><!--SEC END --><!--TOC subsubsection Version 3.2.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc6">3.2.1</A>&#XA0;&#XA0;Version 3.2.0</H4><!--SEC END --><P>A new computation of the RMS value based on a logarithmic frequency
weighting of the magnitude response has been introduced. This new method
allow for a better handling of the filter magnitude response peak
limiting. A bug in the extimation of the band limited RMS value has been
also corrected. Some other procedures have been refined in order to
provide an improved accuracy. The glsweep and lsconv tools have been
reworked to provide correct reference levels thus allowing for SPL
calibrated measurements.</P><!--TOC subsubsection Version 3.1.1-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc7">3.2.2</A>&#XA0;&#XA0;Version 3.1.1</H4><!--SEC END --><P>The licensing of some file has been corrected. Minor corrections
and accuracy improvements.</P><!--TOC subsubsection Version 3.1.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc8">3.2.3</A>&#XA0;&#XA0;Version 3.1.0</H4><!--SEC END --><P>The Octave scripts have been reworked to make them compatible with the
latest version of Octave and improved to provide some autoscaling
features and exports to different image formats. The microphone
compensation stage has been moved to the beginning of the correction
procedure so that any following stage works using the compensated
impulse response as a reference. A new parameter adding a configurable
delay to the minimum phase version of the correction filter has been
introduced. Many other minor bugs have been fixed.</P><!--TOC subsubsection Version 3.0.1-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc9">3.2.4</A>&#XA0;&#XA0;Version 3.0.1</H4><!--SEC END --><P>The Octave scripts have been reworked to make them compatible with
version 3 of Octave. A new renormalization procedure, providing a
reasonable extimation of clipping levels, has been added. Many minor
bugs have been fixed.</P><!--TOC subsubsection Version 3.0.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc10">3.2.5</A>&#XA0;&#XA0;Version 3.0.0</H4><!--SEC END --><P>A new method for the computation of an optimized psychoacoustic target
response, based on the spectral envelope of the corrected impulse
response, has been introduced.</P><!--TOC subsubsection Version 2.7.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc11">3.2.6</A>&#XA0;&#XA0;Version 2.7.0</H4><!--SEC END --><P>A new method for the computation of the excess phase component inverse,
based on a simple time reversal, has been introduced. The sample
configuration files have been rewritten to take advantage of the new
inversion procedure. Sample configuration files for 48 kHz, 88.2 kHz, 96
kHz sample rates have been added. The homomorphic deconvolution
procedure has been improved to avoid any numerical instability. A new
Piecewise Cubic Hermite Interpolating Polynomial (PCHIP) interpolation
method, providing monotonic behaviour, has been introduced in the target
response computation. All the interpolation and approximation procedures
have been rewritten from scratch to provide better performances and
accuracy.</P><!--TOC subsubsection Version 2.6.2-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc12">3.2.7</A>&#XA0;&#XA0;Version 2.6.2</H4><!--SEC END --><P>A new command line parameters replacement functionality has been
introduced. The dip and peak limiting procedures have been improved in
order to avoid numerical instabilities. A new wavelet based analysis
graph has been added to the sample results. Many performance
improvements have been introduced. A new optional parameter used to
define the base directory for all files has been added.</P><!--TOC subsubsection Version 2.6.1-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc13">3.2.8</A>&#XA0;&#XA0;Version 2.6.1</H4><!--SEC END --><P>Minor corrections and improvements have been applied to the
documentation and to the pre-echo truncation inversion procedure. A new
target transfer function definition procedure based on Uniform B Splines
has been introduced. The development environment has been moved to
Code::Blocks and GCC/MinGW.</P><!--TOC subsubsection Version 2.6.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc14">3.2.9</A>&#XA0;&#XA0;Version 2.6.0</H4><!--SEC END --><P>A new prefiltering curve based on the bilinear transformation has been
introduced. An improved windowing of the minimum phase filters used to
apply the target frequency response and the microphone compensation has
been implemented. A missing normalization of the minimum phase
correction filter has been added. A new logarithmic interpolation has
been added to the target transfer function computation. The new
interpolation method simplifies the definition of the target transfer
functions. Small improvements to the documentation and to the Octave
scripts used to generate the graphs have been applied. A new improved
version of the measurejack script has been included in the package. Some
new sample configuration files, including one approximating the ERB
psychoacoustic scale, have been added.</P><!--TOC subsubsection Version 2.5.1-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc15">3.2.10</A>&#XA0;&#XA0;Version 2.5.1</H4><!--SEC END --><P>Small improvements to the documentation and to the Octave scripts used
to generate the graphs. The sliding lowpass prefiltering procedure has
been rewritten to make it a bit more accurate and to make the code more
readable. Few other minor bugs have been fixed.</P><!--TOC subsubsection Version 2.5.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc16">3.2.11</A>&#XA0;&#XA0;Version 2.5.0</H4><!--SEC END --><P>With version 2.5.0 a general overhauling of the filter generation
procedure has been performed. Some steps (peak limiting for example)
have been moved to a different stage of the procedure, and new stages
have been added.</P><P>A new ringing truncation stage has been added to remove excessive
ringing caused sometimes by the pre-echo truncation procedure. Now the
filter impulse response is enclosed in a sort of psychoacoustic jail
that prevent, or at least reduces a lot, any artifact that could arise
as a side effect of the filter generation procedure. With this changes
DRC becomes somewhat &#X201C;self tuning&#X201D; and now it is able to adapt itself
to the input impulse response, at least to some extent, providing as
much correction as possible without generating excessive artifacts.</P><P>The postfiltering stage, where the target transfer function is defined,
has been split to provide a separate stage for microphone compensation.
This allows for a greater flexibility defining both the target transfer
function and the microphone compensation, and provides as a side effect
correct test convolutions even when microphone compensation is in place.
With the previous versions the test convolution was improperly altered
by the microphone compensation, because both the target transfer
function and the microphone compensation were generated and applied
using the same filter.</P><P>Many other procedures have been refined. For example the peak and dip
limiting procedures now ensure continuity up to the first derivative of
the magnitude response on the points where the magnitude limiting starts
its effect. This further reduces the ringing caused by abrupt changes in
the magnitude response.</P><P>Finally many other minor bugs have been corrected and the documentation
has been improved, switching to L<sup>A</sup>T<sub>E</sub>X for document generation and
formatting.</P><!--TOC subsubsection Version 2.4.2-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc17">3.2.12</A>&#XA0;&#XA0;Version 2.4.2</H4><!--SEC END --><P>Version 2.4.2 added a better handling of underflow problems during
homomorphic deconvolution. Some little speed improvements have been
also achieved. Added search and output of peak value and peak position
into lsconv.</P><!--TOC subsubsection Version 2.4.1-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc18">3.2.13</A>&#XA0;&#XA0;Version 2.4.1</H4><!--SEC END --><P>Version 2.4.1 added some tools for accurate time aligned impulse
response measurements. This make it possible to compensate for
interchannel misalignments, at least up to a limited extent. Some minor
bugs have been also corrected.</P><!--TOC subsubsection Version 2.4.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc19">3.2.14</A>&#XA0;&#XA0;Version 2.4.0</H4><!--SEC END --><P>In version 2.4.0 the Takuya Ooura and GNU Scientific Library FFT
routines have been included in the program. These routines are about 10
times faster than the previous routines, providing about the same
accuracy. Furthermore some checks have been added to the sharpness
parameters to avoid program crashes when these parameters are missing.</P><P>The FFT routines described above are available at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.gnu.org/software/gsl/"><TT>http://www.gnu.org/software/gsl/</TT></A><BR>
<A HREF="http://www.kurims.kyoto-u.ac.jp/~ooura/fft.html"><TT>http://www.kurims.kyoto-u.ac.jp/~ooura/fft.html</TT></A>
</BLOCKQUOTE><!--TOC subsubsection Version 2.3.2-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc20">3.2.15</A>&#XA0;&#XA0;Version 2.3.2</H4><!--SEC END --><P>In version 2.3.2 a new sharpness factor parameter has been added to the
sliding low pass prefiltering procedure. This parameter provides a
control between filtering sharpness and spectral spreading in the filter
transition region. A new option to read and write double precision
floating points files has been added. Some checks to warn when the input
signal is too short to provide accurate results has been added.</P><!--TOC subsubsection Version 2.3.1-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc21">3.2.16</A>&#XA0;&#XA0;Version 2.3.1</H4><!--SEC END --><P>In version 2.3.1 some minor corrections to the program have been
performed and the documentation has been restructured. A new option to
automatically count the number of lines in the target function and
microphone compensation files has been added. A new optimized sample
configuration file has been added.</P><!--TOC subsubsection Version 2.3.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc22">3.2.17</A>&#XA0;&#XA0;Version 2.3.0</H4><!--SEC END --><P>Version 2.3.0 adds two parameters to control the gain limiting
procedures. These parameters control a sort of &#X201C;soft clipping&#X201D; of the
frequency response, avoiding ringing on abrupt truncations of the
frequency response. A new parameter to select the magnitude type, either
linear or expressed in dB, of the target frequency response has been
added. The optional capability to perform microphone compensation has
also been added. The license has been switched to the GNU GPL.</P><!--TOC subsubsection Version 2.2.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc23">3.2.18</A>&#XA0;&#XA0;Version 2.2.0</H4><!--SEC END --><P>Version 2.2.0 added a sliding low pass procedure to the pre-echo
truncation inversion procedure. This pre-echo truncation procedure is
much more similar to the pre-echo sensitivity of our hear and so
slightly better results are achieved. Furthermore the sliding low pass
prefiltering procedure has been completely rewritten to provide better
accuracy, especially with the short window lengths needed for pre-echo
truncation.</P><!--TOC subsubsection Version 2.1.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc24">3.2.19</A>&#XA0;&#XA0;Version 2.1.0</H4><!--SEC END --><P>Version 2.1.0 added two new parameters that allow for the windowing of
everything coming more than few samples before the impulse center.
Usually before the main spike there&#X2019;s only noise and spuriae. I have
found that in certain situations this small noise may lead to audible
errors in the correction, so windowing it out in order to clean the
impulse response is a good practice.</P><!--TOC subsubsection Version 2.0.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc25">3.2.20</A>&#XA0;&#XA0;Version 2.0.0</H4><!--SEC END --><P>
<A NAME="Version-2.0.0"></A></P><P>Version 2.0.0 added many new features that provides much better control
on pre-echo artifacts problems. The most important change is the new
pre-echo truncation inversion procedure. Loosely derived from Kirkeby
fast deconvolution this new procedure truncates any pre-echo on the
excess phase part inversion. This leads to something like minimum phase
inversion on frequency ranges where a complete inversion would lead to
pre-echo artifacts. This critical frequency ranges are usually no more
than 5 or 6 and no wider than about 1/12 of octave for a typical room
impulse response. Reducing the correction to minimum phase on so narrow
bands has little or no subjective effect on the correction quality and
allows for the correction of much longer windows, with much better
overall results.</P><P>Avoiding pre-echo artifacts also provides the ability to create low
input-output delay filters. The resulting delay is often low enough (few
ms) to allow the use of these filters in home theater applications. For
situations where even few ms aren&#X2019;t adequate there&#X2019;s now also an option
to generate zero delay minimum phase filters. Minimum phase filters
provides correction of the amplitude response and just the minimum phase
part of the phase response.</P><P>In order to avoid pre-echo artifacts there are also many other aspects
that should be taken into account. For a better explanation of the whole
procedure and the selection method for the DRC parameters needed to
achieve this result look at the section <A HREF="#AvoidPreEchoArtifacts">4.6.1</A>.</P><P>Version 2.0.0 adds also many other improvements, including the single
side version of the prefiltering procedures and fixing for many minor
bugs that where still laying around.</P><P>A test convolution stage is now also available. This convolves the input
impulse response with the generated filter to get the impulse response
after correction. The impulse response obtained by this method is
usually really reliable. As long as the measurement microphone isn&#X2019;t
moved I have been able to verify the computed impulse response with less
than 0.5 dB errors, which is impressive considering the cheap
measurement set I use. In my situation may be that the computed
corrected impulse response is even more accurate than the measured one,
because of noise problems being doubled by my cheap measurement set in
the second measure.</P><!--TOC subsubsection Version 1.3.0-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc26">3.2.21</A>&#XA0;&#XA0;Version 1.3.0</H4><!--SEC END --><P>Version 1.3.0 provided some new features with respect to version
1.2.1:</P><UL CLASS="itemize"><LI CLASS="li-itemize">More flexible prefiltering curve parameters</LI><LI CLASS="li-itemize">New time varying sliding lowpass prefiltering stage</LI><LI CLASS="li-itemize">New minimum phase or homomorphic renormalization of the
prefiltered excess phase component</LI><LI CLASS="li-itemize">Homomorphic deconvolution based on the Hilbert transform instead
of the cepstrum method</LI><LI CLASS="li-itemize">Slightly improved documentation</LI><LI CLASS="li-itemize">Many minor bugs fixed</LI></UL><!--TOC section Program description and operation-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc27">4</A>&#XA0;&#XA0;Program description and operation</H2><!--SEC END --><P>DRC is a program used to generate correction filters for acoustic
compensation of HiFi and audio systems in general, including listening
room compensation. DRC generates just the FIR correction filters, which
must be used with a real time or offline convolver to provide real time
or offline correction. DRC doesn&#X2019;t provide convolution features, and
provides only some simplified, although really accurate, measuring
tools. So in order to use DRC you need:</P><OL CLASS="enumerate" type=1><LI CLASS="li-enumerate">At least 1 second of the impulse response of your room and audio
system at the listening position, separated for each channel, which means
usually just left and right for a basic HiFi system. The impulse
response should be provided in raw format (flat file with just samples,
no headers or additional information whatsoever), either in signed 16
bit format or using 32/64 bit IEEE floating point samples. From version
2.4.1 DRC includes some command line tools to do accurate time aligned
impulse response measurement, see section
<A HREF="#ImpulseResponseMeasurement">4.4</A> for further details. Many other
systems, either commercial or free, are available on the Internet to
carry out this task. Take a look at:<DIV CLASS="flushleft"><UL CLASS="itemize"><LI CLASS="li-itemize">
Room Eq Wizard <A HREF="http://www.hometheatershack.com/roomeq/"><TT>http://www.hometheatershack.com/roomeq/</TT></A>
</LI><LI CLASS="li-itemize">rec_imp: <A HREF="http://www.duffroomcorrection.com/wiki/Simple_Automated_IR_Measuring_Tool"><TT>http://www.duffroomcorrection.com/wiki/Simple_Automated_IR_Measuring_Tool</TT></A>
</LI><LI CLASS="li-itemize">ETF: <A HREF="http://www.etfacoustic.com/"><TT>http://www.etfacoustic.com/</TT></A>
</LI><LI CLASS="li-itemize">Sample Champion: <A HREF="http://www.purebits.com/"><TT>http://www.purebits.com/</TT></A>
</LI><LI CLASS="li-itemize">Aurora plugins: <A HREF="http://www.aurora-plugins.com/"><TT>http://www.aurora-plugins.com/</TT></A>
</LI><LI CLASS="li-itemize">MLSSA: <A HREF="http://www.mlssa.com/"><TT>http://www.mlssa.com/</TT></A>
</LI><LI CLASS="li-itemize">CLIO: <A HREF="http://www.audiomatica.it/"><TT>http://www.audiomatica.it/</TT></A>
</LI><LI CLASS="li-itemize">Audua Speaker Workshop: <A HREF="http://www.speakerworkshop.com/"><TT>http://www.speakerworkshop.com/</TT></A>
</LI><LI CLASS="li-itemize">The MLS system provided with the Nwfiir Audio Tools suite
</LI><LI CLASS="li-itemize">LAUD
</LI><LI CLASS="li-itemize">Techron TEF
</LI></UL></DIV><P>
Since some time there are also some integrated packages provinding both
the measurements functionality and the correction, based on DRC. Some
examples:</P><DIV CLASS="flushleft"><UL CLASS="itemize"><LI CLASS="li-itemize">
DRCDesigner: <A HREF="http://www.alanjordan.org/DRCDesigner/DrcDesignerHelp.html"><TT>http://www.alanjordan.org/DRCDesigner/DrcDesignerHelp.html</TT></A>
</LI><LI CLASS="li-itemize">Align: <A HREF="http://www.ohl.to/about-audio/audio-softwares/align/"><TT>http://www.ohl.to/about-audio/audio-softwares/align/</TT></A>
</LI><LI CLASS="li-itemize">The Final Cut: <A HREF="http://www.ohl.to/about-audio/audio-softwares/the-final-cut/"><TT>http://www.ohl.to/about-audio/audio-softwares/the-final-cut/</TT></A>
</LI><LI CLASS="li-itemize">Inguz Audio: <A HREF="http://inguzaudio.com/"><TT>http://inguzaudio.com/</TT></A>
</LI></UL></DIV><P>
This packages may be really useful, expecially for unexperienced peoples.</P><P>Many information and free programs useful for measuring and handling
impulse responses are available at the NoiseVault web site:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.noisevault.com/"><TT>http://www.noisevault.com/</TT></A>
</BLOCKQUOTE><P>
Of course a good instrumentation microphone and preamplifier are needed
to get accurate measurements of your listening room response. The ETF
web sites has a link to a cheap but still quite good instrumentation
microphone, which comes with an individual calibration file:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.ibf-akustik.de/"><TT>http://www.ibf-akustik.de/</TT></A>
</BLOCKQUOTE><P>It is built around the Panasonic electrect capsules (WM-60A and WM-61A)
which can be used also to build a DIY microphone. Of course you won&#X2019;t
get the same quality of a professional instrumentation microphone, but
it is enough to get good results. Some other good and inexpensive solutions
are the Behringer ECM8000 measurement microphone (see
<A HREF="http://www.behringer.com"><TT>http://www.behringer.com</TT></A> for details) and the Dayton Audio EMM-6:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.daytonaudio.com/index.php/emm-6-electret-measurement-microphone.html"><TT>http://www.daytonaudio.com/index.php/emm-6-electret-measurement-microphone.html</TT></A>
</BLOCKQUOTE><P>
which provides also individual calibration files.</P></LI><LI CLASS="li-enumerate">A real time convolver able to deal with FIR filters with at least
4000 and up to more than 32000 taps, like BruteFIR, Foobar2000, the
ActiveX Convolver Plugin and others. References for these programs can
be found at the following links:<P><A NAME="BruteFIR"></A>
</P><DIV CLASS="flushleft"><UL CLASS="itemize"><LI CLASS="li-itemize">
BruteFIR: <A HREF="http://www.ludd.luth.se/~torger/brutefir.html"><TT>http://www.ludd.luth.se/~torger/brutefir.html</TT></A>
</LI><LI CLASS="li-itemize">ActiveX Convolver Plugin: <A HREF="http://convolver.sourceforge.net"><TT>http://convolver.sourceforge.net</TT></A>
</LI><LI CLASS="li-itemize">Foobar2000 with convolver plugin: <A HREF="http://www.foobar2000.org/"><TT>http://www.foobar2000.org/</TT></A>
</LI><LI CLASS="li-itemize">Jconv: <A HREF="http://www.kokkinizita.net/"><TT>http://www.kokkinizita.net/</TT></A>
</LI><LI CLASS="li-itemize">RealReverb WinAmp plugin, optionally along with the LineIn plugin:
<BLOCKQUOTE CLASS="quote">
<A HREF="http://www-personal.umich.edu/~mressl/"><TT>http://www-personal.umich.edu/~mressl/</TT></A><BR>
	 <A HREF="http://www.winamp.com/"><TT>http://www.winamp.com/</TT></A><BR>
<A HREF="http://home.hccnet.nl/th.v.d.gronde/"><TT>http://home.hccnet.nl/th.v.d.gronde/</TT></A>
</BLOCKQUOTE>
</LI><LI CLASS="li-itemize">SIR Reverb plugin: <A HREF="http://www.knufinke.de/sir/index_en.html"><TT>http://www.knufinke.de/sir/index_en.html</TT></A>
</LI><LI CLASS="li-itemize">Aurora plugins: <A HREF="http://www.aurora-plugins.com/"><TT>http://www.aurora-plugins.com/</TT></A>
</LI><LI CLASS="li-itemize">CATT FIReverb suite: <A HREF="http://www.catt.se/the_suite.htm"><TT>http://www.catt.se/the_suite.htm</TT></A>
</LI><LI CLASS="li-itemize">Convo Boy: <A HREF="http://www.kvraudio.com/get/1469.html"><TT>http://www.kvraudio.com/get/1469.html</TT></A>
</LI><LI CLASS="li-itemize">Voxengo Pristine Space: <A HREF="http://www.voxengo.com/product/pspace/"><TT>http://www.voxengo.com/product/pspace/</TT></A></LI></UL></DIV><P>
Furthermore a ready to use Linux distribution suited for audio
applications is available at Planet CCRMA:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://ccrma-www.stanford.edu/planetccrma/software/"><TT>http://ccrma-www.stanford.edu/planetccrma/software/</TT></A>
</BLOCKQUOTE><P>
This distribution already contains most of what is needed to create a
real time convolution engine suited for digital room correction.</P><P>On the DRC Wiki pages created by Ed Wildgoose there&#X2019;s a document,
created by Uli Brueggemann, on how to create a Linux mini distribution
suited to run BruteFIR out of a USB memory stick. Take a look at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.duffroomcorrection.com/"><TT>http://www.duffroomcorrection.com/</TT></A>
</BLOCKQUOTE><P>
and search for &#X201C;BruteFIR on a USB memory stick&#X201D;. Further informations about
this option are available on the Acourate web site:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.acourate.com/"><TT>http://www.acourate.com/</TT></A>
</BLOCKQUOTE></LI><LI CLASS="li-enumerate">Hardware needed to run all the programs. I&#X2019;m actually using a
&#X201C;Shoe Box&#X201D; PC manufactured by ITOX (<A HREF="http://www.itox.com"><TT>http://www.itox.com</TT></A>) along
with a TerraTec EWX 24/96 sound card. This &#X201C;Shoe Box&#X201D; PC is running
Linux (RedHat 7.3), ALSA (see <A HREF="http://www.alsa-project.org"><TT>http://www.alsa-project.org</TT></A>) and
BruteFIR to provide real time correction from the optical S/PDIF output
of a consumer CD player. The PC configuration is really simple (Intel
Celeron CPU running at 800 MHz, 64 Mb of RAM, old 1.6 Gb Hard Disk) but
it is more than adequate for real time correction of two channels
running at 44.1 kHz. With this configuration BruteFIR uses just about
15% of the CPU power.<P>Of course to test the program you can also apply the correction off-line
on audio files ripped from ordinary audio CDs, burning the corrected
files on some fresh CDR and listening to them using a standard CD
player. This avoids the need of any dedicated hardware and lets you test
DRC on your favourite CD player.</P><P>Since few years there are many good, silent and compact PCs designed for
multimedia usage which could be used to build a complete noiseless real
time convolver with little effort. For some examples take a look at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.cappuccinopc.com/"><TT>http://www.cappuccinopc.com/</TT></A><BR>
<A HREF="http://www.stealthcomputer.com/"><TT>http://www.stealthcomputer.com/</TT></A><BR>
<A HREF="http://www.tranquilpc.co.uk/"><TT>http://www.tranquilpc.co.uk/</TT></A><BR>
<A HREF="http://www.mini-itx.com/"><TT>http://www.mini-itx.com/</TT></A><BR>
</BLOCKQUOTE></LI></OL><!--TOC subsection Filter generation procedure-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc28">4.1</A>&#XA0;&#XA0;Filter generation procedure</H3><!--SEC END --><P>The creation of a correction filter for room acoustic compensation is
quite a challenging task. A typical acoustic environment is a non
minimum phase system, so in theory it cannot be inverted to get perfect
compensation. Furthermore a typical HiFi system in a typical listening
room isn&#X2019;t either a single linear system, but it is instead a different
linear system for every different listening position available.</P><P>Trying to get an almost perfect compensation for a given position
usually leads to unacceptable results for positions which are even few
millimeters apart from the corrected position. The generation of a
filter that provides good compensation of magnitude and phase of the
frequency response of the direct sound, good control of the magnitude of
the frequency response of the stationary field and an acceptable
sensitivity on the listening position, requires many steps. Here it is a
brief summary of what DRC does:</P><OL CLASS="enumerate" type=1><LI CLASS="li-enumerate">Initial windowing and normalization of the input impulse response.</LI><LI CLASS="li-enumerate">Optional microphone compensation.</LI><LI CLASS="li-enumerate">Initial dip limiting to prevent numerical instabilities during
homomorphic deconvolution.</LI><LI CLASS="li-enumerate">Decomposition into minimum phase and excess phase components
using homomorphic deconvolution.</LI><LI CLASS="li-enumerate">Prefiltering of the minimum phase component with frequency
dependent windowing.</LI><LI CLASS="li-enumerate">Frequency response dip limiting of the minimum phase component to
prevent numerical instabilities during the inversion step.</LI><LI CLASS="li-enumerate">Prefiltering of the excess phase component with frequency
dependent windowing.</LI><LI CLASS="li-enumerate">Normalization and convolution of the preprocessed minimum phase
and excess phase components (optional starting from version 2.0.0).</LI><LI CLASS="li-enumerate">Impulse response inversion through least square techniques or fast
deconvolution.</LI><LI CLASS="li-enumerate">Optional computation of a psychoacoustic target response based on the
magnitude response envelope of the corrected impulse response.</LI><LI CLASS="li-enumerate">Frequency response peak limiting to prevent speaker and
amplification overload.</LI><LI CLASS="li-enumerate">Ringing truncation with frequency dependent windowing to remove
any unwanted excessive ringing caused by the inversion stage and the
peak limiting stage.</LI><LI CLASS="li-enumerate">Postfiltering to remove uncorrectable (subsonic and ultrasonic)
bands and to provide the final target frequency response.</LI><LI CLASS="li-enumerate">Optional generation of a minimum phase version of the correction
filter.</LI><LI CLASS="li-enumerate">Final optional test convolution of the correction filter with the
input impulse response.</LI></OL><P>
Almost each of these steps have configurable parameters and the optional
capability to output intermediate results.</P><P>Of course I&#X2019;m not sure at all that this is the best procedure to get
optimal correction filters. There is a lot of psychoacoustic involved in
the generation of room acoustic correction filters, so probably the use
of a more psychoacoustic oriented procedure would give even better
results. Any suggestion with respect to this is appreciated.</P><P>Within my HiFi system the application of the correction provides huge
improvements. By the way my system no longer can be considered a normal
HiFi system. It is actually much closer to a studio monitoring system
placed in a heavily damped room. Furthermore there is also an high
performance subwoofer, extending the response down into the infrasonic
range, and everything has been tuned to provide the best results with
the correction in place. For some example of the results achieved see
appendix <A HREF="#SampleResults">A</A>.</P><!--TOC subsection Frequency dependent windowing-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc29">4.2</A>&#XA0;&#XA0;Frequency dependent windowing</H3><!--SEC END --><P>
<A NAME="FrequencyDependentWindowing"></A></P><P>The frequency dependent windowing is one of the most common operations
within DRC. This type of windowing follow up directly from the fact that
within a room the sensitivity of the room transfer function to the
listening position is roughly dependent on the wavelength involved. This
of course implies that the listening position sensitivity increase quite
quickly with frequency.</P><P>This dependence has the side effect that the room correction need to be
reduced as the frequency increase, or, seen from the other side, as the
wavelength decrease. For this reason DRC tries to apply a correction
that is roughly proportional to the wavelength involved. This approach
has also some psychoacoustic implications, because our auditory system
is conceived to take into account the same exact room behaviour, and so
its own behaviour follow somewhat similar rules.</P><P>Within DRC the frequency dependent windowing is implemented with two
different kind of procedures: band windowing and sliding lowpass linear
time variant filtering. The first procedure simply filters the input
signals into logarithmically spaced adjacent bands and applies different
windows to them, then summing the resulting signals together to get the
output windowed impulse response. The second procedure uses a time
varying lowpass filter, with a cut-off frequency that decreases with the
window length. The results are pretty similar, but usually the sliding
lowpass procedure is preferred because it is less prone to numerical
errors and allows for a bit more of flexibility.</P><P>Both procedures follow the same basic rules in order to define the type of
windowing that gets applied to the input signal. The basic parameters
are the lower window, i.e. the window applied at the lower end of the
frequency range involved, the upper window, i.e. the window applied at
the upper end of the frequency range, and the window exponent, i.e.
the exponent used to connect the lower window to the upper window with a
parametric function that goes as the inverse of the frequency. For
a description of the parametric function used see section
<A HREF="#MPWindowExponent">6.4.8</A>.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc001.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 1: <A NAME="PrefilterLinear"></A> Frequency dependent windowing for the
normal.drc sample settings on the time-frequency plane. Linear scale.
The X axis is time in milliseconds, the Y axis is frequency in Hz. The
part that gets corrected is the one below the windowing curves.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>For example figure <A HREF="#PrefilterLinear">1</A> show the typical set of
prefiltering curves applied to the input impulse response by the
normal.drc sample settings (see section <A HREF="#SampleConfigurationFiles">5.2</A>).
For this sample settings file the default setting for the window
exponent, which is the WE parameter in the figure, is 1.0. The part of
the input impulse response that is preserved, and so also corrected, is
the one below the curves. The remaining part of the time-frequency plane
is simply windowed out and ingored in the correction.</P><P>Looking at this figure it becomes pretty clear that only a tiny fraction
of the time-frequency plane gets corrected by DRC. This tiny fraction
pretty much defines the physical limits where digital room correction is
applicable. Above this limit the listening position sensitivity usually
becomes so high that even a small displacement of the head from the
optimal listening position causes unacceptable results with the
appearance of strong audible artifacts.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc002.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 2: <A NAME="PrefilterSemilogY"></A> Frequency dependent windowing for the
normal.drc sample settings on the time-frequency plane. Logarithmic
frequency scale. The X axis is time in milliseconds, the Y axis is
frequency in Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>By the way it should be also taken into account that our ear perceives
this time-frequency plane on a logarithmic frequency scale. Looking at
the same graph on a logarithmic frequency scale, as in figure
<A HREF="#PrefilterSemilogY">2</A>, it becomes clear that from our auditory system
point of view a much bigger fraction of the time-frequency plane gets
corrected. It becomes also clear that above 1-2 kHz only the direct
sound gets corrected and that above that range room correction actually
reduces to just minimalistic speaker correction.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc003.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 3: <A NAME="PrefilterSemilogX"></A> Frequency dependent windowing for the
normal.drc sample settings on the time-frequency plane. Logarithmic time
and linear frequency scales. The X axis is time in milliseconds, the Y
axis is frequency in Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc004.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 4: <A NAME="PrefilterLogLog"></A> Frequency dependent windowing for the
normal.drc sample settings on the time-frequency plane. Logarithmic time
and frequency scales. The X axis is time in milliseconds, the Y axis is
frequency in Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc005.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 5: <A NAME="Gabor"></A> Frequency dependent windowing for the normal.drc
sample settings on the time-frequency plane. Logarithmic time and
frequency scale with Gabor limit superimposed. The X axis is time in
milliseconds, the Y axis is frequency in Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>While developing DRC I&#X2019;ve read some informal notes on the Internet
stating that on short time windows our perception of time should be
considered on a logarithmic scale too. I&#X2019;m not quite convinced that this
assumption is actually true, but if such an assumption is correct our
perception of the room correction would be as in figures
<A HREF="#PrefilterSemilogX">3</A> and <A HREF="#PrefilterLogLog">4</A>. Even if this
assumption is not true these graphs are pretty useful to make clearly
visible the part of the time-frequency plane that gets corrected by DRC
and becomes even more useful if also the Gabor limit is placed in the
graph as in figure <A HREF="#Gabor">5</A>.</P><P>The Gabor limit is defined by the following simple inequality:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell">	&#X394;&#XA0;<I>f</I>&#XA0;&#X394;&#XA0;<I>t</I>&#XA0;&gt;&#XA0;</TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">1</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center">2</TD></TR>
</TABLE></TD></TR>
</TABLE><P>
where <I>f</I> is frequency and <I>t</I> is time, and defines the limit of
uncertainity in the time-frequency plane. This means for example that,
looking at picture <A HREF="#Gabor">5</A>, when the window exponent goes below
about 0.5 the frequency dependent windowing starts violating the Gabor
inequality at least in some small frequency range. Within that range the
room transfer function estimation performed by DRC becomes inaccurate
and the room correction might be affected by appreciable errors in the
evaluation of the room transfer function.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc006.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 6: <A NAME="BPComparison"></A> Comparison between the standard
proportional windowing curve and the new one based on the bilinear
transformation. Logarithmic time and frequency scale. The X axis is time
in milliseconds, the Y axis is frequency in Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>Starting with version 2.6.0 a prefiltering curve based on the
bilinear transform has been introduced. This curve provides a better
match with the typical resolution of the ear and also with the typical
behaviour of the listening room. The windowing curve provides the
same exact results as the previous windowing curve when the window
exponent is set to 1.0, but provides a different behaviour when the
window exponent is changed, as showed in figure <A HREF="#BPComparison">6</A>. The
closer approximation of the ear behaviour is clearly visible in figure
<A HREF="#BandwidthComparison">8</A>, where it is shown that using an appropriate
configuration of the windowing parameters it is possible to get a close
to perfect match with the ERB psychoacoustic scale (see curves labeled
ERB and erb.drc, which overlap almost perfectly).</P><!--TOC subsubsection Pre-echo truncation-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc30">4.2.1</A>&#XA0;&#XA0;Pre-echo truncation</H4><!--SEC END --><P>
<A NAME="Pre-echoTruncation"></A></P><P>Starting from version 2.7.0 this step is implicitely disabled.
Considering that excess phase inversion is performed simply by time
reversal of the excess phase component, pre-echo is implicitely limited
by the frequency dependent windowing performed on the excess phase. The
description of this step and the code performing it has been retained
because it could be used for experimental reasons, especially
considering that the reequalization to flat performed in this step is
time reversed with respect to that performed in the excess phase
pre-processing. This meas that a minimum phase reequalization performed
in the pre-echo truncation is equivalent to a maximum phase
reequalization in the excess phase pre-processing, and the other way
around.</P><P>If enabled frequency dependent windowing is used to truncate the
pre-echo caused by the inversion of the excess phase part of the impulse
response. The truncation procedure is always the same but it is
implicitely applied on the left side of the time-frequency plane instead
of the right side, because inversion of the excess phase corresponds to
a time reversal. A much shorter windowing is used because our ear is
quite sensitive to pre-echo.</P><P>Windowing out part of the impulse response of the excess phase component
of the correction filter of course makes it no longer an all-pass
filter, i.e. the excess phase part no longer has a flat magnitude
response. To compensate for this problem the excess phase component
magnitude response is equalized back to flat using, after inversion, a
minimum phase filter. This of course causes some post-ringing. Even
though this usually happens only on few narrow bands, it might be quite
audible, and gets limited by the subsequent ringing truncation stage.</P><!--TOC subsubsection Ringing truncation stage-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc31">4.2.2</A>&#XA0;&#XA0;Ringing truncation stage</H4><!--SEC END --><P>
<A NAME="RingingTruncationStage"></A></P><P>Since version 2.5.0 a further frequency dependent windowing is applied
directly to the filter after impulse response inversion and peak
limiting. This is performed to remove any residual ringing caused by the
previous steps, especially the dip and peak limiting steps, even though
this implies some tradeoff on filter accuracy.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc007.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 7: <A NAME="FDWJail"></A> Frequency dependent windowing jail for the
normal.drc sample settings on the time-frequency plane. Linear time
scale and logarithmic frequency scale. The X axis is time in
milliseconds, the Y axis is frequency in Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>With this further step the filter impulse response gets enclosed in a
sort of time-frequency jail defined by the excess phase windowing
settings on the left side of the time-frequency plane and by the ringing
truncation settings on the right side (see figure <A HREF="#FDWJail">7</A>).
Considering that this time-frequency bounds have also some
psychoacoustic implications, with this time-frequency enclosure DRC
should be able to truncate automatically any part of the correction that
is probably going to cause audible artifacts. Following this lines DRC
gains at least a bit of psychoacoustically based &#X201C;self tuning&#X201D; and
should become more robust and less prone to artifacts.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc008.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 8: <A NAME="BandwidthComparison"></A> Resolution bandwidth, as a function
of frequency, for the frequency dependent windowing and various standard
smoothing procedures, including the Bark and ERB psychoacoustic scales.
The X axis is frequency in kHz, the Y axis is frequency in Hz, both
plotted on a logarithmic scale. The windowing parameters of the
normal.drc and erb.drc sample settings files have been used to plot the
DRC resolution curves.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>Applying the Gabor inequality to the window length between the two
curves of pre-echo and ringing truncation it is pretty easy to get an
equivalent frequency resolution, as a function of center frequency, of
the frequency dependent windowing procedure. This resolution could be
compared, as in figure <A HREF="#BandwidthComparison">8</A>, to some standard
smoothing procedures widely used within many audio applications, like
fractional octave smoothing and the classical Bark and ERB
psychoacoustic scales.</P><P>From figure <A HREF="#BandwidthComparison">8</A> it is pretty clear that the
correction resolution used by DRC is well above that of any of the
standard smoothing procedures, at least with the normal.drc sample
settings file (see section <A HREF="#SampleConfigurationFiles">5.2</A>). This means
that the correction should provide a perceived frequency response that
is really close to the configured target frequency response.</P><P>The &#X201C;erb.drc&#X201D; resolution plot show the approximation of the ERB scale
provided by the &#X201C;erb.drc&#X201D; sample settings file (see section
<A HREF="#SampleConfigurationFiles">5.2</A>. The approximation has been created
assuming:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell">	&#X394;&#XA0;<I>f</I>&#XA0;&#X394;&#XA0;<I>t</I>&#XA0;=&#XA0;2
</TD></TR>
</TABLE><P>
instead of the usual Gabor inequality (see figure <A HREF="#Gabor">5</A>), i.e.
assuming that the frequency dependent windowing with the settings used
has a resolution that is about four times above the Gabor limit. This is
a rough estimate of the true resolution achieved by the DRC procedure in
this situation. This estimation has been derived considering the
compound effect of the various overlapped windows applied at various
stages of the filter generation procedure.</P><!--TOC subsection Psychoacoustic target computation-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc32">4.3</A>&#XA0;&#XA0;Psychoacoustic target computation</H3><!--SEC END --><P>
<A NAME="PsychoacousticTargetComputation"></A></P><P>Starting from version 3.0.0 an optional stage, used to compute a target
frequency response based on the psychoacoustic perception of the
corrected frequency response, has been introduced. The target response
is based on the computation of the magnitude response envelope of the
corrected impulse response, which is an extension of the spectral
envelope concept. This is performed before the application of the usual
target response, so that the standard target response is not compensated
back by this stage.</P><P>The spectral envelope is a concept which has been introduced in the
field of speech synthesis and analysis and is defined simply as a smooth
curve connecting or somewhat following the peaks of the signal spectrum.
There are strong arguments and experimental evidence supporting this
approach and the idea that our ear uses the spectral envelope for the
recognition of sounds. The spectral envelope, for example, allow our ear
to understand speech under many different conditions, whether it is
voiced, whispered or generated by other means. These different
conditions generate completely different spectrums but usually pretty
similar spectral envelopes. The spectral envelope also easily explains
why our ear is more sensitive to peak in the magnitude response and less
sensitive to dips. A curve based on the peaks of the magnitude response
is by definition little or not affected at all by dips in the frequency
response.</P><P>In the speech recognition field many procedures have been developed to
compute the spectral envelope. Some of them are based on Linear
Predictive Coding (LPC), the Discrete Cepstrum, the so called &#X201C;True
Envelope&#X201D; and finally the Minimum Variance Distortionless Response
(MVDR). Most of these methods are optimized for speed, noise resilience
and to provide good results in the voice spectrum range sampled at low
sample rates, so they are not really suited for HiFi usage.</P><P>Within DRC a different procedure has been developed. This is a variation
of the usual fractional octave smoothing procedure, using the parametric
H&#XF6;lder mean instead of the usual simple averaging. Furthermore the
smoothing has been extended to provide the Bark and ERB scales
resolution when applicable.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc009.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 9: <A NAME="SpectralEnvelope"></A> Example of a magnitude response envelope. The
unsmoothed magnitude response of a typical room, corrected with a flat
target, is plotted. Superimposed there is the usual smoothing, computed
on the ERB scale, showing an essentially flat magnitude response, as
expected. The magnitude response envelope, computed on the ERB scale too using
standard parameters, show a rising slope which is in good agreement with
the inverse of one of the target responses suggested in the literature.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>For the tuning of the parameters used in the magnitude response envelope
computation some typical real world room magnitude responses have been
taken. The computation parameters have been set so that the resulting
magnitude response envelope provides a target response as close as possible to the
inverse of the usual target responses suggested in the literature. An
example is reported in picture <A HREF="#SpectralEnvelope">9</A>. The same
parameters have been tested also in some not so common room to check
that they were still providing the expected results. Of course,
considering that now the basic target response is provided by the
inverse of the magnitude response envelope, the usual target responses are no
longer needed, apart from subsonic or ultrasonic filtering, and should
be set to flat. For this reason the flat response is now the default
target for all standard configuration files. The standard target
response stage should be used only to adjust the response to taste, but,
unlike previous versions, for a neutral reproduction a flat response
should be used.</P><P>From the subjective point of view a system equalized to the inverse of
the magnitude response envelope usually sound really neutral. Even though most of
the times the magnitude response envelope response is different among the various
channels, resulting in an obvious channel misalignement if evaluated
with the standard smoothing procedures, imaging usually improves,
becoming more stable and focused. This appear to confirm that the
estimation performed by the magnitude response envelope has to be close to
the subjective perception of the magnitude response.</P><!--TOC subsection Impulse response measurement-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc33">4.4</A>&#XA0;&#XA0;Impulse response measurement</H3><!--SEC END --><P>
<A NAME="ImpulseResponseMeasurement"></A></P><P>Starting from version 2.4.1 two simple command lines tools, glsweep
(Generate Log Sweep) and lsconv (Log Sweep Convolution), are available
to perform accurate time aligned impulse response measurements. These
tools are based on the log sweep method for impulse response
measurement, which is one of the most accurate, especially for acoustic
measurements. This method is based on a special signal, which is a
logarithmic sinusoidal sweep, that need to be reproduced through the
system under test, and an inverse filter, which, when convolved with the
measured log sweep, gives back the impulse response of the system.</P><P>The steps needed to get the impulse response are the following:</P><OL CLASS="enumerate" type=1><LI CLASS="li-enumerate">Generate the log sweep and inverse filter using glsweep,
optionally converting the sweep to a suitable format.</LI><LI CLASS="li-enumerate">Play the log sweep through your system using a soundcard while
recording the speaker output using a (hopefully good) microphone and any
recording program.</LI><LI CLASS="li-enumerate">Convolve the recorded log sweep with the inverse filter using
lsconv to get the final impulse response.</LI></OL><P>
If full duplex is supported by the soundcard, recording may be performed
using the same soundcard used for playing. Using two different
soundcards or a CD Player for reproduction and a soundcard for
recording usually provides worse results unless they are accurately
time synchronized.</P><P>The lsconv tool allows also for the use of a secondary reference channel
to correct for the soundcard frequency response and for any time
misalignment caused by the soundcard itself, the soundcard drivers or
the play and recording programs. This soundcard compensation of course
works if the reference channel has the same behaviour of the measuring
channel. The typical use of this feature would be the use of one channel
of a stereo or multichannel soundcard to measure the system and another
one used in a loopback configuration to get the reference channel needed
to correct the soundcard itself.</P><P>With this configuration even with cheap soundcards it is pretty easy to
get a  &#XB1; 0.1  dB frequency response over the audio frequency range
with near to perfect time alignment and phase response. Considering that
the log sweep method ensure by itself a strong noise rejection (90 dB of
S/N ratio is easily achievable even in not so quiet environments) and a
strong rejection to artifacts caused by the system non linear
distortions, with this method the final measurements usually have true
state of the art accuracy.</P><P>Finally an important warning: playing the log sweep signal at an
excessive level can easily damage your speakers, especially the
tweeters. So be really careful when playing such a signal through your
equipment. The &#X201C;Jones Rush&#X201D; guide (see section <A HREF="#JonesRushGuide">1</A>)
provides some useful hints to help you in the use of this kind of tools
without the risk of damaging your equipment. No responsibility is taken
for any damage to your equipment, everything is at your own risk.</P><!--TOC subsubsection The glsweep program-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc34">4.4.1</A>&#XA0;&#XA0;The glsweep program</H4><!--SEC END --><P>When executed without parameters the glsweep program gives the following
output:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>GLSweep 1.0.2: log sweep and inverse filter generation.
Copyright (C) 2002-2005 Denis Sbragion

Compiled with single precision arithmetic.

This program may be freely redistributed under the terms of
the GNU GPL and is provided to you as is, without any warranty
of any kind. Please read the file "COPYING" for details.

Usage: glsweep rate amplitude hzstart hzend duration silence
        leadin leadout sweepfile inversefile

Parameters:

  rate: reference sample rate
  amplitude: sweep amplitude
  hzstart: sweep start frequency
  hzend: sweep end frequency
  duration: sweep duration in seconds
  silence: leading and trailing silence duration in seconds
  leadin: leading window length as a fraction of duration
  leadout: trailing window length as a fraction of duration
  sweepfile: sweep file name
  inversefile: inverse sweep file name

Example: glsweep 44100 0.5 10 21000 45 2 0.05 0.005 sweep.pcm inverse.pcm
</FONT></PRE>
</BLOCKQUOTE><P>
The program output contains some brief explanation of the generation
parameters and some sample options.</P><P>The longer the log sweep used the stronger the noise rejection of the
measure. A 45 seconds log sweep usually gives more than 90 dB of signal
to noise ratio in the final impulse response even when used in somewhat
noisy environments, for example one where the computer used to do the
measure is in the same room of the measured system, producing all of its
fan noise. The output format is the usual raw file with 32 bit IEEE
floating point samples. If you need to convert the sweep generated using
the example above to a 16 bit mono WAV file you can use SoX with a
command line like this one:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>sox -t f32 -r 44100 -c 1 sweep.pcm -t wav -c 1 sweep.wav
</FONT></PRE>
</BLOCKQUOTE><P>
SoX, can be downloaded at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://sox.sourceforge.net/"><TT>http://sox.sourceforge.net/</TT></A>
</BLOCKQUOTE><P>
If you want to create a stereo WAV file to get also the reference
channel you can use something like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>sox -t f32 -r 44100 -c 1 sweep.pcm -t wav -c 2 sweep.wav
</FONT></PRE>
</BLOCKQUOTE><P>
The inverse filter doesn&#X2019;t need to be converted to a WAV file because
lsconv is already able to read it as is. If you need to convert a
recorded sweep stored in a wav file back to a raw 32 bit floating point
format use this command:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>sox recorded.wav -t f32 recorded.pcm
</FONT></PRE>
</BLOCKQUOTE><P>
If you have a stereo WAV file with both the measurement channel and the
reference channel you can extract them into two files using:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>sox recorded.wav -t f32 -c 1 recorded.pcm mixer -l
sox recorded.wav -t f32 -c 1 reference.pcm mixer -r
</FONT></PRE>
</BLOCKQUOTE><P>
provided that the recorded channel is the left one (&#X201C;mixer -l&#X201D;
parameter) and the reference channel is the right one (&#X201C;mixer -r&#X201D;
parameter).</P><!--TOC subsubsection The lsconv program-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc35">4.4.2</A>&#XA0;&#XA0;The lsconv program</H4><!--SEC END --><P>When executed without parameters the lsconv program gives the following
output:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>LSConv 1.0.3: log sweep and inverse filter convolution.
Copyright (C) 2002-2005 Denis Sbragion

Compiled with single precision arithmetic.

This program may be freely redistributed under the terms of
the GNU GPL and is provided to you as is, without any warranty
of any kind. Please read the file "COPYING" for details.

Usage: LSConv sweepfile inversefile outfile [refsweep mingain [dlstart]]

Parameters:

  sweepfile: sweep file name
  inversefile: inverse sweep file name
  outfile: output impulse response file
  refsweep: reference channel sweep file name
  mingain: min gain for reference channel inversion
  dlstart: dip limiting start for reference channel inversion

Example: lsconv sweep.pcm inverse.pcm impulse.pcm refchannel.pcm 0.1 0.8
</FONT></PRE>
</BLOCKQUOTE><P>
All files must be in the usual raw 32 bit floating point format. To get
the impulse response without the use of a reference channel just use
something like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>lsconv recorded.pcm inverse.pcm impulse.pcm
</FONT></PRE>
</BLOCKQUOTE><P>
Where &#X201C;recorded.pcm&#X201D; is the recorded sweep, &#X201C;inverse.pcm&#X201D; is the
inverse filter generated by glsweep and &#X201C;impulse.pcm&#X201D; is the output
impulse response ready to be fed to DRC.</P><P>If you also want to use the reference channel use something like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>lsconv recorded.pcm inverse.pcm impulse.pcm reference.pcm 0.1
</FONT></PRE>
</BLOCKQUOTE><P>
The &#X201C;0.1&#X201D; value is the minimum allowed gain for the reference channel
inversion. 0.1 is the same as -20 dB, i.e. no more then 20 dB of the
reference channel frequency response will be corrected. This is needed
also to prevent numerical instabilities caused by the strong cut off
provided by the soundcard DAC and ADC brick wall filters.</P><P>When used with the reference channel the main spike of the impulse
response is always at exactly the same length of the log sweep used,
provided that the two soundcard channels are perfectly synchronized. Of
course this is usually true for all soundcards.</P><P>For example if a 10 seconds sweep is used the main spike will be exactly
at 10 seconds from the beginning of the output impulse response, i.e. at
sample 441000 if a 44.1 kHz sample rate is used.</P><P>If the main spike is at a different position it means that there&#X2019;s some
delay in the measurement channel, usually caused by the time the sound
takes to travel from the speaker to the microphone. If this delay is
different for different channels it means that there&#X2019;s a time
misalignment between channels that needs to be corrected. Up to a
limited amount, and using some small tricks, DRC is already able to
compensate for interchannel delays (see section
<A HREF="#InterchannelTimeAlignment">4.6.5</A>). Some future DRC release will include
better support for interchannel time alignment.</P><!--TOC subsubsection Sample automated script file-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc36">4.4.3</A>&#XA0;&#XA0;Sample automated script file</H4><!--SEC END --><P>Under the &#X201C;source/contrib/Measure&#X201D; directory of DRC there&#X2019;s a sample
Linux shell script, called &#X201C;measure&#X201D;, that uses glsweep, lsconv, SoX
and standard ALSA play and recording tools to automate the time aligned
measurement procedure using a reference channel. This sample script can
be used only under Linux and it is just a quick hack to allow expert
users to automate the whole procedure. Use it at your own risk.</P><P>Furthermore this script has been developed with an old version of SoX
(12.17.7) so it might need some changes to work with more recent
versions. It also needs any related tools ready to be executed from the
working directory, else it doesn&#X2019;t work. When executed without
parameters the script gives the following output:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>Automatic measuring script.
Copyright (C) 2002-2005 Denis Sbragion

This program may be freely redistributed under the terms of
the GNU GPL and is provided to you as is, without any warranty
of any kind. Please read the file COPYING for details.

Usage:
 measure bits rate startf endf lslen lssil indev outdev impfile [sweepfile]

 bits: measuring bits (16 or 24)
 rate: sample rate
 startf: sweep start frequency in Hz
 endf: sweep end frequency in Hz
 lslen: log sweep length in seconds
 lssil: log sweep silence length in seconds
 indev: ALSA input device
 outdev: ALSA output device
 impfile: impulse response output file
 sweepfile: optional wav file name for the recorded sweep

example: measure 16 44100 5 21000 45 2 plughw plughw impulse.pcm
</FONT></PRE>
</BLOCKQUOTE><P>
This script assumes that the measuring channel is on the left channel
and that the reference channel is the right one. To use it just take a
look at the sample command line provided above. You have to provide
proper ALSA input and output devices, but &#X201C;plughw&#X201D; usually works with
most soundcards.</P><P>Using 24 bits of resolution to measure an impulse response is usually
just a waste of resources. In most rooms getting a recorded sweep with
more than 60 dB of S/N ratio is close to impossible, so 16 bits of
resolution are already plain overkill. On the other hand, thanks to the
strong noise rejection provided by the log sweep method, a sweep S/N
ratio of 60 dB is already high enough to get more than 90 dB of S/N
ratio in the recovered impulse response, at least with a 45 s sweep
running at a 44.1 kHz sample rate.</P><P>The impulse response is what DRC works on, so it is the impulse response
that needs an high S/N ratio, not the sweep. If you really want a better
impulse response S/N ratio, or if you measure in a noisy environment,
increase the sweep length instead of using 24 bits of resolution. A
longer sweep will improve the S/N ratio of the impulse response,
increasing the resolution instead will provide no benefit at all.</P><P>Chris Birkinshaw created a modified version of the measure script which
adds Jack support. The script is named &#X201C;measurejack&#X201D; and you can find
it under the &#X201C;source/contrib/MeasureJack&#X201D; directory of the standard
distribution. For informations about Jack take a look at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://jackit.sourceforge.net/"><TT>http://jackit.sourceforge.net/</TT></A>
</BLOCKQUOTE><P>
Finally Ed Wildgoose created a simple program with about the same
functionality of the measure script. It works also under Windows and
being written in C, instead of being a simple shell script, it is less
dependent on other tools and usually provides a more reliable
functionality. You can download it from:</P><BLOCKQUOTE CLASS="quote"><DIV CLASS="flushleft">
<A HREF="http://www.duffroomcorrection.com/wiki/Simple_Automated_IR_Measuring_Tool"><TT>http://www.duffroomcorrection.com/wiki/Simple_Automated_IR_Measuring_Tool</TT></A>
</DIV></BLOCKQUOTE><!--TOC subsubsection Beware cheap, resampling, soundcards-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc37">4.4.4</A>&#XA0;&#XA0;Beware cheap, resampling, soundcards</H4><!--SEC END --><P>Most cheap game oriented soundcards often include a sample rate
converter in their design, so that input streams running at different
sample rates can be played together by resampling them at the maximum
sample rate supported by the soundcard DAC. Usually this is 48 kHz as
defined by the AC97 standard. These sample rate converters often are of
abysmal quality, causing all sort of aliasing artifacts.</P><P>Most deconvolution based impulse response measurement methods, including
the log sweep method, are quite robust and noise insensitive, but cause
all sorts of artifacts when non harmonic but signal related
distortion is introduced, even at quite low levels. The aliasing
artifacts introduced by low quality sample rate converters are exactly
of this kind and are one of the most common cause of poor quality
impulse response measurements and consequently of correction artifacts.</P><!--TOC subsubsection How to work around your cheap, resampling, soundcard-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc38">4.4.5</A>&#XA0;&#XA0;How to work around your cheap, resampling, soundcard</H4><!--SEC END --><P>Despite this, most of the times good measurements are possible even out
of cheap soundcards if the maximum sample rate supported by the DAC is
used, usually 48 kHz, so that the soundcard internal sample rate
converter isn&#X2019;t used at all. You can change the impulse response sample
rate after the measurement using high quality software sample rate
conversion algorithms (see section <A HREF="#SampleRateConversion">4.5</A>), thus
preserving the impulse response quality.</P><P>To check the quality of the impulse response measurement perform a
loopback measurement, without using a reference channel else any
measurement problem will be washed out by the reference channel
compensation. The impulse response you get must be a single clean spike
much similar to that of a CD Player (see for example the upper graph of
picture <A HREF="#BaselineImpulseResponseFullRange">88</A>, labeled &#X201C;Dirac
delta&#X201D;). A bit of ringing before and/or after the main spike is normal,
but anything else is just an artifact. Only when you are sure that the
measurement chain is working as expected open the loopback and do the
real measurement, eventually adding also a reference channel to
compensate for any remaining soundcard anomaly.</P><!--TOC subsection Sample rate conversion-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc39">4.5</A>&#XA0;&#XA0;Sample rate conversion</H3><!--SEC END --><P>
<A NAME="SampleRateConversion"></A></P><P>If you have the impulse response sampled at a different rate than the
one needed for the final filter, you need to convert the sample rate
before creating or applying the filters. For example you might have a 48
kHz impulse response but you may need to filter standard CD output at
44.1 kHz. In this situation you can either convert the impulse response
to 44.1 kHz before feeding it to DRC or you can convert the resulting
filters to 44.1 kHz after DRC has created them. I generally prefer the
first procedure, which leads to exact filter lengths in the DRC final
windowing stage, but in both cases you need a good quality sample rate
converter, which uses, for example, band limited interpolation. A reasonable
choice, free both under Linux and Win32, is SoX, which may be downloaded
at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://sox.sourceforge.net/"><TT>http://sox.sourceforge.net/</TT></A>
</BLOCKQUOTE><P>
Recent versions of SoX include some top quality sample rate conversion routines.
SoX also provides a lot of other features for sound files manipulation.
For a reference on band limited interpolation take a look at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://ccrma-www.stanford.edu/~jos/resample/"><TT>http://ccrma-www.stanford.edu/~jos/resample/</TT></A>
</BLOCKQUOTE><P>
Another free good sample rate converter comes from the shibatch audio
tools suite. This sample rate converter provides a quality which is
adequate for the task of converting the impulse response file before
feeding it to DRC. You can find the shibatch audio tools at it at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://shibatch.sourceforge.net/"><TT>http://shibatch.sourceforge.net/</TT></A>
</BLOCKQUOTE><!--TOC subsection Correction tuning-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc40">4.6</A>&#XA0;&#XA0;Correction tuning</H3><!--SEC END --><P>
<A NAME="CorrectionTuning"></A></P><P>Proper tuning of the correction filter generation procedure easily
provides a substantial improvement over the standard sample
configuration files provided along with DRC (see section
<A HREF="#SampleConfigurationFiles">5.2</A>). To properly tune the filters to closely
match your room behaviour there are many different issues that should be
taken into account.</P><!--TOC subsubsection Preventing pre-echo artifacts-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc41">4.6.1</A>&#XA0;&#XA0;Preventing pre-echo artifacts</H4><!--SEC END --><P>
<A NAME="AvoidPreEchoArtifacts"></A></P><P>One of the main problems in digital room correction are pre-echo
artifacts that arise when compensation accuracy is pushed above a
certain threshold. This pre-echo artifacts usually occur on narrow bands
and are easily audible as a sort of ringing or garble before transients
or sharp attacks. In order to avoid them there are basicly two options:</P><UL CLASS="itemize"><LI CLASS="li-itemize">Reduce the correction on critical frequency regions where pre-echo
artifacts may arise.</LI><LI CLASS="li-itemize">Use a minimum phase approach to avoid pre-echoes. This way you get
increased ringing after the main spike instead of pre-echo, but this is
usually masked both by our ear temporal masking and by the reverberant
nature of common listening rooms, so it is much less audible, if audible
at all.</LI></UL><P>
DRC uses both options in different steps of the correction procedure. So
in order to avoid pre-echo artifacts you basically have to:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Reduce the amount of correction applied to the excess phase
component by reducing the size of the frequency dependent window
applied. With the standard configuration files this is usually
everything that need to be done, because all the other procedures are
already configured to avoid pre-echo problems.</LI><LI CLASS="li-itemize">Use a long enough FFT where circular convolution is involved
(basicly homomorphic deconvolution and pre-echo truncation inversion),
because circular artifacts may easily become pre-echo.</LI><LI CLASS="li-itemize">Use the single side sliding lowpass prefiltering procedure; this
is just because of small numerical errors in band windowing that causes
small amounts of pre-echo on band edges.</LI><LI CLASS="li-itemize">Use the minimum phase versions for some of the accompanying
procedures (peak and dip limiting for example)</LI><LI CLASS="li-itemize">Use the pre-echo truncation fast deconvolution for the inversion
procedure, with appropriate pre-echo truncation parameters. By the way,
if the excess phase component windowing parameters are already set
appropriately, this should not be needed.</LI></UL><P>
The sample configuration files supplied are a good example of all these
options combined together. In normal situations you can use them as they
are changing only EPLowerWindow, EPWindowExponent, MPLowerWindow and
MPWindowExponent to fit your needs.</P><!--TOC subsubsection Preventing clipping-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc42">4.6.2</A>&#XA0;&#XA0;Preventing clipping</H4><!--SEC END --><P>
<A NAME="PreventingClipping"></A></P><P>One of the problems of real time correction is the prevention of DAC
clipping caused by the filter intrinsic amplification. First of all the
normalization factor to be used (see sections <A HREF="#PSNormFactor">6.12.9</A> and
<A HREF="#MCNormFactor">6.2.10</A>) depends on the convolver used. Some convolvers want
the filter normalized to the 16 bit range, i.e. 32768, most others want
a standard normalization, i.e. normalization to &#XB1; 1.0. For example
BruteFIR needs a filter normalized to 1.0 to get 0 dB amplification
between input and output.</P><P>All the normalization steps used within DRC, included those needed to
output the final filter (see sections <A HREF="#PSNormType">6.12.10</A> and
<A HREF="#MCNormType">6.2.11</A>), accept four types of normalization:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
	S, i.e. sum normalization, also called <I>L</I><SUB>1</SUB> norm
	</LI><LI CLASS="li-itemize">E, i.e. euclidean normalization, also called <I>L</I><SUB>2</SUB> norm
	</LI><LI CLASS="li-itemize">M, i.e. Max normalization, also called <I>L</I><SUB>&#X221E;</SUB> norm
	</LI><LI CLASS="li-itemize">P, i.e. Peak normalization, i.e. normalization to the highest amplitude response peak
</LI></UL><P>
For a detailed description of the four types of normalization see
section <A HREF="#BCNormType">6.1.11</A>.</P><P>The S normalization guarantees against overflows in the output stream,
i.e. it guarantees that if any input sample is never greater than X than
any output sample is never greater than X multiplied by the
normalization factor. This means also that if the normalization factor
is 1 and the input sample is never greater than 32767 (i.e. the input is
a 16 bit stream) the output is never greater than 32767, i.e. a 16 bit
DAC on output will never clip or overflow.</P><P>Anyway, using common musical signals, and depending on the filter
frequency response, the use of the S normalization might lead to filters
with a global gain substantially lower than 1 (0 dB), i.e. filters with
a typical output level which is lower, most of the times much lower,
than the input level. With such low levels part of the resolution of the
DAC gets lost. With normal musical signals it is usually safe to use a
filter with an S normalization factor greater than 1, because,
considering the typical frequency response of a room, and the
corresponding reversed frequency response of the filter, overflows would
occur in frequency ranges where typically there is not enough musical
signal to cause it.</P><P>A good extimation of an adequate normalization factor might be provided
by the P normalization, which rescales the filter so that the highest
peak in the magnitude response corresponds to a 0 dB gain. Contrary to
intuition this doesn&#X2019;t completely ensure that there would never be
clipping on output, but for most common musical signals it usually
provide a safe extimation without introducing excessive attenuation.</P><P>If you use BruteFIR one possible approach is to use 1 for the
PSNormFactor and S for PSNormType and then use the rescaling and
monitoring features of BruteFIR to boost the gain up to few dB below
overflow with typical musical signal. You might try using a 0 dB white
noise source as a sort of worst case situation.</P><P>Be careful setting the basic filter gain. I found that many recent
musical recordings, especially compressed and rescaled pop music
productions, cause output levels that are just 1 or 2 dB below the white
noise worst case scenario. The degradation in the sound quality caused
by DAC clipping is typically much more audible than the degradation you
get loosing a single bit or less of your DAC resolution, especially if
you use 16 bit DACs along with dithering or 24 bits DACs.</P><P>If you&#X2019;re unable to perform a test using 0 dB white noise as the input
signal and for some reason you don&#X2019;t want to rely on the estimation
performed by the P normalization, a simple rule of thumb is to use the E
normalization with a normalization factor which is a couple of dB lower
than the maximum gain allowed during peak limiting. With the standard
configuration files, where the maximum allowed gain is never greater
than about 6 dB, this means using a normalization factor around 0.3 &#X2212;
0.4 with convolvers which use 1.0 as the 0 dB reference level like
BruteFIR, or using something like 10000 - 13000 with convolvers which
use 32768 as the 0 dB reference level.</P><P>The default configuration files all use the E normalization with a
normalization factor set to 1, leaving the task of scaling the filter gain
to avoid clipping to the convolver. With the default configuration
files you should set the convolver gain to something below &#X2212;6 <I>dB</I>, which
is the default maximum gain allowed by the peak limiting procedure.</P><!--TOC subsubsection Some notes about loudspeaker placement-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc43">4.6.3</A>&#XA0;&#XA0;Some notes about loudspeaker placement</H4><!--SEC END --><P>As most audio practitioneers already know, in a basic stereo loudspeaker
configuration it is important that the distance between the loudspeakers
and the listening position is exactly the same for both loudspeakers,
and also not too different from the distance between the two
loudspeakers themselves (the classical equilateral triangle placement).
If this rule isn&#X2019;t satisfied usually the stereo image become distorted
and confused. With digital room correction enabled this rule becomes of
paramount importance.</P><P>DRC doesn&#X2019;t automatically compensate for delays caused by loudspeaker
misplacement and having the two channels with near to perfect direct
sound, both in phase and magnitude, makes any difference in the arrival
time immediately and clearly audible, with a nasty phasey sound and a
blurred stereo image. Less than 10 cm are enough to cause clearly
audible problems, so take your time to measure the distance from both
loudspeakers and the listening position before doing any measure, and
also do your measures by placing the microphone exactly at the listening
position.</P><P>Furthermore, with digital room correction it is worth to experiment with
unusual speaker placements. Reflections from nearby walls are more
difficult to correct when they are away from the main spike, so placing
the speakers near to the walls, or may be even in the corners, might
sometime give better results with DRC, provided that you place some
absorbing material near the speakers to remove early reflections in the
high frequency range, where DRC is able to correct only the direct
sound.</P><P>This type of placement is exactly the opposite of what is usually done
if you don&#X2019;t use digital room correction, where it is usually better to
try to put loudspeakers away from the walls to avoid early reflections,
that cause major problems to the sound reproduction and almost always
boomy bass. Anyway, remember that there is no ready to use recipe to
find the best speaker placement, even with DRC in use, so a bit of
experimenting is always needed.</P><!--TOC subsubsection Some notes about channel balance-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc44">4.6.4</A>&#XA0;&#XA0;Some notes about channel balance</H4><!--SEC END --><P>DRC doesn&#X2019;t compensate for channel level imbalance, so this should be
done manually after correction by changing a little the filters level until
a perfect balance is achieved. This is of course better achieved using
an SPL meter with pink noise and proper weighting. Anyway after
correction the two channels start having a frequency response that is
pretty much the same, so achieving perfect balance becomes pretty easy
even by ear. Just use a mono male, or, better, female voice, and adjust
the filters level until the voice comes exactly from the center of both
loudspeakers.</P><P>To achieve a good balance you might also use the level hints provided by
DRC at the end of the correction procedure, provided that the measured
impulse responses have levels that are directly related to the original
levels of the channels, i.e. these levels haven&#X2019;t been changed by the
measuring procedure itself.</P><!--TOC subsubsection Interchannel time alignment-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc45">4.6.5</A>&#XA0;&#XA0;Interchannel time alignment</H4><!--SEC END --><P>
<A NAME="InterchannelTimeAlignment"></A></P><P>First of all the current DRC release is able to compensate for
interchannel misalignment of only few samples, no more than  &#XB1; 8 
with the default configuration files. Furthermore accurate time aligned
measurements must be supplied, using either the glsweep and lsconv tools
with a reference channel or some other tool providing the same degree of
accuracy.</P><P>To get this limited time alignment you have to execute the following
steps:</P><OL CLASS="enumerate" type=1><LI CLASS="li-enumerate">Execute DRC on one channel as usual. At the beginning of the DRC
output on screen you will see a line like this one:<BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim">Impulse center found at sample 1367280.
</PRE></BLOCKQUOTE><P>
Take note of the impulse center value.</P></LI><LI CLASS="li-enumerate">After DRC has finished prepare the configuration files for the
other channels as usual but change the BCImpulseCenterMode parameter to
M and the BCImpulseCenter parameter from 0 to the value of the impulse
center noted before for the first channel. This way DRC will use the
value of the impulse center of the first channel as a reference for the
other channels and will compensate for any misalignment with respect to
the first channel. If channels are misaligned more than few samples this
will cause errors in the correction filters, usually causing a rising
frequency response, and so a bright sound.</LI></OL><!--TOC subsubsection How to tune the filters for your audio system-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc46">4.6.6</A>&#XA0;&#XA0;How to tune the filters for your audio system</H4><!--SEC END --><P>
<A NAME="HowToTuneFilters"></A></P><P>A proper tuning of the filters for your audio system and your listening
room easily provides a substantial improvement over the standard
configuration files. The best way to do this is to use the correction
simulation provided by DRC and to check the results using the Octave
scripts supplied with the documentation (see section
<A HREF="#SampleResults">A</A>), but if you have little experience with
measurements interpretation you can also try to tune the correction by
simple listening to the results, even though it isn&#X2019;t an easy task.</P><P>One of the most common mistakes performed in the tuning procedure is the
use of an excessive correction, which initially gives the impression of
a good result, but cause also the appearance of subtle correction
artifacts that becomes audible only with some specific musical tracks.
These artifacts often have a peculiar resonant behaviour so they become
audible only when they get excited by specific signals. To learn how to
recognize them try using the &#X201D;insane.drc&#X201D; sample configuration file,
which applies an overly excessive amount of correction, causing clearly
audible artifacts on all but the most damped rooms.</P><P>The best procedure to use is to start from the minimal amount of
correction, like that provided by the minimal.drc or erb.drc correction
settings. If your impulse response measurements are of good quality
these minimalistic correction settings should already provide a
substantial improvement over the uncorrected system, without any
perceivable artifact. If this doesn&#X2019;t happen it&#X2019;s better to first double
check the measurements performed before fiddling with the correction
parameters. Remember that measurements problems are the most common
cause of unsatisfactory correction results.</P><P>After this first test you can slowly switch to stronger correction
settings using the soft.drc, normal.drc, strong.drc and extreme.drc
settings, always listening to the results after each step, if possible
using quick switching between the filters. When correction artifacts
start to arise, which usually happens between the normal.drc settings
and the extreme.drc settings, it&#X2019;s time to stop and to start playing
with some specific correction parameters.</P><P>The first parameters to modify are those that define the windowing
correction curve applied to the signal, i.e MPWindowExponent,
EPWindowExponent, RTWindowExponent, slowly
reducing them to 0.95, 0.9, 0.85 and so on, down to about 0.7, thus
reducing the correction in the critical mid and mid-bass range. These
are really sensitive parameters, so changing them by as little as 0.01
easily cause an audible difference, especially when you are close to the
boundary where correction artifacts start to appear. When the artifacts
disappear you can start increasing the windows applied to the bass
range, slowly increasing, by about a 5% at a time, the MPLowerWindow,
EPLowerWindow, RTLowerWindow parameters, until
artifacts start to appear again. After that you can decrease again the
window exponent parameters until artifacts disappear again, and so on.</P><P>This procedure may be repeated until there&#X2019;s no further improvement or
the parameters reach an excessive value, i.e below about 0.6 for the
window exponents, above 1 second for the minimum phase and ringing
truncation windowing parameters (MPLowerWindow, RTLowerWindow) and above
100 ms for the excess phase windowing parameter (EPLowerWindow).
Remember also to set the pre-echo truncation parameters (ISPELowerWindow,
ISPEUpperWindow) according to the excess phase windowing parameters (see
sections <A HREF="#ISPELowerWindow">6.8.4</A> and <A HREF="#ISPEUpperWindow">6.8.5</A>).</P><P>Of course the tuning procedure has to be carefully adapted to your
specific room, so, after a good tuning has been reached following the
basic procedure, you can further try playing a little with the available
parameters, applying even different values to each of them, proceeding
one at a time to avoid confusion. By the way, be careful, because after
the initial tuning the differences between the filters will start to be
quite subtle, most of the times will be barely audible, and quick
switching between the filters, possibly even under blind conditions,
will become almost mandatory to really understand what&#X2019;s happening and
which filter is better or at least audibly different.</P><!--TOC section Program compilation and execution-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc47">5</A>&#XA0;&#XA0;Program compilation and execution</H2><!--SEC END --><P>DRC can be compiled either under Win32 or Linux, but because of its
simplicity it will probably work under most operating systems with a
decent C++ compiler with support for the standard template library
(STL). The Win32 executable (drc.exe) is provided precompiled with the
standard DRC distribution under the sample directory, where there are
also the executables for the impulse response measuring tools
(glsweep.exe and lsconv.exe).</P><P>A Makefile is provided for Linux and other Unixes, but it has been
tested only under Fedora Core 11. To build the program under Linux
usually what you have to do is just type &#X201C;make&#X201D; in the source
directory of DRC, where the makefile resides. A Code::Blocks workspace
is also available for use both under Win32 and Linux. Code::Blocks can
be downloaded at:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.codeblocks.org/"><TT>http://www.codeblocks.org/</TT></A>
</BLOCKQUOTE><P>
The file drc.h contains a configurable define (UseDouble) which can be
set to use double or float as the data type used for all internal
computations. Despite some microscopic differences in the final output,
I have never found any real advantage using doubles as the internal
basic type.</P><P>During the testing for the 3.1.0 release I have performed some tests to
check the signal to noise ratio of the output filters. Despite the
amount of processing performed and the fact that little effort has been
placed into keeping the maximum accuracy throughout the processing, even
using single precision arithmetic the signal to noise ratio of the final
filter resulted to be greater than 140 dB in the worst case. This is
more than 20 dB better than the signal to noise ratio provided by the
best DACs available in the world.</P><P>Considering these results the supplied Win32 executable is compiled for
single precision. If you want to switch to the double precision you have
to recompile it yourself. Of course using the double data type makes DRC
a bit slower and, most important, much more memory intensive.</P><P>Starting from version 2.4.0 DRC is able to use the Takuya Ooura and GNU
Scientific Library FFT routines, which are included in the distributed
package. The inclusion of these routines is controlled by the UseGSLFft
and UseOouraFft defines in drc.h. These routines are about 10 times
faster than the standard routines used by DRC, but to use them with the
STL complex data type a clumsy hack has been used, and it is not
guaranteed that this hack will work with all the STL implementations
available. If it causes any problem simply comment out the UseGSLFft and
UseOouraFft defines in drc.h and recompile the program. This will force
DRC to use the older, slower but STL compliant FFT routines.</P><P>The accuracy of the different FFT routines is pretty much the same. The
Ooura routines work only with powers of two lengths, so they are used only
with power of two lengths computations. Ooura FFT routines are somewhat
faster than the GSL routines but are also a little bit less accurate.
The default configuration uses only the GSL FFT routines, providing the
best compromise between speed and accuracy. The Ooura FFT routines
become useful when DRC is compiled for double precision arithmetic.</P><P>Most text files supplied with the standard distribution use Unix line
termination (LF instead of CR/LF). Be aware of this when opening files
under Win32 systems. WordPad is able to open LF terminated text files,
NotePad isn&#X2019;t.</P><P>Finally an important note, especially for Win32 users. DRC is a console
program, it has no graphical interface. All program execution parameters
must reside in a plain ASCII text file which is supplied as an argument
on the program command line. In order to execute the program you have to
open a command prompt (or DOS Prompt or whatever is named a console in
your version of Windows) and type something like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim">drc test.drc
</PRE></BLOCKQUOTE><P>
followed by a carriage return (enter or return key). Test.drc should be
the text file already prepared with all the parameters needed to run
DRC.</P><P>Under Linux of course you have to use a console program (the Linux
console, a terminal emulator like XTerm or something like this if you are
using XWindows). The DRC executable must be in the system path or in the
directory where you execute.</P><!--TOC subsection Command line parameters replacing-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc48">5.1</A>&#XA0;&#XA0;Command line parameters replacing</H3><!--SEC END --><P>Starting from version 2.6.2 all the parameters available in the
configuration file may be replaced by an equivalent parameter on the
command line. For example if you want just to change the input and
output filter files of the normal.drc sample configuration file you
may use a command like this:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim">drc --BCInFile=myfile.pcm --PSOutFile=myfilter.pcm normal.drc
</PRE></BLOCKQUOTE><P>
The parameter parsing procedure supports also quoting of filenames with
spaces and setting of strings to empty values, which is the same as
commenting a parameter in the configuration file. For example to use
some filename with spaces, to disable the output of the test convolution
file, to change the maximum allowed gain, all in a custom configuration
file with spaces in its name, you could use a command line like this:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim">drc --BCInFile="my file.pcm" --PSOutFile="my filter.pcm"
  --TCOutFile="" --PLMaxGain=3.5 "my custom config.drc"
</PRE></BLOCKQUOTE><P>
Along with all the default configuration parameters there is also a
special &#X201C;&#X2013;help&#X201D; parameter that show the full list of all the
available parameters with the associated parameter type. The list of the
parameters is really long, so some pager is needed to see them all.</P><!--TOC subsection Sample configuration files-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc49">5.2</A>&#XA0;&#XA0;Sample configuration files</H3><!--SEC END --><P>
<A NAME="SampleConfigurationFiles"></A></P><P>DRC has started as an experimental program and because of this it has a
lot of tunable parameters, actually more than 150. Only few of them are
really important for the final filter correction quality. Most of them
are used just to take a look at intermediate results and check that
everything is working as expected. DRC flexibility might of course be
used also to deal with complex or unusual situations or to experiment
with weird configurations.</P><P>Along with the DRC distribution six main sample configuration files are
provided: minimal-XX.X.drc, soft-XX.X.drc, normal-XX.X.drc,
strong-XX.X.drc, extreme-XX.X.drc, insane-XX.X.drc. The &#X201D;XX.X&#X2019; in the
file name stands for the sample rate in kHz which the file is configured
for. For example &#X201D;normal-44.1.drc&#X201D; is the normal configuration file
for the 44.1 kHz sample rate. Considering that the only difference
between the files is the base sample rate they are configured for, in
the rest of this document all files are named omitting the sample rate
part.</P><P>The sample configuration files provide most parameters set to reasonable
defaults, with stronger correction, but also worse listening position
sensitivity, going from the minimal.drc settings to the extreme.drc
settings. In the same directory of the configuration file there is also
a sample impulse response (rs.pcm, this is the impulse response of the
right channel of my previous HiFi system, in 32 bit IEEE raw format) usable
with the sample configuration files to see just what happens when DRC is
run.</P><P>The insane correction settings are not meant for normal use but are used
just to provide an example of excessive correction that is going for
sure to cause audible correction artifacts. Using these settings file you
can easily check how correction artifacts actually sound like, thus
learning to identify them within normal filters while you are tuning
them for your audio system (see section <A HREF="#HowToTuneFilters">4.6.6</A>).</P><P>Another interesting sample configuration is the one provided by
the &#X201C;erb.drc&#X201D; file. This file provides an accurate approximation of
the ERB psychoacoustic scale (see figure <A HREF="#BandwidthComparison">8</A>). It
is important to notice that basicly the correction isn&#X2019;t much stronger
than the &#X201C;minimal.drc&#X201D; sample configuration, but being approximately
tuned to our ear psychoacoustic resolution it is probably going to
provide a good perceived correction accuracy with minimal listening
position sensitivity, and so it is well suited for multiple listeners
situations, like home theater applications.</P><P>Starting form version 2.7.0 all sample configuration files are available
for 44.1 kHz, 48 kHz, 88.2 kHz, 96 kHz sample rates. By the way you
should be careful with sample rates above 44.1 kHz because most of this
sample files have been simply derived from the 44.1 kHz version without
testing them in real life situations. The sample configuration files for
the higher sample rates aren&#X2019;t in the sample directory. To avoid placing
a lot of similar files in the same directory the files for the higher
sample rates are placed in the &#X201D;src/config&#X201D; directory.</P><P>Remember also that all the sample correction files output the correction
filter (rps.pcm) in 32 bit floating point format normalized to 1.0,
which is the format suited for use with BruteFIR. Most sound editors
expect 16 bits integer files normalized to 32768, so the file above
might look either empty or completely clipped when opened with a sound
editor without using the appropriate options.</P><!--TOC subsubsection Target magnitude response-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc50">5.2.1</A>&#XA0;&#XA0;Target magnitude response</H4><!--SEC END --><P>
<A NAME="TargetMagnitudeResponse"></A></P><P>Starting from version 3.0.0 the basic target magnitude response is
automatically generated by DRC using a specific procedure based on some
documented psychoacoustic assumptions. See section
<A HREF="#PsychoacousticTargetComputation">4.3</A> for the details. Because of this
there should be no need to define a specific target curve and a flat
target, with just some limiting for subsonic and ultrasonic frequencies,
should be used instead. This is accomplished by using the pa-XX.X.txt
target, which is now the default for all standard configuration files
and is just a variation of the previous flat target adjusted to better
work with the &#X201C;B Spline&#X201D; target transfer function interpolation
procedure. The old target responses are retained for those situations
where the old approach may be preferable, and may be found under the
&#X201D;source/target&#X201D; directory. Of course the postfiltering stage might be
used to adjust the magnitude response to taste, but for a neutral
reproduction the target magnitude response should be left to the flat
one.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc010.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 10: <A NAME="DefaultTargetFunctions"></A> Comparison of the main target
functions provided along with DRC.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><P>The most important postfiltering target magnitude response files
supplied in the standard distribution (see section <A HREF="#PSPointsFile">6.12.7</A>
&#X201C;PSPointsFile&#X201D; for details) are subultra-XX.X.txt, bk-XX.X.txt,
bk-2-XX.X.txt, bk-3-XX.X.txt (see figure <A HREF="#DefaultTargetFunctions">10</A>).
Here again &#X201D;XX.X&#X201D; stands for the sample rate used and is omitted in
the rest of this document. The target response files for the higher
sample rates are available in the &#X201D;src/target&#X201D; directory.</P><P>The first target response file provides just simple removal of
overcompensation on the extremes of the frequency range and has a linear
target frequency response, so it hasn&#X2019;t been plotted in figure
<A HREF="#DefaultTargetFunctions">10</A>. The bk.txt file follows the Bruel &amp; Kjaer
(i.e. M&#X153;ller) recommendations for listening room frequency
response, i.e. linear from 20 Hz to 400 Hz, followed by a slow decrease
of 1 dB per octave up to 20 kHz. The bk-2.txt file is similar to bk.txt
but it is linear up to 200 Hz and then provides a slow tilt of 0.5 dB
per octave up to 20 kHz. The bk-3.txt file is somewhat between bk-2.txt
and bk.txt, with a 0.5 dB per octave tilt above 100 Hz. The versions
with the &#X201C;sub&#X201D; suffix are the same target functions with the addition
of a steep subsonic filter. The versions with the &#X201C;spline&#X201D; suffix are
again the same target transfer functions but with a set of control
points suitable for the &#X201C;B Spline&#X201D; target transfer function
interpolation. Figure <A HREF="#DefaultTargetFunctions">10</A> also show an example
of PCHIP interpolation of the "bk-3-sub" target function. In the sample
directory there are also some other simple postfiltering target files.</P><P>Like the sample configuration files starting from version 2.7.0 the
sample target responses are available for 44.1 kHz, 48 kHz, 88.2 kHz and
96 kHz sample rates and they must be used with the corresponding set of
configuration files. By the way the target response files for higher
sample rates are simply extended versions of the 44.1 kHz target
responses created by simply moving the last frequency point up to the
Nyquist frequency. This means that for most configuration files there is
either a gentle roll-off at higher frequency or a supersonic brickwall
filter applied above 20 kHz. If you want to properly correct content
above 20 kHz, provided that you have a microphone capable of recording
ultrasonic frequencies, you have to adapt the supplied files to your
needs.</P><!--TOC section DRC Configuration file reference-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc51">6</A>&#XA0;&#XA0;DRC Configuration file reference</H2><!--SEC END --><P>The DRC configuration file is a simple ASCII file with parameters in the
form:</P><PRE CLASS="verbatim">ParamName = value
</PRE><P>Everything after a &#X2019;<TT>#</TT>&#X2019; and blank lines are considered comments and
are ignored. Each parameter has a two character prefix which defines the
step the parameter refers to. These prefixes are:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
BC = Base Configuration
</LI><LI CLASS="li-itemize">MC = Microphone Compensation stage
</LI><LI CLASS="li-itemize">HD = Homomorphic Deconvolution
</LI><LI CLASS="li-itemize">MP = Minimum phase Prefiltering stage
</LI><LI CLASS="li-itemize">DL = Dip Limiting stage
</LI><LI CLASS="li-itemize">EP = Excess phase Prefiltering stage
</LI><LI CLASS="li-itemize">PC = Prefiltering Completion stage
</LI><LI CLASS="li-itemize">IS = Inversion Stage
</LI><LI CLASS="li-itemize">PT = Psychoacoustic Target
</LI><LI CLASS="li-itemize">PL = Peak Limiting
</LI><LI CLASS="li-itemize">RT = Ringing Truncation stage
</LI><LI CLASS="li-itemize">PS = Postfiltering Stage
</LI><LI CLASS="li-itemize">MS = Minimum phase filter generation Stage
</LI><LI CLASS="li-itemize">TC = Test Convolution stage
</LI></UL><P>
DRC does some checks to ensure that each parameter provided has a value
that makes sense, but it isn&#X2019;t bulletproof at all with respect to this.
Providing invalid or incorrect parameters values may cause it to fail, or even
to crash.</P><P>Parameters which are important for the quality of the generated filters
are marked with (*). When it makes sense a reasonable value or range of
values is also provided, but the range supplied is always referred to the
44.1 kHz sample rate.</P><P>Many parameters have often a value which is a power of two. This is
mainly for performance reasons. Many steps require one or more FFT
computations, which are usually much faster with arrays whose length is
a power of two. The default values supplied are defined for a 44.1 kHz
sample rate. If a different sample rate is used the supplied values
should be scaled accordingly.</P><!--TOC subsection BC - Base Configuration-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc52">6.1</A>&#XA0;&#XA0;BC - Base Configuration</H3><!--SEC END --><!--TOC subsubsection BCBaseDir-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc53">6.1.1</A>&#XA0;&#XA0;BCBaseDir</H4><!--SEC END --><P>
<A NAME="BCBaseDir"></A></P><P>This parameter define the base directory that is prepended to all file
parameters, like for example BCInFile, HDMPOutFile or PSPointsFile. This
parameter allow the implicit definition of a library directory where all
DRC support file might be placed.</P><P>File parameters supplied on the command line are not affected by this
parameter unless the BCBaseDir parameter is also supplied on the command
line. File parameters supplied in the configuration file are instead
always affected by the BCBaseDir parameter, no matter if it has been
supplied in the configuration file or on the command line.</P><!--TOC subsubsection BCInFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc54">6.1.2</A>&#XA0;&#XA0;BCInFile</H4><!--SEC END --><P>
<A NAME="BCInFile"></A></P><P>Just the name of the input file with the input room impulse response.</P><!--TOC subsubsection BCInFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc55">6.1.3</A>&#XA0;&#XA0;BCInFileType</H4><!--SEC END --><P>
<A NAME="BCInFileType"></A></P><P>The type of the input file. D = Double, F = Float, I = Integer.</P><!--TOC subsubsection BCSampleRate-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc56">6.1.4</A>&#XA0;&#XA0;BCSampleRate</H4><!--SEC END --><P>
<A NAME="BCSampleRate"></A></P><P>The sample rate of the input file. Usually 44100 or 48000.</P><!--TOC subsubsection BCImpulseCenterMode-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc57">6.1.5</A>&#XA0;&#XA0;BCImpulseCenterMode</H4><!--SEC END --><P>
<A NAME="BCImpulseCenterMode"></A></P><P>The impulse response impulse center may be set manually using the
BCImpulseCenter parameter or you may ask DRC to try to find it
automatically. If BCImpulseCenterMode is set to A DRC will look for the
impulse center within the input file. If BCImpulseCenterMode is set to M
DRC uses the impulse center supplied with the BCImpulseCenter parameter.</P><P>Be careful when using automatic impulse center recognition. Strong
reflections or weird situations may easily fool the simple procedure
used by DRC, which simply looks for the sample with the maximum absolute
amplitude.</P><!--TOC subsubsection BCImpulseCenter (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc58">6.1.6</A>&#XA0;&#XA0;BCImpulseCenter (*)</H4><!--SEC END --><P>
<A NAME="BCImpulseCenter"></A></P><P>This is the position, in samples, of the time axis zero of the impulse
response read from BCInFile. Usually this is where the peak of the
impulse response is, but for complex situations it might not be easy to identify
where the zero is. Even few samples displacement in this parameter may
cause high frequency overcorrection, causing too bright sound. If
BCImpulseCenterMode is set to A this parameter is ignored.</P><!--TOC subsubsection BCInitWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc59">6.1.7</A>&#XA0;&#XA0;BCInitWindow</H4><!--SEC END --><P>
<A NAME="BCInitWindow"></A></P><P>Initial portion of the impulse response which is used to perform the
correction. It should be long enough to accomodate for any subsequent
windowing performed by DRC. The window is symmetrical with respect of
the impulse center. If needed, the signal is padded with zeroes. Usual
values are between 16384 and 131072, depending on the values of the
parameters for the subsequent steps. This initial window may be further
limited in subsequent steps, which sets the real window used.</P><!--TOC subsubsection BCPreWindowLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc60">6.1.8</A>&#XA0;&#XA0;BCPreWindowLen</H4><!--SEC END --><P>
<A NAME="BCPreWindowLen"></A></P><P>This is the length of the window used to remove any noise coming before the
impulse center. This is usually just few samples, with a typical value
of 1024 samples, corresponding to 23.2 ms at a 44.1 kHz sample rate. If this
value is 0 this step is skipped</P><!--TOC subsubsection BCPreWindowGap-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc61">6.1.9</A>&#XA0;&#XA0;BCPreWindowGap</H4><!--SEC END --><P>
<A NAME="BCPreWindowGap"></A></P><P>This is the central flat gap left in the previous windowing operation.
Usually it is set to 0.75 * <I>BCPreWindowLen</I>, i.e. 768 samples with the
standard BCPreWindowLen value.</P><!--TOC subsubsection BCNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc62">6.1.10</A>&#XA0;&#XA0;BCNormFactor</H4><!--SEC END --><P>
<A NAME="BCNormFactor"></A></P><P>Initial normalization of the input impulse response. 0 means no
normalization, which is the default.</P><!--TOC subsubsection BCNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc63">6.1.11</A>&#XA0;&#XA0;BCNormType</H4><!--SEC END --><P>
<A NAME="BCNormType"></A></P><P>Type of normalization applied. M means max normalization, i.e. the input
signal is rescaled so that the maximum value of the samples is equal to
the normalization factor. E means Euclidean normalization (L2 Norm),
i.e. the input signal is rescaled so that the RMS value of the signal is
equal to the normalization factor. S means sum normalization (L1 Norm),
i.e. the input signal is rescaled so that the sum of the absolute values
of the samples is equal to the normalization factor. P means peak
normalization i.e. the input signal is rescaled so that the highest peak
in the signal magnitude response is equal to the normalization factor.</P><!--TOC subsubsection BCDLType, BCDLMinGain, BCDLStartFreq, BCDLEndFreq, BCDLStart,
BCDLMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc64">6.1.12</A>&#XA0;&#XA0;BCDLType, BCDLMinGain, BCDLStartFreq, BCDLEndFreq, BCDLStart,
BCDLMultExponent</H4><!--SEC END --><P>
<A NAME="BCDipLimiting"></A></P><P>These parameters are used to set a mild dip limiting on the input impulse
response. For a detailed description of these parameters see the similar
procedure described in section <A HREF="#DLDipLimiting">6.5</A>. This stage is used
just to prevent overflow or underflow problems in subsequent stages so
under standard conditions there is no need at all to change these
parameters.</P><!--TOC subsection MC - Microphone Compensation-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc65">6.2</A>&#XA0;&#XA0;MC - Microphone Compensation</H3><!--SEC END --><P>
<A NAME="MicrophoneCompensation"></A></P><P>Within this stage the microphone transfer function is invertend and
applied to the input impulse response to compensate for any microphone
aberration. If you want a microphone compensated filter you have to
enable this stage.</P><P>The inversion is carried out by direct inversion of the values
supplied in the microphone compensation file. So it is assumed that
the microphone response is easily invertible. This is usually true
with any decent microphone.</P><!--TOC subsubsection MCFilterType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc66">6.2.1</A>&#XA0;&#XA0;MCFilterType</H4><!--SEC END --><P>
<A NAME="MCFilterType"></A></P><P>This is the type of filter used for the microphone compensation stage
stage. N means that the mic compensation stage is disabled, L means linear
phase filtering, M means minimum phase filtering.</P><!--TOC subsubsection MCInterpolationType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc67">6.2.2</A>&#XA0;&#XA0;MCInterpolationType</H4><!--SEC END --><P>
<A NAME="MCInterpolationType"></A></P><P>This parameter is the same as the PSInterpolationType parameter (see
section <A HREF="#PSInterpolationType">6.12.2</A>) but applied to the mic compensation
filter. The default is H.</P><!--TOC subsubsection MCMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc68">6.2.3</A>&#XA0;&#XA0;MCMultExponent</H4><!--SEC END --><P>
<A NAME="MCMultExponent"></A></P><P>The multiplier exponent used for the homomorphic deconvolution used to
compute the minimum phase compensation filter. Usually a value of 2 or 3
is used.</P><!--TOC subsubsection MCFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc69">6.2.4</A>&#XA0;&#XA0;MCFilterLen</H4><!--SEC END --><P>
<A NAME="MCFilterLen"></A></P><P>Length of the FIR filter used for microphone compensation. Usually
between 16384 and 65536.</P><!--TOC subsubsection MCNumPoints-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc70">6.2.5</A>&#XA0;&#XA0;MCNumPoints</H4><!--SEC END --><P>
<A NAME="MCNumPoints"></A></P><P>Number of points used for the definitions of the microphone frequency
response. If this parameter is 0 DRC automatically counts the number of
lines in the microphone frequency response file. See the following
parameters for details about the microphone frequency response
compensation.</P><!--TOC subsubsection MCPointsFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc71">6.2.6</A>&#XA0;&#XA0;MCPointsFile</H4><!--SEC END --><P>
<A NAME="MCPointsFile"></A></P><P>This is the name of the file which contains the microphone frequency
response to be compensated. The file format is identical to the one
defined for the target frequency response (see section
<A HREF="#PSPointsFile">6.12.7</A>). Again any phase specification get wiped out if
minimum phase filtering is used. This usually isn&#X2019;t a problem because
most microphones suited for measurement tasks are minimum phase systems,
so the minimum phase compensation filter already has exactly the phase
response needed to compensate for the microphone phase response.</P><P>In the sample directory there&#X2019;s a sample compensation file (wm-61a.txt)
which is a generic compensation file for the Panasonic WM-61A electrect
capsule. This file has been derived from average values available on the
Internet, so don&#X2019;t expect to get perfect linear frequency response using
it. There could be some difference among different capsules of the same
type. In the same directory there&#X2019;s also a compensation file for the
Behringer ECM8000 instrumentation microphone. This is the measured
frequency response of a single unit, i.e. it isn&#X2019;t even derived from an
average over many samples, so it may be even less reliable than the
WM-61A compensation file.</P><!--TOC subsubsection MCMagType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc72">6.2.7</A>&#XA0;&#XA0;MCMagType</H4><!--SEC END --><P>
<A NAME="MCMagType"></A></P><P>This parameter selects how the amplitude of the target frequency
response is defined. L means linear amplitude (0.5 means half the
level, i.e about &#X2212;6 dB), D means that the amplitude is expressed in
dB.</P><!--TOC subsubsection MCFilterFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc73">6.2.8</A>&#XA0;&#XA0;MCFilterFile</H4><!--SEC END --><P>
<A NAME="MCFilterFile"></A></P><P>This parameter set the file where the impulse response of the microphone
compensation filter will be saved. This might be useful to take a look
at the microphone compensation filter or to use it into some other
program. By default it is disabled, i.e. commented out.</P><!--TOC subsubsection MCOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc74">6.2.9</A>&#XA0;&#XA0;MCOutWindow</H4><!--SEC END --><P>
<A NAME="MCOutWindow"></A></P><P>Final window after microphone compensation. Default value set to 0, i.e.
no windowing applied.</P><!--TOC subsubsection MCNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc75">6.2.10</A>&#XA0;&#XA0;MCNormFactor</H4><!--SEC END --><P>
<A NAME="MCNormFactor"></A></P><P>Normalization factor for the microphone compensated impulse response.
Usually 0.0, i.e. disabled.</P><!--TOC subsubsection MCNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc76">6.2.11</A>&#XA0;&#XA0;MCNormType</H4><!--SEC END --><P>
<A NAME="MCNormType"></A></P><P>Normalization type for the microphone compensated impulse response.
Usually E.</P><!--TOC subsubsection MCOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc77">6.2.12</A>&#XA0;&#XA0;MCOutFile</H4><!--SEC END --><P>
<A NAME="MCOutFile"></A></P><P>Output file for the microphone compensated impulse response. Disabled,
i.e. commented out, by default. The file generated by enabling this
parameter might be used as input for the &#X201C;createdrcplots&#X201D; Octave
script to generate the uncorrected response graph using a microphone
compensated uncorrected response (see section <A HREF="#SampleResults">A</A> for
more details).</P><!--TOC subsubsection MCOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc78">6.2.13</A>&#XA0;&#XA0;MCOutFileType</H4><!--SEC END --><P>
<A NAME="MCOutFileType"></A></P><P>Output file type for the microphone compensated impulse response. D =
Double, F = Float, I = Integer.</P><!--TOC subsection HD - Homomorphic Deconvolution-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc79">6.3</A>&#XA0;&#XA0;HD - Homomorphic Deconvolution</H3><!--SEC END --><!--TOC subsubsection HDMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc80">6.3.1</A>&#XA0;&#XA0;HDMultExponent</H4><!--SEC END --><P>
<A NAME="HDMultExponent"></A></P><P>Exponent of the multiplier of the FFT size used to perform the
homomorphic deconvolution. The FFT size used is equal to the first power
of two greater than or equal to  <I>BCInitWindow</I> * (2 <SUP><I>HDMultExponent</I></SUP>). Higher exponents give more accurate deconvolution,
providing less circular convolution artifacts.</P><P>With older DRC versions achieving low circular artifacts was not so
important because they were masked by the higher pre-echo artifacts in
other steps. Starting with version 2.0.0 it is possible to achieve
really low pre echo artifacts so circular artifacts now are an issue,
because when truncated by the pre-echo truncation inversion procedure
they may cause errors on the phase correction. In this situation a value
of at least 3 is suggested.</P><!--TOC subsubsection HDMPNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc81">6.3.2</A>&#XA0;&#XA0;HDMPNormFactor</H4><!--SEC END --><P>
<A NAME="HDMPNormFactor"></A></P><P>Normalization factor for the minimum phase component. Usually 1.</P><!--TOC subsubsection HDMPNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc82">6.3.3</A>&#XA0;&#XA0;HDMPNormType</H4><!--SEC END --><P>
<A NAME="HDMPNormType"></A></P><P>Normalization type for the minimum phase component. Usually E.</P><!--TOC subsubsection HDMPOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc83">6.3.4</A>&#XA0;&#XA0;HDMPOutFile</H4><!--SEC END --><P>
<A NAME="HDMPOutFile"></A></P><P>Output file for the minimum phase component. Usually not used (commented
out).</P><!--TOC subsubsection HDMPOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc84">6.3.5</A>&#XA0;&#XA0;HDMPOutFileType</H4><!--SEC END --><P>
<A NAME="HDMPOutFileType"></A></P><P>Output file type for the minimum phase component. D = Double, F = Float,
I = Integer.</P><!--TOC subsubsection HDEPNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc85">6.3.6</A>&#XA0;&#XA0;HDEPNormFactor</H4><!--SEC END --><P>
<A NAME="HDEPNormFactor"></A></P><P>Normalization factor for the excess phase component. Usually 1.</P><!--TOC subsubsection HDEPNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc86">6.3.7</A>&#XA0;&#XA0;HDEPNormType</H4><!--SEC END --><P>
<A NAME="HDEPNormType"></A></P><P>Normalization type for the excess phase component. Usually E.</P><!--TOC subsubsection HDEPOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc87">6.3.8</A>&#XA0;&#XA0;HDEPOutFile</H4><!--SEC END --><P>
<A NAME="HDEPOutFile"></A></P><P>Output file for the excess phase component. Usually not used (commented
out).</P><!--TOC subsubsection HDEPOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc88">6.3.9</A>&#XA0;&#XA0;HDEPOutFileType</H4><!--SEC END --><P>
<A NAME="HDEPOutFileType"></A></P><P>Output file type for the excess phase component. D = Double, F = Float,
I = Integer.</P><!--TOC subsection MP - Minimum phase Prefiltering-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc89">6.4</A>&#XA0;&#XA0;MP - Minimum phase Prefiltering</H3><!--SEC END --><!--TOC subsubsection MPPrefilterType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc90">6.4.1</A>&#XA0;&#XA0;MPPrefilterType</H4><!--SEC END --><P>
<A NAME="MPPrefilterType"></A></P><P>This parameter can be either B for the usual band windowing prefiltering
stage or S for the sliding lowpass method. The first method splits the
input response into log spaced bands and window them depending on some
parameters but basically with a window length which decrease
exponentially with the center frequency of the band. The sliding lowpass
method instead filters the impulse response with a time varying lowpass
filter with a cutoff frequency which decreases exponentially with the
sample position with respect to the time axis zero. This last one is a
stepless procedure.</P><P>Using either a lowercase b or s for the MPPrefilterType parameters
enable the single side version of the prefiltering procedures. The
procedure is applied starting from the impulse center, leaving the first
half of the impulse response unchanged. This gives less pre-echo
artifacts, and should be used when the pre-echo truncation inversion
procedure is used. Please remember to set the prefiltering parameters to
values which are adequate for the procedure used.</P><!--TOC subsubsection MPPrefilterFctn-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc91">6.4.2</A>&#XA0;&#XA0;MPPrefilterFctn</H4><!--SEC END --><P>
<A NAME="MPPrefilterFctn"></A></P><P>This parameter sets the type of prefiltering function used, i.e. P for
the usual inverse proportional function, or B for the bilinear transform
based prefiltering function. For a comparison between the two functions
see figure <A HREF="#BPComparison">6</A>. The default is B.</P><!--TOC subsubsection MPWindowGap-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc92">6.4.3</A>&#XA0;&#XA0;MPWindowGap</H4><!--SEC END --><P>
<A NAME="MPWindowGap"></A></P><P>This parameter changes a little the window function (Blackman) used for
the band windowing prefiltering stage. It sets a small flat unitary gap,
whose length is expressed in samples, at the center of the window
function, so that even if the impulse center is slightly misaligned with
respect to the time axis zero there is no high frequency overcorrection.
For band windowing prefiltering procedure usually this overcorrection is
in the order of 0.1 &#X2212; 0.2 dB at 20 kHz for errors of 2 to 3 samples,
so it is not important at all in real world situations, but if you want
to fix even this small problem this parameter lets you do it.</P><P>MPWindowGap should never be more than 2 sample less than MPUpperWindow
and it is usually no more than few samples (5 to 10). If in any
situation it is bigger than the calculated window DRC automatically
reduces the gap to 2 less than the applied window. When MPWindowGap is 0
DRC behaves exactly as in the older versions. For the sliding lowpass
procedure this sets just the window gap used for the initial windowing
before the procedure starts.</P><!--TOC subsubsection MPLowerWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc93">6.4.4</A>&#XA0;&#XA0;MPLowerWindow (*)</H4><!--SEC END --><P>
<A NAME="MPLowerWindow"></A></P><P>Length of the window for the minimum phase component prefiltering at the
bottom end of the frequency range. Longer windows cause DRC to try to
correct a longer part of the impulse response but cause greater
sensibility to the listening position. Typical values are between 16384
and 65536. MPLowerWindow must not be greater than BCInitWindow.</P><!--TOC subsubsection MPUpperWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc94">6.4.5</A>&#XA0;&#XA0;MPUpperWindow (*)</H4><!--SEC END --><P>
<A NAME="MPUpperWindow"></A></P><P>Length of the window for the minimum phase component prefiltering at the
upper end of the frequency range. Longer windows cause DRC to try to
correct a longer part of the impulse response but cause greater
sensibility on the listening position. Typical values are between 22 and
128. MPUpperWindow must be not greater than MPLowerWindow, and usually
is much shorter than that.</P><!--TOC subsubsection MPStartFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc95">6.4.6</A>&#XA0;&#XA0;MPStartFreq</H4><!--SEC END --><P>
<A NAME="MPStartFreq"></A></P><P>Start frequency for the prefiltering stage. Usually 20 Hz or just
something less.</P><!--TOC subsubsection MPEndFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc96">6.4.7</A>&#XA0;&#XA0;MPEndFreq</H4><!--SEC END --><P>
<A NAME="MPEndFreq"></A></P><P>End frequency for the prefiltering stage. Usually set at 20
kHz, i.e. 20000. Of course you must be using a sample rate which
is greater than 40 kHz to set this above 20 kHz.</P><!--TOC subsubsection MPWindowExponent (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc97">6.4.8</A>&#XA0;&#XA0;MPWindowExponent (*)</H4><!--SEC END --><P>
<A NAME="MPWindowExponent"></A></P><P>This is the exponent used in the frequency dependent window length
computation for the band windowing procedure, or in the computation of
the time dependent cutoff frequency for the sliding lowpass procedure.</P><P>The window length for band windowing is computed with the following
expression:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><I>W</I>&#XA0;=&#XA0;</TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">1</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>A</I>&#XA0;*&#XA0;(<I>F</I>&#XA0;+&#XA0;<I>Q</I>)&#XA0;<SUP><I>WE</I></SUP></TD></TR>
</TABLE></TD></TR>
</TABLE><P>
Where W is the window length, F is the normalized frequency, WE is the
window exponent, A and Q are computed so that W is equal to
MPLowerWindow at MPStartFreq and is equal to MPUpperWindow at MPEndFreq.
If you set MPLowerWindow equal to the value used for MPInitWindow in DRC
1.2, set MPWindowExponent to the same value of version 1.2 and set
MPUpperWindow to the value you got at the upper limit of the frequency
range in version 1.2 you should get results much similar to the 1.2 DRC
release.</P><P>In a similar way the cutoff frequency for the sliding lowpass
prefiltering stage is computed with:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><I>F</I>&#XA0;=&#XA0;</TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">1</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>A</I>&#XA0;*&#XA0;(<I>W</I>&#XA0;+&#XA0;<I>Q</I>)&#XA0;<SUP><I>WE</I></SUP></TD></TR>
</TABLE></TD></TR>
</TABLE><P>
with identical parameters but reversed perspective, i.e. the cutoff
frequency is computed from the window length and not the other way
around. In both cases W and F are considered normalized between 0 and 1.</P><P>These parametric functions are used when the proportional function is
selected using the MPPrefilterFctn (see section <A HREF="#MPPrefilterFctn">6.4.2</A>)
parameter. The parametric functions derived from the bilinear
transformation are quite different and more complicated, so they aren&#X2019;t
explained here.</P><P>Changing the window exponent provides different prefiltering curves, see
section <A HREF="#FrequencyDependentWindowing">4.2</A> for a deeper explanation.
Increasing the window exponent gives higher correction in the midrange.
Typical values are between 0.7 and 1.2.</P><!--TOC subsubsection MPFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc98">6.4.9</A>&#XA0;&#XA0;MPFilterLen</H4><!--SEC END --><P>
<A NAME="MPFilterLen"></A></P><P>Filter length, in taps, used to perform band splitting or sliding
lowpass prefiltering of the input signal. Higher values give better
filter resolution but require a longer computation. Typical values for
band windowing are between 4096 and 65536. Sometimes may be useful to
use short filters (64 - 512 taps) to get a more &#X201C;fuzzy&#X201D; correction at
lower frequencies.</P><P>With the sliding lowpass procedure similar filters should be used.
Usually the filter length is in the 512 - 65536 range. Short filters (16
- 64 taps) gives a similar fuzzy correction at the bottom end, but with
a different behaviour than band windowing.</P><!--TOC subsubsection MPFSharpness (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc99">6.4.10</A>&#XA0;&#XA0;MPFSharpness (*)</H4><!--SEC END --><P>
<A NAME="MPFSharpness"></A></P><P>This parameter applies only to the sliding lowpass prefiltering
procedure and control the sharpness of the filtering performed in the
filtered region of the time-frequency plane. A value of 1.0 provides the
same behaviour of version 2.3.1 of DRC and provides the maximum
allowable filtering sharpness without affecting the direct sound, but
also creates a substantial amount of spectral spreading in the filter
transition region of the time-frequency plane. Values above 1.0 increase
the spectral spreading up to a point where it starts affecting also the
direct sound, with the introduction of some ripple in the direct sound
itself. Values below 1.0 reduce the spectral spreading in the filtered
region at the expense of a little reduction in the filter sharpness.
Typical values for this parameter are between 0.1 and 0.75, with a
default value of 0.25.</P><!--TOC subsubsection MPBandSplit-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc100">6.4.11</A>&#XA0;&#XA0;MPBandSplit</H4><!--SEC END --><P>
<A NAME="MPBandSplit"></A></P><P>Fractional octave splitting of band windowing. Band windowing is
performed in  1 / <I>MPBandSplit</I>  of octave bands. Usual values are
between 2 and 6. The higher this value the higher should be MPFilterLen.
Values greater than 6 usually give no improvements.</P><P>For the sliding lowpass prefiltering this just gives the rate at which
log messages are reported during the prefiltering procedure and has no
effect on the prefiltering procedure itself, which is always stepless.</P><!--TOC subsubsection MPHDRecover-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc101">6.4.12</A>&#XA0;&#XA0;MPHDRecover</H4><!--SEC END --><P>
<A NAME="MPHDRecover"></A></P><P>After prefiltering the minimum phase component may be no longer minimum
phase, with a bit of excess phase component added. Setting this
parameter to Y enable a second homomorphic deconvolution on the
prefiltered minimum phase component to make it minimum phase again. This
is important especially if the pre-echo truncation inversion procedure
is used. This procedure assumes that the minimum phase part really is
minimum phase, so skipping this step may cause it to fail in avoiding
pre-echo artifacts.</P><!--TOC subsubsection MPEPPreserve-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc102">6.4.13</A>&#XA0;&#XA0;MPEPPreserve</H4><!--SEC END --><P>
<A NAME="MPEPPreserve"></A></P><P>Setting this to Y causes the excess phase part of the filtered impulse
response to be preserved after the MPHDRecover step. This excess phase
part is then convolved with the excess phase part of the filtered
impulse response to preserve it and invert it. This provides a slight
improvement in the direct sound phase response. The default value is Y.</P><!--TOC subsubsection MPHDMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc103">6.4.14</A>&#XA0;&#XA0;MPHDMultExponent</H4><!--SEC END --><P>
<A NAME="MPHDMultExponent"></A></P><P>Exponent of the multiplier of the FFT size used to perform the
homomorphic deconvolution described above. The FFT size used is equal to
the first power of two greater than or equal to  <I>MPPFFinalWindow</I> * (2 <SUP><I>MPHDMultExponent</I></SUP>). Higher exponents give more accurate results, but
require a longer computation. Usually a value of 2 or 3 is used. If this
parameter is less than 0 no multiplier will be used. Be careful because
if the FFT size isn&#X2019;t a power of two the procedure can take a long time
to complete.</P><!--TOC subsubsection MPPFFinalWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc104">6.4.15</A>&#XA0;&#XA0;MPPFFinalWindow</H4><!--SEC END --><P>
<A NAME="MPPFFinalWindow"></A></P><P>Final window of the prefiltering stage. Usually the same as MPLowerWindow
or just something more. If set to 0 no windowing is applied.</P><!--TOC subsubsection MPPFNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc105">6.4.16</A>&#XA0;&#XA0;MPPFNormFactor</H4><!--SEC END --><P>
<A NAME="MPPFNormFactor"></A></P><P>Normalization factor for the minimum phase component after prefiltering.
Usually 0.</P><!--TOC subsubsection MPPFNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc106">6.4.17</A>&#XA0;&#XA0;MPPFNormType</H4><!--SEC END --><P>
<A NAME="MPPFNormType"></A></P><P>Normalization type for the minimum phase component after windowing.
Usually E.</P><!--TOC subsubsection MPPFOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc107">6.4.18</A>&#XA0;&#XA0;MPPFOutFile</H4><!--SEC END --><P>
<A NAME="MPPFOutFile"></A></P><P>Output file for the minimum phase component after band windowing.
Usually not used (commented out).</P><!--TOC subsubsection MPPFOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc108">6.4.19</A>&#XA0;&#XA0;MPPFOutFileType</H4><!--SEC END --><P>
<A NAME="MPPFOutFileType"></A></P><P>Output file type for the minimum phase component after windowing. D =
Double, F = Float, I = Integer.</P><!--TOC subsection DL - Dip Limiting-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc109">6.5</A>&#XA0;&#XA0;DL - Dip Limiting</H3><!--SEC END --><P>
<A NAME="DLDipLimiting"></A></P><!--TOC subsubsection DLType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc110">6.5.1</A>&#XA0;&#XA0;DLType</H4><!--SEC END --><P>
<A NAME="DLType"></A></P><P>To prevent numerical instabilities during the inversion stage, deep dips
in the frequency response must be limited or truncated. This parameter
sets the type of dip limiting performed. L means linear phase, i.e. it
applies a linear phase filter that removes dips below a given threshold,
M means minimum phase, i.e. it uses a minimum phase filter to achieve
the same result. Both procedures are also available with a logarithmic
frequency weighting of the magnitude response, so that, for example, the
20 Hz - 200 Hz range weigths the same as the 2000 Hz - 20000 Hz range.
Setting DLType to P activates the log weighted verions of the linear
phase dip limiting and setting DLType to W activates the log weighted
verions of the minimum phase dip limiting.</P><P>Starting with version 2.0.0 DRC performs this step only on the
prefiltered minimum phase part, just before performing the second
homomorphic deconvolution, if enabled. So if the MPHDRecover parameter is
set to Y and the MPEPPreserve parameter is set to N there is almost no
difference between the two procedures, because the subsequent
homomorphic deconvolution stage wipes out any phase difference giving
just a minimum phase signal. Any difference would be caused just by
numerical errors.</P><!--TOC subsubsection DLMinGain-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc111">6.5.2</A>&#XA0;&#XA0;DLMinGain</H4><!--SEC END --><P>
<A NAME="DLMinGain"></A></P><P>This is the minimum gain allowed in the frequency response of the
prefiltered signal. Values lower than this will be truncated. Typical
values are between 0.1 and 0.5. These are absolute values with
respect to the RMS value, i.e. 0.1 is about &#X2212;20 dB, 0.5 is about
&#X2212;6 dB.</P><!--TOC subsubsection DLStartFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc112">6.5.3</A>&#XA0;&#XA0;DLStartFreq</H4><!--SEC END --><P>
<A NAME="DLStartFreq"></A></P><P>Start frequency where the reference RMS level used for dip limiting is
computed.</P><!--TOC subsubsection DLEndFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc113">6.5.4</A>&#XA0;&#XA0;DLEndFreq</H4><!--SEC END --><P>
<A NAME="DLEndFreq"></A></P><P>End frequency where the reference RMS level used for dip limiting is
computed.</P><!--TOC subsubsection DLStart-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc114">6.5.5</A>&#XA0;&#XA0;DLStart</H4><!--SEC END --><P>
<A NAME="DLStart"></A></P><P>Setting this parameter to a value between 0.0 and 1.0 enables the
&#X201C;soft clipping&#X201D; dip limiting procedure. Everything below  <I>DLStart</I> *
<I>DLMinGain</I> , with respect to the RMS value, get rescaled so that it ends
up between  <I>DLStart</I> * <I>DLMinGain</I>  and DLMinGain. Values for this
parameter usually are between 0.5 and 0.95, with a typical value of
0.75. Setting this parameter to a value equal to or greater then 1.0
cause DRC to switch to hard clipping of the frequency response.</P><!--TOC subsubsection DLMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc115">6.5.6</A>&#XA0;&#XA0;DLMultExponent</H4><!--SEC END --><P>
<A NAME="DLMultExponent"></A></P><P>Exponent of the multiplier of the FFT size used to perform the dip
limiting stage. The FFT size used is equal to the first power of two
greater than or equal to  (<I>MPBWFinalWindow</I> + <I>EPBWFinalWindow</I> &#X2212; 1) *
(2 <SUP><I>DLMultExponent</I></SUP>) . Higher exponents give more accurate dip
limiting, but requires a longer computation. Usually a value of 2 or 3
is used. If this parameter is less than 0 no multiplier will be used. Be
careful because if the FFT size isn&#X2019;t a power of two the procedure might
take a long time to complete.</P><!--TOC subsection EP - Excess phase Prefiltering-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc116">6.6</A>&#XA0;&#XA0;EP - Excess phase Prefiltering</H3><!--SEC END --><P>The excess phase prefiltering is performed pretty much the same way as
the minimum phase prefiltering, so the parameters are almost identical,
even though with different values.</P><!--TOC subsubsection EPPrefilterType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc117">6.6.1</A>&#XA0;&#XA0;EPPrefilterType</H4><!--SEC END --><P>
<A NAME="EPPrefilterType"></A></P><P>Same as MPPrefilterType but for the excess phase component.</P><!--TOC subsubsection EPPrefilterFctn-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc118">6.6.2</A>&#XA0;&#XA0;EPPrefilterFctn</H4><!--SEC END --><P>
<A NAME="EPPrefilterFctn"></A></P><P>Same as MPPrefilterFctn but for the excess phase component.</P><!--TOC subsubsection EPWindowGap-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc119">6.6.3</A>&#XA0;&#XA0;EPWindowGap</H4><!--SEC END --><P>
<A NAME="EPWindowGap"></A></P><P>Same as MPWindowGap but for the excess phase component.</P><!--TOC subsubsection EPLowerWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc120">6.6.4</A>&#XA0;&#XA0;EPLowerWindow (*)</H4><!--SEC END --><P>
<A NAME="EPLowerWindow"></A></P><P>Same as MPLowerWindow but for the excess phase component. Typical values
are between 1024 and 4096. As a rule of thumb you can take:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><I>EPLowerWindow</I>&#XA0;&#XA0;=&#XA0;&#XA0;<I>MPLowerWindow</I>&#XA0;/&#XA0;<I>A</I>
</TD></TR>
</TABLE><P>
with <I>A</I> going from 16 to 32 and a typical value of 24.
EPLowerWindow must be not greater than BCInitWindow.</P><!--TOC subsubsection EPUpperWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc121">6.6.5</A>&#XA0;&#XA0;EPUpperWindow (*)</H4><!--SEC END --><P>
<A NAME="EPUpperWindow"></A></P><P>Same as MPUpperWindow but for the excess phase component. Typical values
are between 22 and 128. As a rule of thumb you can take:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><I>EPUpperWindow</I>&#XA0;=&#XA0;<I>MPUpperWindow</I>
</TD></TR>
</TABLE><!--TOC subsubsection EPStartFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc122">6.6.6</A>&#XA0;&#XA0;EPStartFreq</H4><!--SEC END --><P>
<A NAME="EPStartFreq"></A></P><P>Start frequency for the prefiltering stage. Usually 20 Hz or just
something less.</P><!--TOC subsubsection EPEndFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc123">6.6.7</A>&#XA0;&#XA0;EPEndFreq</H4><!--SEC END --><P>
<A NAME="EPEndFreq"></A></P><P>End frequency for the prefiltering stage. Usually set at 20
kHz, i.e. 20000. Of course you must be using a sample rate which
is greater than 40 kHz to set this above 20 kHz.</P><!--TOC subsubsection EPWindowExponent (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc124">6.6.8</A>&#XA0;&#XA0;EPWindowExponent (*)</H4><!--SEC END --><P>
<A NAME="EPWindowExponent"></A></P><P>Same as MPWindowExponent but for the excess phase component. See
discussion on MPWindowExponent. Usual values for this parameter are
between 0.5 and 1.2, depending on the value of EPInitWindow. As
a rule of thumb you can take:</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><I>EPWindowExponent</I>&#XA0;=&#XA0;<I>MPWindowExponent</I>
</TD></TR>
</TABLE><!--TOC subsubsection EPFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc125">6.6.9</A>&#XA0;&#XA0;EPFilterLen</H4><!--SEC END --><P>
<A NAME="EPFilterLen"></A></P><P>Filter length, in taps, used to perform band splitting of the input
signal or sliding lowpass prefiltering. Higher values gives better
filter resolution but require a longer computation. Typical values for
band windowing are between 4096 and 65536. Sometimes may be useful to
use short filters (64 - 512 taps) to get a more &#X201C;fuzzy&#X201D; correction at
lower frequencies.</P><P>With the sliding lowpass procedure similar filters should be used.
Usually the filter length is in the 512 - 65536 range. Short filters (16
- 64 taps) gives a similar fuzzier correction at the bottom end, but
with a different behaviour than band windowing.</P><P>This value is usually equal to MPFilterLen.</P><!--TOC subsubsection EPFSharpness (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc126">6.6.10</A>&#XA0;&#XA0;EPFSharpness (*)</H4><!--SEC END --><P>
<A NAME="EPFSharpness"></A></P><P>Same as MPFSharpness but applied to the excess phase part.</P><!--TOC subsubsection EPBandSplit-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc127">6.6.11</A>&#XA0;&#XA0;EPBandSplit</H4><!--SEC END --><P>
<A NAME="EPBandSplit"></A></P><P>Fractional octave splitting of band windowing. Band windowing is
performed in  1 / <I>MPBandSplit</I>  of octave bands. Usual values are
between 2 and 6. The higher this value the higher should be MPFilterLen.
Values greater than 6 usually give no improvements.</P><P>For the sliding lowpass prefiltering this just gives the rate at which
log messages are reported and has no effect on the prefiltering
procedure, which is always stepless.</P><P>This value is usually equal to MPBandSplit.</P><!--TOC subsubsection EPPFFinalWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc128">6.6.12</A>&#XA0;&#XA0;EPPFFinalWindow</H4><!--SEC END --><P>
<A NAME="EPPFFinalWindow"></A></P><P>Final window of the prefiltering stage. Usually the same as EPInitWindow
or just something more. If set to 0 no windowing is applied.</P><!--TOC subsubsection EPPFFlatGain-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc129">6.6.13</A>&#XA0;&#XA0;EPPFFlatGain</H4><!--SEC END --><P>
<A NAME="EPPFFlatGain"></A></P><P>After band windowing the excess phase component usually need
reequalization to get the flat frequency response it must have. This
is the gain applied with respect to the RMS level of the signal to get
this flat frequency response. Usually 1, a value of 0 disables this
step. Skipping this step, i.e. setting this parameter to 0, usually
gives bad results.</P><!--TOC subsubsection EPPFOGainFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc130">6.6.14</A>&#XA0;&#XA0;EPPFOGainFactor</H4><!--SEC END --><P>
<A NAME="EPPFOGainFactor"></A></P><P>This parameter controls how the excess phase flattening set by the
previous parameter is performed. Setting this to 0 tries to get a
perfectly flat excess phase component, as in version 1.3.0 of DRC. This
parameter has been introduced to balance between the need of a flat
excess phase response and a perfect control of the direct sound, usually
achieved without any flattening. Unfortunately so far the supposed
balance always proved really difficult to find in any real world
situation, so this parameter is always set to 0 in the standard
configuration file. The procedure has been left just for experimental
purposes if some unusual situation need to be handled.</P><P>Furthermore this parameter applies only to the linear phase and minimum
phase excess phase flattening, it isn&#X2019;t available for the D type of
excess phase flattening.</P><!--TOC subsubsection EPPFFlatType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc131">6.6.15</A>&#XA0;&#XA0;EPPFFlatType</H4><!--SEC END --><P>
<A NAME="EPPFFlatType"></A></P><P>This is the type of procedure adopted for the excess phase component
renormalization. L means applying linear phase renormalization, M means
applying minimum phase renormalization, D means applying another
homomorphic deconvolution stage to extract just the excess phase
component of the prefiltered excess phase component. L applies a linear
phase filter that equalizes the excess phase amplitude response to flat,
M means minimum phase, i.e. it uses a minimum phase filter to achieve the
same result. The D procedure provides the same effect of the M procedure
when EPPFOGainFactor is equal to 0. Any difference is just caused by
numerical errors.</P><!--TOC subsubsection EPPFFGMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc132">6.6.16</A>&#XA0;&#XA0;EPPFFGMultExponent</H4><!--SEC END --><P>
<A NAME="EPPFFGMultExponent"></A></P><P>Exponent of the multiplier of the FFT size used to perform the frequency
response flattening. The FFT size used is equal to the first power of
two greater than or equal to  <I>EPBWFinalWindow</I> * (2 <SUP><I>EPPFFGMultExponent</I></SUP>) . Higher exponents give more accurate results,
but require a longer computation. This parameter should be set using the
same criteria described in HDMultExponent. If this parameter is less
than 0 no multiplier will be used. Be careful because if the FFT size
isn&#X2019;t a power of two the procedure might take a long time to complete.</P><!--TOC subsubsection EPPFNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc133">6.6.17</A>&#XA0;&#XA0;EPPFNormFactor</H4><!--SEC END --><P>
<A NAME="EPPFNormFactor"></A></P><P>Normalization factor for the excess phase component after band
windowing. Usually 0, i.e. disabled.</P><!--TOC subsubsection EPPFNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc134">6.6.18</A>&#XA0;&#XA0;EPPFNormType</H4><!--SEC END --><P>
<A NAME="EPPFNormType"></A></P><P>Normalization type for the excess phase component after windowing.
Usually E.</P><!--TOC subsubsection EPPFOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc135">6.6.19</A>&#XA0;&#XA0;EPPFOutFile</H4><!--SEC END --><P>
<A NAME="EPPFOutFile"></A></P><P>Output file for the excess phase component after windowing. Usually not
used (commented out).</P><!--TOC subsubsection EPPFOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc136">6.6.20</A>&#XA0;&#XA0;EPPFOutFileType</H4><!--SEC END --><P>
<A NAME="EPPFOutFileType"></A></P><P>Output file type for the excess phase component after windowing. D =
Double, F = Float, I = Integer.</P><!--TOC subsection PC - Prefilter Completion-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc137">6.7</A>&#XA0;&#XA0;PC - Prefilter Completion</H3><!--SEC END --><P>The prefilter completion stage combines the prefiltered minimum phase
and excess phase parts together again. The impulse response recovered
after prefilter completion defines the impulse response of the system as
seen by the correction applied by DRC.</P><!--TOC subsubsection PCOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc138">6.7.1</A>&#XA0;&#XA0;PCOutWindow</H4><!--SEC END --><P>
<A NAME="PCOutWindow"></A></P><P>Final window after prefiltering completion stage and before impulse
inversion. This is usually between 8192 and 65536. Values greater than
65536 make no sense, giving a filter resolution lower than 1 Hz at a
44.1 kHz sample rate. Furthermore inversion of signals longer than 65536
samples may require a lot of time. Starting with version 2.0.0 this step
is no longer needed with the pre-echo truncation fast deconvolution
inversion method, which works directly on the minimum and excess phase
components from the prefiltering stages. So if PCOutFile is not defined
and ISType is set to T this step is completely skipped.</P><!--TOC subsubsection PCNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc139">6.7.2</A>&#XA0;&#XA0;PCNormFactor</H4><!--SEC END --><P>
<A NAME="PCNormFactor"></A></P><P>Normalization factor for the prefiltered signal. Usually 0, i.e.
disabled.</P><!--TOC subsubsection PCNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc140">6.7.3</A>&#XA0;&#XA0;PCNormType</H4><!--SEC END --><P>
<A NAME="PCNormType"></A></P><P>Normalization type for the prefiltered signal. Usually E.</P><!--TOC subsubsection PCOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc141">6.7.4</A>&#XA0;&#XA0;PCOutFile</H4><!--SEC END --><P>
<A NAME="PCOutFile"></A></P><P>Output file for the prefiltered signal. Usually not used (commented
out).</P><!--TOC subsubsection PCOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc142">6.7.5</A>&#XA0;&#XA0;PCOutFileType</H4><!--SEC END --><P>
<A NAME="PCOutFileType"></A></P><P>Output file type for the prefiltered signal. D = Double, F = Float, I =
Integer.</P><!--TOC subsection IS - Inversion Stage-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc143">6.8</A>&#XA0;&#XA0;IS - Inversion Stage</H3><!--SEC END --><!--TOC subsubsection ISType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc144">6.8.1</A>&#XA0;&#XA0;ISType</H4><!--SEC END --><P>
<A NAME="ISType"></A></P><P>Type of inversion stage. L uses the usual Toeplitz least square
inversion, T activates the pre-echo truncation fast deconvolution.</P><!--TOC subsubsection ISPETType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc145">6.8.2</A>&#XA0;&#XA0;ISPETType</H4><!--SEC END --><P>
<A NAME="ISPETType"></A></P><P>This sets the type of pre echo truncation applied when ISType is T. f
means a fixed pre-echo truncation, s means a time dependent pre-echo
truncation applied using the usual single side sliding low-pass
procedure, but with reversed behaviour, i.e. only what comes before the
impulse center is processed. Starting with version 2.7.0 this is set to
f and pre-echo truncation is basicly disabled because it is already
carried out by the excess phase prefiltering procedure.</P><!--TOC subsubsection ISPrefilterFctn-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc146">6.8.3</A>&#XA0;&#XA0;ISPrefilterFctn</H4><!--SEC END --><P>
<A NAME="ISPrefilterFctn"></A></P><P>Same as MPPrefilterFctn but for the pre-echo truncation windowing. It is
used only when ISPETType is set to s.</P><!--TOC subsubsection ISPELowerWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc147">6.8.4</A>&#XA0;&#XA0;ISPELowerWindow</H4><!--SEC END --><P>
<A NAME="ISPELowerWindow"></A></P><P>When ISPETType is f this is the number of samples before the impulse
center where the inverted impulse response is considered pre-echo.
Starting with version 2.7.0 this is is usually set to half the value of
EPLowerWindow so that the pre-echo truncation procedure provides just a
mild windowing. When ISPETType is s this is the number of samples
considered pre-echo at the ISPEStartFreq frequency, with a typical value
equal to EPLowerWindow.</P><!--TOC subsubsection ISPEUpperWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc148">6.8.5</A>&#XA0;&#XA0;ISPEUpperWindow</H4><!--SEC END --><P>
<A NAME="ISPEUpperWindow"></A></P><P>When ISPETType is f this is the number of samples before the impulse
center where the pre-echo region, defined by the previous parameter,
ends, and the full impulse response of the inverted filter should start.
Starting with version 2.7.0 this is usually set to about 0.75 *
<I>ISPELowerWindow</I> so that the pre-echo truncation procedure is limited to
a mild windowing used only to avoid small steps in the impulse response
attack caused by small numerical errors. When ISPETType is s this is the
number of sample considered pre-echo at the ISPEEndFreq frequency, with
a typical value equal to EPUpperWindow.</P><!--TOC subsubsection ISPEStartFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc149">6.8.6</A>&#XA0;&#XA0;ISPEStartFreq</H4><!--SEC END --><P>
<A NAME="ISPEStartFreq"></A></P><P>Start frequency for the sliding low pass pre-echo truncation procedure.
Usually 20 Hz. Used only when ISPETType is s.</P><!--TOC subsubsection ISPEEndFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc150">6.8.7</A>&#XA0;&#XA0;ISPEEndFreq</H4><!--SEC END --><P>
<A NAME="ISPEEndFreq"></A></P><P>End frequency for the sliding low pass pre-echo truncation procedure.
Usually 20000 Hz. Used only when ISPETType is s.</P><!--TOC subsubsection ISPEFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc151">6.8.8</A>&#XA0;&#XA0;ISPEFilterLen</H4><!--SEC END --><P>
<A NAME="ISPEFilterLen"></A></P><P>Length of the filter used for the pre-echo truncation sliding lowpass
procedure. Usually 8192. Used only when ISPETType is s.</P><!--TOC subsubsection ISPEFSharpness-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc152">6.8.9</A>&#XA0;&#XA0;ISPEFSharpness</H4><!--SEC END --><P>
<A NAME="ISPEFSharpness"></A></P><P>Same as MPFSharpness, but applied to the inversion stage pre-echo
truncation. Here slightly bigger values usually provide better results
because of the shorter windowing. Used only when ISPETType is s. The
default value is 0.5.</P><!--TOC subsubsection ISPEBandSplit-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc153">6.8.10</A>&#XA0;&#XA0;ISPEBandSplit</H4><!--SEC END --><P>
<A NAME="ISPEBandSplit"></A></P><P>For the sliding lowpass prefiltering this just gives the rate at which
log messages are reported and has no effect on the prefiltering
procedure, which is always stepless. Used only when ISPETType is s.</P><!--TOC subsubsection ISPEWindowExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc154">6.8.11</A>&#XA0;&#XA0;ISPEWindowExponent</H4><!--SEC END --><P>
<A NAME="ISPEWindowExponent"></A></P><P>Window exponent applied to the pre-echo truncation sliding lowpass
procedure. Usual values goes from 0.5 to 1.5, with a typical value
of 1.0. Used only when ISPETType is s.</P><!--TOC subsubsection ISPEOGainFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc155">6.8.12</A>&#XA0;&#XA0;ISPEOGainFactor</H4><!--SEC END --><P>
<A NAME="ISPEOGainFactor"></A></P><P>This parameter has the same effect of the EPPFOGainFactor (see section
<A HREF="#EPPFOGainFactor">6.6.14</A>) but applied to the renormalization of the excess
phase part of the inverse filter after pre-echo truncation. Used in
conjunction with the EPPFOGainFactor parameter, this parameter can be
used to balance the amount of correction applied to the direct sound
compared to the amount of correction applied to the reverberant field. A
negative value disables the renormalization. Default is 0.0.</P><!--TOC subsubsection ISSMPMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc156">6.8.13</A>&#XA0;&#XA0;ISSMPMultExponent</H4><!--SEC END --><P>
<A NAME="ISSMPMultExponent"></A></P><P>This is the exponent of the multiplier for the S inversion stage, using
the longest of the input and output signals as a basis. This parameter
should be set using the same criterion used for the MPHDMultExponent
parameters and a values of at least 3 is suggested.</P><!--TOC subsubsection ISOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc157">6.8.14</A>&#XA0;&#XA0;ISOutWindow</H4><!--SEC END --><P>
<A NAME="ISOutWindow"></A></P><P>Final window after inversion stage. Usually 0, i.e. disabled, with the L
type inversion stage. With the S type this is the output filter size and
can be any length but usually is between 8192 and 65536. If it is 0 than
a length equal to  <I>MPPFFinalWindow</I> + <I>EPPFFinalWindow</I> &#X2212; 1 , i.e.
the length of the convolution of the two components together, is assumed
and no windowing is applied to the output filter.</P><!--TOC subsubsection ISNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc158">6.8.15</A>&#XA0;&#XA0;ISNormFactor</H4><!--SEC END --><P>
<A NAME="ISNormFactor"></A></P><P>Normalization factor for the inverted signal. Usually 0, i.e. disabled.</P><!--TOC subsubsection ISNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc159">6.8.16</A>&#XA0;&#XA0;ISNormType</H4><!--SEC END --><P>
<A NAME="ISNormType"></A></P><P>Normalization type for the inverted signal. Usually E.</P><!--TOC subsubsection ISOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc160">6.8.17</A>&#XA0;&#XA0;ISOutFile</H4><!--SEC END --><P>
<A NAME="ISOutFile"></A></P><P>Output file for the inverted signal. Usually not used (commented out).</P><!--TOC subsubsection ISOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc161">6.8.18</A>&#XA0;&#XA0;ISOutFileType</H4><!--SEC END --><P>
<A NAME="ISOutFileType"></A></P><P>Output file type for the inverted signal. D = Double, F = Float, I =
Integer.</P><!--TOC subsection PT - Psychoacoustic Target-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc162">6.9</A>&#XA0;&#XA0;PT - Psychoacoustic Target</H3><!--SEC END --><P>
<A NAME="PTPsychoacousticTarget"></A></P><P>This stage computes a psychoacoustic target response based on the
magnitude response envelope.</P><!--TOC subsubsection PTType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc163">6.9.1</A>&#XA0;&#XA0;PTType</H4><!--SEC END --><P>
<A NAME="PTType"></A></P><P>Defines the type of psychoacoustic target filter to use. N means no
filter, thus skipping the psychoacoustic target stage completely. M
means that a minimum phase filter is used and L means that a linear
phase filter is used. The default is M.</P><!--TOC subsubsection PTReferenceWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc164">6.9.2</A>&#XA0;&#XA0;PTReferenceWindow (*)</H4><!--SEC END --><P>
<A NAME="PTReferenceWindow"></A></P><P>This parameter define the size used to window the corrected impulse
response. The windowed response is then used to compute the magnitude
response envelope that the target response is based upon. Usually a
portion of the impulse response going from 150 ms to 500 ms is used. The
default value is 26460, corresponding to a symmetric window, 300 ms long
on each side, at 44100 Hz sample rate.</P><!--TOC subsubsection PTDLType, PTDLMinGain, PTDLStartFreq, PTDLEndFreq, PTDLStart,
PTDLMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc165">6.9.3</A>&#XA0;&#XA0;PTDLType, PTDLMinGain, PTDLStartFreq, PTDLEndFreq, PTDLStart,
PTDLMultExponent</H4><!--SEC END --><P>
<A NAME="PTDipLimiting"></A></P><P>These parameters are used to set a small dip limiting on the corrected
impulse response in order to avoid numerical problems in the inversion
of the magnitude response envelope. For a detailed description of these
parameters see the similar procedure described in section
<A HREF="#DLDipLimiting">6.5</A>. This stage is used just to prevent overflow or
underflow problems so under standard conditions there is no need at all
to change these parameters.</P><!--TOC subsubsection PTBandWidth (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc166">6.9.4</A>&#XA0;&#XA0;PTBandWidth (*)</H4><!--SEC END --><P>
<A NAME="PTBandWidth"></A></P><P>This parameter define the resolution used for the computation of the
magnitude response envelope. It is defined as fraction of octaves, so a
value of 0.25 means a resolution of 1/4 of octave. Values below 0 down
to -1 causes the adoption of the Bark scale, values below -1 causes the
adoption of the ERB scale. The default value is -2, which means that the
computation is performed on the ERB scale.</P><!--TOC subsubsection PTPeakDetectionStrength (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc167">6.9.5</A>&#XA0;&#XA0;PTPeakDetectionStrength (*)</H4><!--SEC END --><P>
<A NAME="PTPeakDetectionStrength"></A></P><P>This parameter define how close the magnitude response envelope will be
to to the peaks in the unsmoothed spectrum. Higher values provide a
closer match. Typical values are between 5 and 30, with the default
value, based on documented psychoacoustic assumptions, set to 15. Values
above 50 are probably going to cause numerical problems and should be
avoided.</P><!--TOC subsubsection PTMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc168">6.9.6</A>&#XA0;&#XA0;PTMultExponent</H4><!--SEC END --><P>
<A NAME="PTMultExponent"></A></P><P>Multiplier exponent for the computation of the magnitude response
envelope. Default is 0.</P><!--TOC subsubsection PTFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc169">6.9.7</A>&#XA0;&#XA0;PTFilterLen</H4><!--SEC END --><P>
<A NAME="PTFilterLen"></A></P><P>Length of the psychoacoustic target filter. Default set to 65536.</P><!--TOC subsubsection PTFilterFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc170">6.9.8</A>&#XA0;&#XA0;PTFilterFile</H4><!--SEC END --><P>
<A NAME="PTFilterFile"></A></P><P>Output file for the psychoacoustic target filter. Usually not
used (commented out).</P><!--TOC subsubsection PTFilterFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc171">6.9.9</A>&#XA0;&#XA0;PTFilterFileType</H4><!--SEC END --><P>
<A NAME="PTFilterFileType"></A></P><P>Output file type for the psychoacoustic target filter. D = Double, F =
Float, I = Integer.</P><!--TOC subsubsection PTNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc172">6.9.10</A>&#XA0;&#XA0;PTNormFactor</H4><!--SEC END --><P>
<A NAME="PTNormFactor"></A></P><P>Normalization factor for the inverted signal after convolution with the
psychoacoustic target filter. Usually 0, i.e. disabled.</P><!--TOC subsubsection PTNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc173">6.9.11</A>&#XA0;&#XA0;PTNormType</H4><!--SEC END --><P>
<A NAME="PTNormType"></A></P><P>Normalization type for the inverted signal after convolution with the
psychoacoustic target filter. Usually E.</P><!--TOC subsubsection PTOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc174">6.9.12</A>&#XA0;&#XA0;PTOutFile</H4><!--SEC END --><P>
<A NAME="PTOutFile"></A></P><P>Output file for the inverted signal after convolution with the
psychoacoustic target filter. Usually not used (commented out).</P><!--TOC subsubsection PTOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc175">6.9.13</A>&#XA0;&#XA0;PTOutFileType</H4><!--SEC END --><P>
<A NAME="PTOutFileType"></A></P><P>Output file type for the inverted signal after convolution with the
psychoacoustic target filter. D = Double, F = Float, I = Integer.</P><!--TOC subsubsection PTOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc176">6.9.14</A>&#XA0;&#XA0;PTOutWindow</H4><!--SEC END --><P>
<A NAME="PTOutWindow"></A></P><P>Normalization factor for the inverted signal after convolution with the
psychoacoustic target filter. Usually 0, i.e. disabled.</P><!--TOC subsection PL - Peak Limiting-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc177">6.10</A>&#XA0;&#XA0;PL - Peak Limiting</H3><!--SEC END --><P>The peak limiting stage limits the maximum allowed gain of the filter to
prevent amplification and speaker overload.</P><!--TOC subsubsection PLType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc178">6.10.1</A>&#XA0;&#XA0;PLType</H4><!--SEC END --><P>
<A NAME="PLType"></A></P><P>Type of peak limiting applied. L means linear phase, M means minimum
phase, P means log weighted linear phase, W means log weighted minimum
phase. For an explanation of the log weighted versions of the procedures
see section <A HREF="#DLType">6.5.1</A>. If PSFilterType is set to T PLType should be
set to M or W to ensure that the initial zero valued part is preserved.
Since version 3.1.2 the default and suggested value for this parameter
is W.</P><!--TOC subsubsection PLMaxGain-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc179">6.10.2</A>&#XA0;&#XA0;PLMaxGain</H4><!--SEC END --><P>
<A NAME="PLMaxGain"></A></P><P>Maximum gain allowed in the correction filter. Peaks in the correction
filter amplitude response greater than this value will be compressed to
PLMaxGain. Typical values are between 1.2 and 4. These are absolute
values with respect to the RMS value, i.e. 1.2 is about 1.6 dB and 4 is
about 12 dB. This peak limiting stage is used to prevent speaker or
amplifier overloading, resulting in dynamic range limitations which are
subjectively worse than some narrow dip in the frequency response. A
typical value is 2.0, i.e. 6 dB.</P><!--TOC subsubsection PLStart-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc180">6.10.3</A>&#XA0;&#XA0;PLStart</H4><!--SEC END --><P>
<A NAME="PLStart"></A></P><P>Setting this parameter to a value between 0.0 and 1.0 enables the
&#X201C;soft clipping&#X201D; peak limiting procedure. Everything above  <I>PLStart</I>
* <I>PLMaxGain</I> , with respect to the RMS value, get rescaled so that it
ends up between  <I>PLStart</I> * <I>PLMaxGain</I>  and about PLMaxGain. Values
for this parameter usually are between 0.5 and 0.95, with a typical
value of 0.75. Setting this parameter to a value equal to or greater
than 1.0 switch to hard clipping of the magnitude response.</P><!--TOC subsubsection PLStartFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc181">6.10.4</A>&#XA0;&#XA0;PLStartFreq</H4><!--SEC END --><P>
<A NAME="PLStartFreq"></A></P><P>Start frequency where the reference RMS level used for peak limiting is
computed. Default value set to 100 Hz. This value should be set typically 
to something like an octave above the minimum reproducible frequency
of your speakers.</P><!--TOC subsubsection PLEndFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc182">6.10.5</A>&#XA0;&#XA0;PLEndFreq</H4><!--SEC END --><P>
<A NAME="PLEndFreq"></A></P><P>End frequency where the reference RMS level used for peak limiting is
computed. Default value set to 10000 Hz. This value should be set typically 
to something like an octave below the maximum reproducible frequency
of your speakers.</P><!--TOC subsubsection PLMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc183">6.10.6</A>&#XA0;&#XA0;PLMultExponent</H4><!--SEC END --><P>
<A NAME="PLMultExponent"></A></P><P>Exponent of the multiplier of the FFT size used to perform the peak
limiting stage. The FFT size used is equal to the first power of two
greater than or equal to  <I>PSOutWindow</I> * (2 <SUP><I>PLMultExponent</I></SUP>) .
Higher exponents give more accurate peak limiting, but requires a longer
computation. Usually a value of 2 or 3 is used. If this parameter is
less than 0 no multiplier will be used. Be careful because if the FFT
size isn&#X2019;t a power of two the procedure can take a long time to
complete.</P><!--TOC subsubsection PLOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc184">6.10.7</A>&#XA0;&#XA0;PLOutWindow</H4><!--SEC END --><P>
<A NAME="PLOutWindow"></A></P><P>Final window after peak limiting. Usually 0, i.e. disabled.</P><!--TOC subsubsection PLNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc185">6.10.8</A>&#XA0;&#XA0;PLNormFactor</H4><!--SEC END --><P>
<A NAME="PLNormFactor"></A></P><P>Normalization factor for the final filter. Usually 0, i.e. disabled.</P><!--TOC subsubsection PLNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc186">6.10.9</A>&#XA0;&#XA0;PLNormType</H4><!--SEC END --><P>
<A NAME="PLNormType"></A></P><P>Normalization type for the peak limited filter, usually E.</P><!--TOC subsubsection PLOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc187">6.10.10</A>&#XA0;&#XA0;PLOutFile</H4><!--SEC END --><P>
<A NAME="PLOutFile"></A></P><P>Output file for the peak limited filter. Usually disabled (commented
out).</P><!--TOC subsubsection PLOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc188">6.10.11</A>&#XA0;&#XA0;PLOutFileType</H4><!--SEC END --><P>
<A NAME="PLOutFileType"></A></P><P>Output file type for the final filter. D = Double, F = Float, I =
Integer.</P><!--TOC subsection RT - Ringing Truncation-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc189">6.11</A>&#XA0;&#XA0;RT - Ringing Truncation</H3><!--SEC END --><P>
<A NAME="RingingTruncation"></A></P><P>The ringing truncation stage applies a further frequency dependent
windowing to the correction filter. The truncation parameters are pretty
similar to those of the prefiltering stage and usually have also much
similar values.</P><!--TOC subsubsection RTType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc190">6.11.1</A>&#XA0;&#XA0;RTType</H4><!--SEC END --><P>
<A NAME="RTType"></A></P><P>This parameter can be either B or b for the band windowing method, S or
s for the sliding lowpass method or N to disable the ringing truncation
stage. See section <A HREF="#FrequencyDependentWindowing">4.2</A> and
<A HREF="#MPPrefilterType">6.4.1</A> for further details.</P><!--TOC subsubsection RTPrefilterFctn-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc191">6.11.2</A>&#XA0;&#XA0;RTPrefilterFctn</H4><!--SEC END --><P>
<A NAME="RTPrefilterFctn"></A></P><P>Same as MPPrefilterFctn but for the ringing truncation windowing.</P><!--TOC subsubsection RTWindowGap-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc192">6.11.3</A>&#XA0;&#XA0;RTWindowGap</H4><!--SEC END --><P>
<A NAME="RTWindowGap"></A></P><P>This parameter changes a little the window function (Blackman) used for
the band windowing or the sliding lowpass windowing. See section
<A HREF="#MPWindowGap">6.4.3</A> for further details.</P><!--TOC subsubsection RTLowerWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc193">6.11.4</A>&#XA0;&#XA0;RTLowerWindow (*)</H4><!--SEC END --><P>
<A NAME="RTLowerWindow"></A></P><P>Length of the window at the bottom end of the frequency range. Usually
set to the same value of MPLowerWindow.</P><!--TOC subsubsection RTUpperWindow (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc194">6.11.5</A>&#XA0;&#XA0;RTUpperWindow (*)</H4><!--SEC END --><P>
<A NAME="RTUpperWindow"></A></P><P>Length of the window at the upper end of the frequency range. Usually
set to the same value of MPUpperWindow.</P><!--TOC subsubsection RTStartFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc195">6.11.6</A>&#XA0;&#XA0;RTStartFreq</H4><!--SEC END --><P>
<A NAME="RTStartFreq"></A></P><P>Start frequency for the windowing. Usually 20 Hz or just
something less.</P><!--TOC subsubsection RTEndFreq-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc196">6.11.7</A>&#XA0;&#XA0;RTEndFreq</H4><!--SEC END --><P>
<A NAME="RTEndFreq"></A></P><P>End frequency for the windowing. Usually set to 20000.</P><!--TOC subsubsection RTWindowExponent (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc197">6.11.8</A>&#XA0;&#XA0;RTWindowExponent (*)</H4><!--SEC END --><P>
<A NAME="RTWindowExponent"></A></P><P>This is the exponent used in the frequency dependent window length
computation for the band windowing procedure, or in the computation of
the time dependent cutoff frequency for the sliding lowpass procedure.
See section <A HREF="#MPWindowExponent">6.4.8</A> for further details. Usually set to the
same value of MPWindowExponent.</P><!--TOC subsubsection RTFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc198">6.11.9</A>&#XA0;&#XA0;RTFilterLen</H4><!--SEC END --><P>
<A NAME="RTFilterLen"></A></P><P>Filter length, in taps, used to perform band splitting or sliding
lowpass prefiltering of the input signal. Usually the same as the one
used in the prefiltering stage.</P><!--TOC subsubsection RTFSharpness (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc199">6.11.10</A>&#XA0;&#XA0;RTFSharpness (*)</H4><!--SEC END --><P>
<A NAME="RTFSharpness"></A></P><P>This parameter applies only to the sliding lowpass prefiltering
procedure and control the sharpness of the filtering performed in the
filtered region of the time-frequency plane. See section
<A HREF="#MPFSharpness">6.4.10</A> for further details.</P><!--TOC subsubsection RTBandSplit-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc200">6.11.11</A>&#XA0;&#XA0;RTBandSplit</H4><!--SEC END --><P>
<A NAME="RTBandSplit"></A></P><P>Fractional octave splitting of band windowing. See section
<A HREF="#MPBandSplit">6.4.11</A> for further details.</P><!--TOC subsubsection RTOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc201">6.11.12</A>&#XA0;&#XA0;RTOutWindow</H4><!--SEC END --><P>
<A NAME="RTOutWindow"></A></P><P>Final window of the stage. Usually set to 0, i.e. disabled.</P><!--TOC subsubsection RTNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc202">6.11.13</A>&#XA0;&#XA0;RTNormFactor</H4><!--SEC END --><P>
<A NAME="RTNormFactor"></A></P><P>Normalization factor for the minimum phase component after windowing.
Usually 0.</P><!--TOC subsubsection RTNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc203">6.11.14</A>&#XA0;&#XA0;RTNormType</H4><!--SEC END --><P>
<A NAME="RTNormType"></A></P><P>Normalization type for the minimum phase component after windowing.
Usually E.</P><!--TOC subsubsection RTOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc204">6.11.15</A>&#XA0;&#XA0;RTOutFile</H4><!--SEC END --><P>
<A NAME="RTOutFile"></A></P><P>Output file for the filter after windowing. Usually not used (commented
out).</P><!--TOC subsubsection RTOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc205">6.11.16</A>&#XA0;&#XA0;RTOutFileType</H4><!--SEC END --><P>
<A NAME="RTOutFileType"></A></P><P>Output file type for the filter after windowing. D = Double, F = Float,
I = Integer.</P><!--TOC subsection PS - Postfiltering Stage-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc206">6.12</A>&#XA0;&#XA0;PS - Postfiltering Stage</H3><!--SEC END --><P>
<A NAME="PostfilteringStage"></A></P><P>During the postfiltering stage the final target transfer function is
applied to the filter and the filter is normalized to suitable values
for the convolver used.</P><!--TOC subsubsection PSFilterType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc207">6.12.1</A>&#XA0;&#XA0;PSFilterType</H4><!--SEC END --><P>
<A NAME="PSFilterType"></A></P><P>This is the type of filter used for the postfiltering stage. L means the
usual linear phase filtering, M means minimum phase filtering, T means
minimum phase filtering with initial zero truncation. If the pre-echo
truncation inversion is used and the final post filtering stage is
minimum phase all the filter taps before ISPELowerWindow are zero (there
could be some roundoff errors that make them different from zero, but
considering them zero makes no difference for our needs). So this
initial all zero part can be windowed out without changing the filter
behaviour. This way the filter becomes almost zero delay, providing a
delay of just ISPELowerWindow samples. This sometimes may be low enough
to make it usable even with home theater systems where audio delay is a
major issue. Of course to ensure that the initial all zero part is
preserved the minimum phase peak limiting should also be used.</P><!--TOC subsubsection PSInterpolationType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc208">6.12.2</A>&#XA0;&#XA0;PSInterpolationType</H4><!--SEC END --><P>
<A NAME="PSInterpolationType"></A></P><P>This parameter defines the type of interpolation used between the points
of the target transfer function. L means the usual linear interpolation,
G means logarithmic interpolation, i.e. interpolation performed on a
bilogarithmic scale, R means interpolation using Uniform Cubic B
Splines, S means interpolation using Uniform Cubic B Splines on a
bilogarithmic scale, P means interpolation on a linear scale using a
monotone Piecewise Cubic Hermite Interpolating Polynomial (PCHIP), H
means interpolation on a logarithmic scale using PCHIP. The logarithmic
interpolation makes the definition of the target transfer function
easier, without the need to define intermediate points to get the
desired behaviour on a bilogarithmic scale. The default is S.</P><P>The B Splines interpolation options allow for the definition of smooth
target transfer functions which provides less ringing. Be careful when
using this option because defining the right control points to get the
desired target transfer function might be tricky. B Splines don&#X2019;t
interpolate the supplied points but are instead tangent to the lines
connecting the control point. If you want sharp corners in the transfer
function just place few close control points near to the desired corner.
Remember that B Splines of the type used are unaffected by control
points which are more than two control points away from any given point
on the curve. Take a look at the supplied examples for some simple
transfer function definition.</P><P>The PCHIP procedure provides a monotonic interpolation procedure. The
resulting target is less smooth than the one supplied by B Splines, but
being a true interpolation PCHIP makes the definition of the control
points much easier.</P><P>The use of the B Spline or PCHIP interpolation procedures is often
useful also for the definition of the mic compensation transfer
function, especially when only few points are available.</P><!--TOC subsubsection PSMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc209">6.12.3</A>&#XA0;&#XA0;PSMultExponent</H4><!--SEC END --><P>
<A NAME="PSMultExponent"></A></P><P>The multiplier exponent used for the homomorphic deconvolution used to
compute the minimum phase post filter. Usually a value of 2 or 3 is
used.</P><!--TOC subsubsection PSFilterLen-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc210">6.12.4</A>&#XA0;&#XA0;PSFilterLen</H4><!--SEC END --><P>
<A NAME="PSFilterLen"></A></P><P>Length of the FIR filter used during the postfiltering stage. Usually
between 16384 and 65536.</P><!--TOC subsubsection PSNumPoints-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc211">6.12.5</A>&#XA0;&#XA0;PSNumPoints</H4><!--SEC END --><P>
<A NAME="PSNumPoints"></A></P><P>Number of points used for the definition of the post filter frequency
response. If this parameter is 0 DRC automatically counts the number of
lines in the post filter definition file. See the following parameters
for further details about the post filter frequency response.</P><!--TOC subsubsection PSMagType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc212">6.12.6</A>&#XA0;&#XA0;PSMagType</H4><!--SEC END --><P>
<A NAME="PSMagType"></A></P><P>This parameter selects how the amplitude of the target frequency
response is defined. L means linear amplitude (0.5 means half the
level, i.e about &#X2212;6 dB), D means that the amplitude is expressed in
dB.</P><!--TOC subsubsection PSPointsFile (*)-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc213">6.12.7</A>&#XA0;&#XA0;PSPointsFile (*)</H4><!--SEC END --><P>
<A NAME="PSPointsFile"></A></P><P>File containing the post filter frequency response definition. This file
should contain PSNumPoints lines, each line in the form &#X201C;Frequency
Gain&#X201D;, with the gain expressed as a linear gain or in dB depending on
the PSMagType parameter value. The following examples are in dB. The
first line must have a frequency equal to 0, the last line must have a
frequency equal to  <I>BCSampleRate</I> / 2 . A post filter definition file
must have the following format:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim">0 -40
18 -20
20 0
20000 0
21000 -40
22050 -100
</PRE></BLOCKQUOTE><P>
This is for a 44.1 kHz sample rate.</P><P>The post filter stage is usually used to prevent overcompensation in the
subsonic or ultrasonic range, but may be used also to change the target
frequency response from linear to a more euphonic one.</P><P>Starting from version 2.0.0 DRC lets you specify the phase for the
target post filter stage. Phase specification should be placed after the
amplitude specification and should be expressed in degrees. Following
the example above:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim">0 -40 0
18 -20 45
20 0 90
20000 0 180
21000 -40 90
22050 -100 0
</PRE></BLOCKQUOTE><P>
If not specified a value of 0 is assumed. Setting a phase different than
0, i.e. flat, is useless within normal HiFi systems in almost all
circumstances. Furthermore the phase specification is used only if the
PSFilterType is L, else any phase specification is wiped out by the
minimum phase filter extraction.</P><!--TOC subsubsection PSOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc214">6.12.8</A>&#XA0;&#XA0;PSOutWindow</H4><!--SEC END --><P>
<A NAME="PSOutWindow"></A></P><P>Final window after post filtering. This is also the length of the
generated correction filter. Usual values are between 8192 and 65536.
Filter with 65536 taps gives about 0.5 Hz resolution at 44.1 kHz
sample rate, 16384 is usually enough for most situation and 8192 gives
somewhat good results with much less computing needs during real time
convolution.</P><!--TOC subsubsection PSNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc215">6.12.9</A>&#XA0;&#XA0;PSNormFactor</H4><!--SEC END --><P>
<A NAME="PSNormFactor"></A></P><P>Normalization factor for the correction filter. Usually 1.0. See
section <A HREF="#PreventingClipping">4.6.2</A> for some instructions on how to set
this parameter.</P><!--TOC subsubsection PSNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc216">6.12.10</A>&#XA0;&#XA0;PSNormType</H4><!--SEC END --><P>
<A NAME="PSNormType"></A></P><P>Normalization type for the correction filter. Usually E. See section
<A HREF="#PreventingClipping">4.6.2</A> for some instructions on how to set this
parameter.</P><!--TOC subsubsection PSOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc217">6.12.11</A>&#XA0;&#XA0;PSOutFile</H4><!--SEC END --><P>
<A NAME="PSOutFile"></A></P><P>Output file for the correction filter. This file contains the filter to
be used with the convolution engine.</P><!--TOC subsubsection PSOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc218">6.12.12</A>&#XA0;&#XA0;PSOutFileType</H4><!--SEC END --><P>
<A NAME="PSOutFileType"></A></P><P>Output file type for the correction filter. D = Double, F = Float, I =
Integer.</P><!--TOC subsection MS - Minimum phase filter extraction Stage-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc219">6.13</A>&#XA0;&#XA0;MS - Minimum phase filter extraction Stage</H3><!--SEC END --><P>The minimum phase extraction stage creates a minimum phase filter from
the correction filter. A minimum phase filter corrects just the
magnitude response and the minimum phase part of the phase
response, but it is usually almost artifacts free and as basically zero
latency. If microphone compensation is enabled the filter includes
microphone compensation.</P><!--TOC subsubsection MSMultExponent-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc220">6.13.1</A>&#XA0;&#XA0;MSMultExponent</H4><!--SEC END --><P>
<A NAME="MSMultExponent"></A></P><P>Exponent of the multiplier for the homomorphic deconvolution used to
extract a zero delay minimum phase version of the correction filter. A
value of 2 or 3 is usually enough.</P><!--TOC subsubsection MSOutWindow-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc221">6.13.2</A>&#XA0;&#XA0;MSOutWindow</H4><!--SEC END --><P>
<A NAME="MSOutWindow"></A></P><P>Output window size for the minimum phase filter. Typical values are
about half of PLOutWindow.</P><!--TOC subsubsection MSFilterDelay-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc222">6.13.3</A>&#XA0;&#XA0;MSFilterDelay</H4><!--SEC END --><P>
<A NAME="MSFilterDelay"></A></P><P>This parameter add an initial delay to the filter, making it possible
to align it with other filters. Usually it is set to the same value assigned to
EPLowerWindow, so that the filter has the same latency of the mixed phase
filter when PSFilterType is set to T. If you want a zero delay filter set this
parameter to 0.</P><!--TOC subsubsection MSNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc223">6.13.4</A>&#XA0;&#XA0;MSNormFactor</H4><!--SEC END --><P>
<A NAME="MSNormFactor"></A></P><P>Normalization factor for the minimum phase filter. The same
considerations of section <A HREF="#PreventingClipping">4.6.2</A> should be applied.</P><!--TOC subsubsection MSNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc224">6.13.5</A>&#XA0;&#XA0;MSNormType</H4><!--SEC END --><P>
<A NAME="MSNormType"></A></P><P>Normalization type for the minimum phase filter. Usually E. See
section <A HREF="#PreventingClipping">4.6.2</A> for some instructions on how to set
this parameter.</P><!--TOC subsubsection MSOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc225">6.13.6</A>&#XA0;&#XA0;MSOutFile</H4><!--SEC END --><P>
<A NAME="MSOutFile"></A></P><P>Output file name for the minimum phase filter.</P><!--TOC subsubsection MSOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc226">6.13.7</A>&#XA0;&#XA0;MSOutFileType</H4><!--SEC END --><P>
<A NAME="MSOutFileType"></A></P><P>Output file type for the minimum phase filter.</P><!--TOC subsection TC - Test Convolution-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc227">6.14</A>&#XA0;&#XA0;TC - Test Convolution</H3><!--SEC END --><!--TOC subsubsection TCNormFactor-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc228">6.14.1</A>&#XA0;&#XA0;TCNormFactor</H4><!--SEC END --><P>
<A NAME="TCNormFactor"></A></P><P>Normalization factor for the output of the final convolution stage.
Usually 0.0.</P><!--TOC subsubsection TCNormType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc229">6.14.2</A>&#XA0;&#XA0;TCNormType</H4><!--SEC END --><P>
<A NAME="TCNormType"></A></P><P>Normalization type for the output of the final convolution stage.
Usually E.</P><!--TOC subsubsection TCOutFile-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc230">6.14.3</A>&#XA0;&#XA0;TCOutFile</H4><!--SEC END --><P>
<A NAME="TCOutFile"></A></P><P>Output file for the final test convolution. If this is not supplied the
test convolution stage is skipped.</P><!--TOC subsubsection TCOutFileType-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc231">6.14.4</A>&#XA0;&#XA0;TCOutFileType</H4><!--SEC END --><P>
<A NAME="TCOutFileType"></A></P><P>Output type for the file above. D = Double, F = Float, I = Integer.</P><!--TOC section Acknowledgments-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc232">7</A>&#XA0;&#XA0;Acknowledgments</H2><!--SEC END --><P>DRC grew up with the contribution of many peoples. The list is really
long, and there&#X2019;s some chance that I&#X2019;m forgetting someone. By the
way here it is the list, in random order:</P><UL CLASS="itemize"><LI CLASS="li-itemize">Thanks to Prof. Angelo Farina and Prof. John Mourjopoulos for
their papers released in the public domain. Many DRC algorithms started
from references and explanations found in those papers.</LI><LI CLASS="li-itemize">Many thanks to Anders Torger for his BruteFIR package and his
suggestions. Without BruteFIR DRC would have been just a programming
exercise, and I would have never started writing it. Anders also gave me
the idea of the sliding lowpass prefiltering procedure.</LI><LI CLASS="li-itemize">Many thanks to &#X201C;Jaco the Relentless&#X201D; for his enthusiastic
support and for all the tests on his own HiFi system.</LI><LI CLASS="li-itemize">Thanks to Maurizio Mulas for sending me the impulse response of
his room as a testbed for some releases and for all his listening tests.</LI><LI CLASS="li-itemize">Thanks to Marco Bagna and Alex &#X201C;Flex&#X201D; Okely for their support
during the DRC development and also for letting me testing DRC on their
high quality HiFi systems.</LI><LI CLASS="li-itemize">Thanks to Michele Spinolo for his enthusiastic support and for
writing some documentation about DRC and its functionalities.</LI><LI CLASS="li-itemize">Many thanks to &#X201C;Jones Rush&#X201D; for all his efforts understanding
how DRC works and for writing a good step by step DRC guide, something
that was really missing.</LI><LI CLASS="li-itemize">Many thanks to Tom Browne for his suggestions and tests on his own
system and his help in optimizing the DRC performances.</LI><LI CLASS="li-itemize">Many thanks to Ed Wildgoose for his suggestions and tests on his
own system, for providing the perl script which glsweep is based upon
and for setting up the DRC Wiki pages.</LI><LI CLASS="li-itemize">Thanks to Ulrich &#X201C;Uli&#X201D; Brueggemann for providing some filters
generated with a completely different approach. Most of the changes of
version 2.5.0 have been implemented after comparing the DRC filters with
those filters.</LI><LI CLASS="li-itemize">Thanks to Chris Birkinshaw for providing the Jack version of the
automatic measuring script.</LI><LI CLASS="li-itemize">Thanks to Gregory Maxwell for writing the excellent Wikipedia
digital room correction article.</LI><LI CLASS="li-itemize">Many thanks to the ALSA team for providing a good Linux sound
infrastructure and for helping fixing some nasty bugs in the TerraTec
EWX 24/96 driver.</LI><LI CLASS="li-itemize">Many thanks to the T<sub>E</sub>X, L<sup>A</sup>T<sub>E</sub>X, Octave, GNUPlot and HeVeA
developers for providing the invaluable tools used to create this
document.</LI></UL><P>
Finally many thanks to all the peoples who have contributed to DRC,
sometimes without even knowing it. Most of the ideas used to develop DRC
come from public papers, algorithms and source code found for free over
the Internet.</P><!--TOC section Similar software-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc233">8</A>&#XA0;&#XA0;Similar software</H2><!--SEC END --><P>There are other software packages providing functionalities similar or
comparable to those of DRC. Here are some examples:</P><UL CLASS="itemize"><LI CLASS="li-itemize">Acourate: <A HREF="http://www.acourate.com/"><TT>http://www.acourate.com/</TT></A></LI><LI CLASS="li-itemize">Room Eq Wizard: <A HREF="http://www.hometheatershack.com/roomeq/"><TT>http://www.hometheatershack.com/roomeq/</TT></A></LI><LI CLASS="li-itemize">Audiolense: <A HREF="http://www.juicehifi.com/"><TT>http://www.juicehifi.com/</TT></A></LI></UL><!--TOC section Commercial products-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc234">9</A>&#XA0;&#XA0;Commercial products</H2><!--SEC END --><P>A complete commercial package, based on DRC for the filter generation
procedure, is available from the small Italian company AVA Italy. I have
no involvement in the development of the product so those interested in
this package should contact AVA Italy directly. Contact informations are
available on the AVA Italy web site:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.avaitaly.it/"><TT>http://www.avaitaly.it/</TT></A>
</BLOCKQUOTE><!--TOC section Sample results-->
<H2 CLASS="section"><!--SEC ANCHOR --><A NAME="htoc235">A</A>&#XA0;&#XA0;Sample results</H2><!--SEC END --><P>
<A NAME="SampleResults"></A></P><P>In the following pages some graphs with a comparison between the
corrected and uncorrected system are reported. This is of course just a
sample situation and describes what I achieved in my own system. My
uncorrected system show performance figures which are quite uncommon,
partly because it is placed in an heavily damped listening room but
mostly because it has been tuned to give its best with the correction in
place. So the results for the uncorrected system shouldn&#X2019;t be taken as
an example of typical behaviour. The results of the corrected system
show instead the perfomance levels achievable combining active room
correction with traditional passive room treatment. Depending on the
behaviour of the speakers and the listening room, and on the settings
used for DRC, the results could be quite different.</P><P>The results presented have been obtained with the psychoacoustic target
stage disabled. All the graphs presented in these section are based on
traditional objective evaluation of the system transfer function. No
psychoacoustics is involved in the graphs generation procedures, so the
results with the psychoacoustic target cannot be evaluated using this
kind of graphs. On the other hand the proposed graphs clearly show that
the correction is able to closely match the supplied target, so proving
that any psychoacoustic target computation would be closely followed by
the correction. This implies that, if the underlying psychoacoustic
model is correct, the results will be as expected.</P><P>All the graphs, except the spectrograms and other 3D plots, follow the
same conventions. The uncorrected system is reported with red lines and
the corrected system is reported with blue lines. The spectrograms and
the 3D plots need a specific colormap for proper visualization, which is
of course the same for both the corrected and uncorrected system, so
they can&#X2019;t follow this simple convention.</P><P>All the graphs have been prepared with the Octave files available under
the &#X201C;src/doc/octave&#X201D; directory of the standard distribution. The
&#X201C;createdrcplots.m&#X201D; file contains a function which creates all the
graphs needed to compare two impulse responses and saves them into
encapsulated postscript files or files in any other format supporte by
Octave. To load the raw pcm files created by DRC you can use the
&#X201C;loadpcm&#X201D; function with some Octave commands like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>ru = loadpcm("/pathtopcm/rmc.pcm");
rc = loadpcm("/pathtopcm/rtc.pcm");
</FONT></PRE>
</BLOCKQUOTE><P>
The uncorrected response could be obtained by uncommenting the MCOutFile
parameter and setting it properly. If you don&#X2019;t have a microphone
compensation file you can simply use the flat target response to provide
a null compensation and get the needed output file only. The corrected
response could be obtained by uncommenting the TCOutFile parameter and
setting it properly. Then the full sets of graphs will be created with an
Octave command like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>createdrcplots(ru,-1,"R Uncorrected",rc,-1,"R Corrected","/pathtographs/","R");
</FONT></PRE>
</BLOCKQUOTE><P>Graph in a different format than the standard encapsulated postscript
may be easily obtained by suppling some further parameters to the
createdrcplots procedure. For example to create the graphs in PNG format
a command like this might be used:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>createdrcplots(ru,-1,"R Uncorrected",rc,-1,"R Corrected","/pathtographs/","R",".png","-dpng");
</FONT></PRE>
</BLOCKQUOTE><P>
All formats supported by the Octave print command may be used. Se the
Octave documentation for further details.</P><P>You need at least Octave 3.2.3, along with Octave-Forge packages &#X201C;plot&#X201D;
and &#X201C;signal&#X201D;, and GnuPlot version 4.3 or newer, for these scripts to work. 
The scripts have been tested with octave 3.6.2 and GnuPlot 4.4.4. Beware
that the latest versions of Octave don&#X2019;t use Gnuplot as the default
plotting toolkit so you might need to issue a command like:</P><BLOCKQUOTE CLASS="quote">
<PRE CLASS="verbatim"><FONT SIZE=2>graphics_toolkit('gnuplot');
</FONT></PRE>
</BLOCKQUOTE><P>
to get the scripts working. Octave can be downloaded from:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.octave.org/"><TT>http://www.octave.org/</TT></A>
</BLOCKQUOTE><P>
Michele Spinolo prepared a L<sup>A</sup>T<sub>E</sub>X document which packages the full set
of graphs into a single file. The L<sup>A</sup>T<sub>E</sub>X script is named
&#X201C;drc-graphs.tex&#X201D; and is available under the &#X201C;src/doc&#X201D; directory. The
script could be used for pdf or postscript file creation, or to create
HTML files using HeVeA, and maybe also wiht Latex2Html. The graphs
should be created using &#X201C;T&#X201D; as the graphs prefix name in the
&#X201C;createdrcplots&#X201D; function above, else you have to edit the header of
the script to change the graph prefix. HeVeA and Latex2Html are
available at the following sites:</P><BLOCKQUOTE CLASS="quote">
<A HREF="http://www.latex2html.org/"><TT>http://www.latex2html.org/</TT></A><BR>
<A HREF="http://pauillac.inria.fr/~maranget/hevea/"><TT>http://pauillac.inria.fr/~maranget/hevea/</TT></A>
</BLOCKQUOTE><!--TOC subsection Time response-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc236">A.1</A>&#XA0;&#XA0;Time response</H3><!--SEC END --><P>
<A NAME="SampleResultsTimeResponse"></A></P><P>The first series of graphs show the effect of the correction in the time
domain. The correction provides a clear improvement in the time
response, with an effect that becomes longer and longer in time as the
frequency decrease, as expected.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc011.gif">
<IMG SRC="drc012.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 11: <A NAME="StepResponseFullRange"></A> Corrected and uncorrected step
response comparison. The corrected step response is much closer to the
expected exponential decay than the uncorrected one, at least up to
above 10 ms.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc013.gif">
<IMG SRC="drc014.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 12: <A NAME="ImpulseResponseFullRange"></A> Corrected and uncorrected
impulse response comparison. The corrected impulse response becomes much
similar to a (minimum phase) bandlimited Dirac spike for about 1 ms.
This implies a close to perfect phase response at least for the early
direct sound.</TD></TR>
</TABLE></DIV></DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc015.gif">
<IMG SRC="drc016.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 13: <A NAME="EnvelopeFullRange"></A> Impulse response envelope for the
corrected and uncorrected system.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc017.gif">
<IMG SRC="drc018.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 14: <A NAME="ETCFullRange"></A> Time-energy response (impulse response
envelope plotted with a logarithmic magnitude scale) for the corrected
and uncorrected system.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc019.gif">
<IMG SRC="drc020.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 15: <A NAME="ImpulseResponse2kHzBrickwall"></A> Corrected and uncorrected
impulse response comparison. The impulse responses have been brickwall
filtered at 2 kHz to show the increased effect up to the midrange.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc021.gif">
<IMG SRC="drc022.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 16: <A NAME="Envelope2kHzBrickwall"></A> Impulse response envelope for the
corrected and uncorrected system. The impulse responses have been
brickwall filtered at 2 kHz to show the increased effect up to the
midrange.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc023.gif">
<IMG SRC="drc024.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 17: <A NAME="ETC2kHzBrickwall"></A> Time-energy response (impulse response
envelope plotted with a logarithmic magnitude scale) for the corrected
and uncorrected system. The impulse responses have been brickwall
filtered at 2 kHz to show the increased effect up to the midrange.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc025.gif">
<IMG SRC="drc026.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 18: <A NAME="ImpulseResponse200HzBrickwall"></A> Corrected and uncorrected
impulse response comparison. The impulse responses have been brickwall
filtered at 200 Hz to show the further increased effect in the
bassrange.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc027.gif">
<IMG SRC="drc028.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 19: <A NAME="Envelope200HzBrickwall"></A> Impulse response envelope for
the corrected and uncorrected system. The impulse responses have been
brickwall filtered at 200 Hz to show the further increased effect in the
bassrange.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc029.gif">
<IMG SRC="drc030.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 20: <A NAME="ETC200HzBrickwall"></A> Time-energy response (impulse
response envelope plotted with a logarithmic magnitude scale) for the
corrected and uncorrected system. The impulse responses have been
brickwall filtered at 200 Hz to show the further increased effect in the
bassrange.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsection Frequency response-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc237">A.2</A>&#XA0;&#XA0;Frequency response</H3><!--SEC END --><P>
<A NAME="SampleResultsFrequencyResponse"></A></P><P>These series of graphs show the effect of the correction on the
frequency response magnitude for some different windows applied to the
time response and with different kind of smoothing applied.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc031.gif">
<IMG SRC="drc032.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 21: <A NAME="MagnitudeUnsmoothed1ms"></A> Unsmoothed frequency response
magnitude, 1 ms Blackman window. These graphs show the frequency
response of the early direct sound.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc033.gif">
<IMG SRC="drc034.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 22: <A NAME="MagnitudeUnsmoothed5ms"></A> Unsmoothed frequency response
magnitude, 5 ms Blackman window. These graphs show the frequency
response of the direct sound.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc035.gif">
<IMG SRC="drc036.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 23: <A NAME="MagnitudeUnsmoothed200ms"></A> Unsmoothed frequency response
magnitude, bass range, 200 ms Blackman window. These graphs show the
frequency response of the bass range over a 200 ms time window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc037.gif">
<IMG SRC="drc038.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 24: <A NAME="MagnitudeFDWSmoothedNormal"></A> Frequency response magnitude
smoothed using a frequency dependent windowing with windowing settings
close to those used by the normal.drc sample configuration file.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc039.gif">
<IMG SRC="drc040.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 25: <A NAME="MagnitudeFDWSmoothed16Oct"></A> Frequency response magnitude
smoothed using a frequency dependent windowing providing a frequency
resolution close to 1/6 of octave smoothing.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc041.gif">
<IMG SRC="drc042.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 26: <A NAME="MagnitudeFDWSmoothed13Oct"></A> Frequency response magnitude
smoothed using a frequency dependent windowing providing a frequency
resolution close to 1/3 of octave smoothing.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc043.gif">
<IMG SRC="drc044.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 27: <A NAME="MagnitudeBarkSmoothed"></A> Frequency response magnitude
smoothed over the Bark psychoacoustic scale with many different Blackman windows applied.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc045.gif">
<IMG SRC="drc046.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 28: <A NAME="MagnitudeERBSmoothed"></A> Frequency response magnitude
smoothed the ERB psychoacoustic scale with many different Blackman windows applied.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsection Phase response-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc238">A.3</A>&#XA0;&#XA0;Phase response</H3><!--SEC END --><P>
<A NAME="PhaseResponse"></A></P><P>This section show some phase response graphs. The phase response becomes
basicly linear at least for the direct sound, which implies also a
constant group delay.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc047.gif">
<IMG SRC="drc048.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 29: <A NAME="PhaseResponse1"></A> Unsmoothed phase response, 1 ms Blackman
window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc049.gif">
<IMG SRC="drc050.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 30: <A NAME="PhaseResponse5"></A> Unsmoothed phase response, 5 ms Blackman
window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc051.gif">
<IMG SRC="drc052.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 31: <A NAME="PhaseResponse200"></A> Unsmoothed phase response, bass range, 200 ms
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc053.gif">
<IMG SRC="drc054.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 32: <A NAME="PhaseFDWSmoothedNormal"></A> Phase response smoothed using a
frequency dependent windowing with windowing settings close to those
used by the normal.drc sample configuration file.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc055.gif">
<IMG SRC="drc056.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 33: <A NAME="PhaseFDWSmoothed16Oct"></A> Phase response magnitude smoothed
using a frequency dependent windowing providing a frequency resolution
close to 1/6 of octave smoothing.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc057.gif">
<IMG SRC="drc058.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 34: <A NAME="PhaseFDWSmoothed13Oct"></A> Phase response magnitude smoothed
using a frequency dependent windowing providing a frequency resolution
close to 1/3 of octave smoothing.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsection Time-frequency analysis-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc239">A.4</A>&#XA0;&#XA0;Time-frequency analysis</H3><!--SEC END --><P>
<A NAME="TimeFrequencyAnalysis"></A></P><P>In this section some joint time-frequency analysis results are
presented. Time-frequency graphs are more difficult to understand than
the graphs presented so far, but they provide also invaluable
information about how the system under test is working. The human ear
works using a joint time-frequency analysis too, so these graphs provide
a representation of the system behaviour that is much closer to our
subjective perception.</P><P>Many graphs show the spectral decay of the system. The spectral decay
isn&#X2019;t exactly the same as the cumulative spectral decay (CSD) often used
for loudspeaker analysis, even though it is strictly related to it. The
spectral decay is obtained using an oversampled short-time Fourier
transform of the impulse response, being careful to use a window that is
long enough to satisfy the Gabor inequality (see section
<A HREF="#FrequencyDependentWindowing">4.2</A> and figure <A HREF="#Gabor">5</A> for details).</P><P>The correct interpretation of the graphs presented in this section would
require a book by itself, so little words are spent describing the
results achieved. With respect to this any comment is welcome.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc059.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 35: <A NAME="SpectralDecayHRL"></A> Left channel, spectral decay, high
range. Spectral decay from 2 kHz to 20 kHz with a 0.5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc060.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 36: <A NAME="SpectralDecayHRR"></A> Right channel, spectral decay, high
range. Spectral decay from 2 kHz to 20 kHz with a 0.5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc061.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 37: <A NAME="SpectralFormationHRL"></A> Left channel, spectral formation,
high range. Spectral formation from 2 kHz to 20 kHz with a 0.5 ms
sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc062.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 38: <A NAME="SpectralFormationHRR"></A> Right channel, spectral formation,
high range. Spectral formation from 2 kHz to 20 kHz with a 0.5 ms
sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc063.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 39: <A NAME="SpectralDecayMRL"></A> Left channel, spectral decay, mid
range. Spectral decay from 200 Hz to 2000 Hz with a 5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc064.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 40: <A NAME="SpectralDecayMRR"></A> Right channel, spectral decay, mid
range. Spectral decay from 200 Hz to 2000 Hz with a 5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc065.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 41: <A NAME="SpectralFormationMRL"></A> Left channel, spectral formation,
mid range. Spectral formation from 200 Hz to 2000 Hz with a 5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc066.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 42: <A NAME="SpectralFormationMRR"></A> Right channel, spectral formation,
mid range. Spectral formation from 200 Hz to 2000 Hz with a 5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc067.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 43: <A NAME="SpectralDecayBRL"></A> Left channel, spectral decay, bass
range. Spectral decay from 20 Hz to 200 Hz with a 50 ms sliding Blackman
window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc068.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 44: <A NAME="SpectralDecayBRR"></A> Right channel, spectral decay, bass
range. Spectral decay from 20 Hz to 200 Hz with a 50 ms sliding Blackman
window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc069.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 45: <A NAME="SpectralFormationBRL"></A> Left channel, spectral formation,
bass range. Spectral formation from 20 Hz to 200 Hz with a 50 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc070.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 46: <A NAME="SpectralFormationBRR"></A> Right channel, spectral formation,
bass range. Spectral formation from 20 Hz to 200 Hz with a 50 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc071.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 47: <A NAME="SpectralDecayHRLW"></A> Left channel, spectral decay, high
range. Spectral decay from 2 kHz to 20 kHz with a 1.0 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc072.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 48: <A NAME="SpectralDecayHRRW"></A> Right channel, spectral decay, high
range. Spectral decay from 2 kHz to 20 kHz with a 1.0 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc073.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 49: <A NAME="SpectralFormationHRLW"></A> Left channel, spectral formation,
high range. Spectral formation from 2 kHz to 20 kHz with a 1.0 ms
sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc074.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 50: <A NAME="SpectralFormationHRRW"></A> Right channel, spectral formation,
high range. Spectral formation from 2 kHz to 20 kHz with a 1.0 ms
sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc075.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 51: <A NAME="SpectralDecayMRLW"></A> Left channel, spectral decay, mid
range. Spectral decay from 200 Hz to 2000 Hz with a 10 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc076.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 52: <A NAME="SpectralDecayMRRW"></A> Right channel, spectral decay, mid
range. Spectral decay from 200 Hz to 2000 Hz with a 10 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc077.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 53: <A NAME="SpectralFormationMRLW"></A> Left channel, spectral formation,
mid range. Spectral formation from 200 Hz to 2000 Hz with a 10 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc078.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 54: <A NAME="SpectralFormationMRRW"></A> Right channel, spectral formation,
mid range. Spectral formation from 200 Hz to 2000 Hz with a 10 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc079.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 55: <A NAME="SpectralDecayBRLW"></A> Left channel, spectral decay, bass
range. Spectral decay from 20 Hz to 200 Hz with a 100 ms sliding Blackman
window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc080.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 56: <A NAME="SpectralDecayBRRW"></A> Right channel, spectral decay, bass
range. Spectral decay from 20 Hz to 200 Hz with a 100 ms sliding Blackman
window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc081.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 57: <A NAME="SpectralFormationBRLW"></A> Left channel, spectral formation,
bass range. Spectral formation from 20 Hz to 200 Hz with a 100 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc082.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 58: <A NAME="SpectralFormationBRRW"></A> Right channel, spectral formation,
bass range. Spectral formation from 20 Hz to 200 Hz with a 100 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc083.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 59: <A NAME="HigResSpectrogram01msL"></A> High resolution spectrograms
from -10 ms to 40 ms, 1 ms Blackman window, 90 dB level range, left
channel. The frequency range is from DC to the Nyquist frequency (22050
Hz) on a linear scale. The uncorrected system is on the top and the
corrected system is on the bottom.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc084.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 60: <A NAME="HigResSpectrogram01msR"></A> High resolution spectrograms
from -10 ms to 40 ms, 1 ms Blackman window, 90 dB level range, right
channel. The frequency range is from DC to the Nyquist frequency (22050
Hz) on a linear scale. The uncorrected system is on the top and the
corrected system is on the bottom.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc085.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 61: <A NAME="HigResSpectrogram20msL"></A> High resolution spectrograms
from -100 ms to 400 ms, 20 ms Blackman window, 90 dB level range, left
channel. The frequency range is from DC to the Nyquist frequency (22050
Hz) on a linear scale. The uncorrected system is on the top and the
corrected system is on the bottom.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc086.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 62: <A NAME="HigResSpectrogram20msR"></A> High resolution spectrograms
from -100 ms to 400 ms, 20 ms Blackman window, 90 dB level range, right
channel. The frequency range is from DC to the Nyquist frequency (22050
Hz) on a linear scale. The uncorrected system is on the top and the
corrected system is on the bottom.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsection Wavelet cycle-octave analysis-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc240">A.5</A>&#XA0;&#XA0;Wavelet cycle-octave analysis</H3><!--SEC END --><P>
<A NAME="WaveletAnalysis"></A></P><P>The wavelet analysis is a different method for performing a
time-frequency analysis or, to be precise, a time-scale analysis. For
certain kind of wavelets the scale axis could be mapped to a frequency
scale, allowing for the usual time-frequency interpretation of the
time-scale plots.</P><P>Wavelets have the advantage of being easier to map to a logarithmic
frequency scale. To further help the correct interpretation of the
graphs the time scale is also stretched, depending on the frequency, so
that the time scale is expressed in cycles of the sine wave of the
corresponding frequency. The end result is a graph that provides a
tiling of the time-frequency plane which is visually quite close to the
kind of time-frequency analysis performed by our auditory system.</P><P>The graphs are classical cycle-octave scalograms based on the Morlet
wavelet, tuned for different tradeoffs between time and frequency
resolution.</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc087.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 63: <A NAME="MorletScalogramHTRENVSDL"></A> Left channel, Morlet
cycle-octave scalogram envelope, high time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc088.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 64: <A NAME="MorletScalogramHTRENVSDR"></A> Right channel, Morlet
cycle-octave scalogram envelope, high time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc089.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 65: <A NAME="MorletScalogramHTRENVSFL"></A> Left channel, Morlet
cycle-octave scalogram envelope, high time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc090.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 66: <A NAME="MorletScalogramHTRENVSFR"></A> Right channel, Morlet
cycle-octave scalogram envelope, high time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc091.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 67: <A NAME="MorletScalogramHTRENVMapL"></A> Left channel, Morlet
cycle-octave scalogram envelope, high time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc092.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 68: <A NAME="MorletScalogramHTRENVMapR"></A> Right channel, Morlet
cycle-octave scalogram envelope, high time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc093.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 69: <A NAME="MorletScalogramHTRETCSDL"></A> Left channel, Morlet
cycle-octave scalogram ETC, high time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc094.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 70: <A NAME="MorletScalogramHTRETCSDR"></A> Right channel, Morlet
cycle-octave scalogram ETC, high time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc095.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 71: <A NAME="MorletScalogramHTRETCSFL"></A> Left channel, Morlet
cycle-octave scalogram ETC, high time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc096.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 72: <A NAME="MorletScalogramHTRETCSFR"></A> Right channel, Morlet
cycle-octave scalogram ETC, high time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc097.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 73: <A NAME="MorletScalogramHTRETCMapL"></A> Left channel, Morlet
cycle-octave scalogram ETC, high time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc098.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 74: <A NAME="MorletScalogramHTRETCMapR"></A> Right channel, Morlet
cycle-octave scalogram ETC, high time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc099.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 75: <A NAME="MorletScalogramMTRENVSDL"></A> Left channel, Morlet
cycle-octave scalogram envelope, medium time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc100.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 76: <A NAME="MorletScalogramMTRENVSDR"></A> Right channel, Morlet
cycle-octave scalogram envelope, medium time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc101.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 77: <A NAME="MorletScalogramMTRENVSFL"></A> Left channel, Morlet
cycle-octave scalogram envelope, medium time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc102.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 78: <A NAME="MorletScalogramMTRENVSFR"></A> Right channel, Morlet
cycle-octave scalogram envelope, medium time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc103.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 79: <A NAME="MorletScalogramMTRENVMapL"></A> Left channel, Morlet
cycle-octave scalogram envelope, medium time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc104.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 80: <A NAME="MorletScalogramMTRENVMapR"></A> Right channel, Morlet
cycle-octave scalogram envelope, medium time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc105.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 81: <A NAME="MorletScalogramMTRETCSDL"></A> Left channel, Morlet
cycle-octave scalogram ETC, medium time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc106.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 82: <A NAME="MorletScalogramMTRETCSDR"></A> Right channel, Morlet
cycle-octave scalogram ETC, medium time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc107.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 83: <A NAME="MorletScalogramMTRETCSFL"></A> Left channel, Morlet
cycle-octave scalogram ETC, medium time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc108.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 84: <A NAME="MorletScalogramMTRETCSFR"></A> Right channel, Morlet
cycle-octave scalogram ETC, medium time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc109.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 85: <A NAME="MorletScalogramMTRETCMapL"></A> Left channel, Morlet
cycle-octave scalogram ETC, medium time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc110.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 86: <A NAME="MorletScalogramMTRETCMapR"></A> Right channel, Morlet
cycle-octave scalogram ETC, medium time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsection Baseline-->
<H3 CLASS="subsection"><!--SEC ANCHOR --><A NAME="htoc241">A.6</A>&#XA0;&#XA0;Baseline</H3><!--SEC END --><P>
<A NAME="SampleResultsBaseline"></A></P><P>The following series of graphs show the comparison between a Dirac delta
and the corrected left channel. The Dirac delta is the mathematical
representation of a &#X201C;perfect&#X201D; system i.e. a system which outputs a
perfect copy of its input. Looking at these graphs it is possible to see
both what is left uncorrected by DRC and what a &#X201C;perfect&#X201D; system looks
like on this kind of graphs. The graphs are presented in the same order
of the previous graphs.</P><!--TOC subsubsection Baseline time response-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc242">A.6.1</A>&#XA0;&#XA0;Baseline time response</H4><!--SEC END --><P>
<A NAME="BaselineTimeResponse"></A>
</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc111.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 87: <A NAME="BaselineStepResponseFullRange"></A> Step response</TD></TR>
</TABLE></DIV>
<IMG SRC="drc112.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 88: <A NAME="BaselineImpulseResponseFullRange"></A> Full range impulse response.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc113.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 89: <A NAME="BaselineEnvelopeFullRange"></A> Full range impulse response
envelope.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc114.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 90: <A NAME="BaselineETCFullRange"></A>Full range time-energy response.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc115.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 91: <A NAME="BaselineImpulseResponse2kHzBrickwall"></A> Impulse response
after brickwall filtering at 2 kHz.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc116.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 92: <A NAME="BaselineEnvelope2kHzBrickwall"></A> Impulse response envelope after
brickwall filtering at 2 kHz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc117.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 93: <A NAME="BaselineETC2kHzBrickwall"></A> Time-energy response after
brickwall filtering at 2 kHz.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc118.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 94: <A NAME="BaselineImpulseResponse200HzBrickwall"></A> Impulse response
after brickwall filtering at 200 Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc119.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 95: <A NAME="BaselineEnvelope200HzBrickwall"></A> Impulse response
envelope after brickwall filtering at 200 Hz.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc120.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 96: <A NAME="BaselineETC200HzBrickwall"></A> Time-energy response after brickwall
filtering at 200 Hz.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsubsection Baseline frequency response-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc243">A.6.2</A>&#XA0;&#XA0;Baseline frequency response</H4><!--SEC END --><P>
<A NAME="BaselineFrequencyResponse"></A>
</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc121.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 97: <A NAME="BaselineMagnitudeUnsmoothed1ms"></A> Unsmoothed frequency
response magnitude, 1 ms Blackman window.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc122.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 98: <A NAME="BaselineMagnitudeUnsmoothed5ms"></A> Unsmoothed frequency
response magnitude, 5 ms Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc123.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 99: <A NAME="BaselineMagnitudeUnsmoothed200ms"></A> Unsmoothed frequency
response magnitude, bass range, 200 ms Blackman window.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc124.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 100: <A NAME="BaselineFDWSmoothedNormal"></A> Frequency response magnitude
smoothed using a frequency dependent windowing with windowing settings
close to those used by the normal.drc sample configuration file.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc125.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 101: <A NAME="BaselineMagnitudeFDWSmoothed16Oct"></A> Frequency response
magnitude smoothed using a frequency dependent windowing providing a
frequency resolution close to 1/6 of octave smoothing.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc126.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 102: <A NAME="BaselineMagnitudeFDWSmoothed13Oct"></A> Frequency response
magnitude smoothed using a frequency dependent windowing providing a
frequency resolution close to 1/3 of octave smoothing.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc127.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 103: <A NAME="BaselineMagnitudeBarkSmoothed"></A> Frequency response
magnitude smoothed over the Bark psychoacoustic scale with many different Blackman windows applied.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc128.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 104: <A NAME="BaselineMagnitudeERBSmoothed"></A> Frequency response
magnitude smoothed over the Bark psychoacoustic scale with many different Blackman windows applied.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsubsection Baseline phase response-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc244">A.6.3</A>&#XA0;&#XA0;Baseline phase response</H4><!--SEC END --><P>
<A NAME="BaselinePhaseResponse"></A>
</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc129.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 105: <A NAME="BaselinePhaseResponse1"></A> Unsmoothed phase response, 1 ms
Blackman window.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc130.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 106: <A NAME="BaselinePhaseResponse5"></A> Unsmoothed phase response, 5 ms
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc131.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 107: <A NAME="BaselinePhaseResponse200"></A> Unsmoothed phase response, 200
ms Blackman window.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc132.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 108: <A NAME="BaselinePhaseFDWSmoothedNormal"></A> Phase response smoothed
using a frequency dependent windowing with windowing settings close to
those used by the normal.drc sample configuration file.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc133.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 109: <A NAME="BaselinePhaseFDWSmoothed16Oct"></A> Phase response magnitude
smoothed using a frequency dependent windowing providing a frequency
resolution close to 1/6 of octave smoothing.</TD></TR>
</TABLE></DIV>
<IMG SRC="drc134.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 110: <A NAME="BaselinePhaseFDWSmoothed13Oct"></A> Phase response magnitude
smoothed using a frequency dependent windowing providing a frequency
resolution close to 1/3 of octave smoothing.</TD></TR>
</TABLE></DIV></DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsubsection Baseline time-frequency analysis-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc245">A.6.4</A>&#XA0;&#XA0;Baseline time-frequency analysis</H4><!--SEC END --><P>
<A NAME="BaselineTimeFrequencyAnalysis"></A>
</P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc135.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 111: <A NAME="BaselineSpectralDecayHR"></A> Left channel, spectral decay,
high range. Spectral decay from 2 kHz to 20 kHz with a 0.5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc136.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 112: <A NAME="BaselineSpectralFormationHR"></A> Left channel, spectral
formation, high range. Spectral formation from 2 kHz to 20 kHz with a
0.5 ms sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc137.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 113: <A NAME="BaselineSpectralDecayMR"></A> Left channel, spectral decay,
mid range. Spectral decay from 200 Hz to 2000 Hz with a 5 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc138.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 114: <A NAME="BaselineSpectralFormationMR"></A> Left channel, spectral
formation, mid range. Spectral formation from 200 Hz to 2000 Hz with a 5
ms sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc139.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 115: <A NAME="BaselineSpectralDecayBR"></A> Left channel, spectral decay,
bass range. Spectral decay from 20 Hz to 200 Hz with a 50 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc140.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 116: <A NAME="BaselineSpectralFormationBR"></A> Left channel, spectral
formation, bass range. Spectral formation from 20 Hz to 200 Hz with a 50
ms sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc141.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 117: <A NAME="BaselineSpectralDecayHRW"></A> Left channel, spectral decay,
high range. Spectral decay from 2 kHz to 20 kHz with a 1.0 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc142.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 118: <A NAME="BaselineSpectralFormationHRW"></A> Left channel, spectral
formation, high range. Spectral formation from 2 kHz to 20 kHz with a
1.0 ms sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc143.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 119: <A NAME="BaselineSpectralDecayMRW"></A> Left channel, spectral decay,
mid range. Spectral decay from 200 Hz to 2000 Hz with a 10 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc144.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 120: <A NAME="BaselineSpectralFormationMRW"></A> Left channel, spectral
formation, mid range. Spectral formation from 200 Hz to 2000 Hz with a 10
ms sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc145.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 121: <A NAME="BaselineSpectralDecayBRW"></A> Left channel, spectral decay,
bass range. Spectral decay from 20 Hz to 200 Hz with a 50 ms sliding
Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc146.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 122: <A NAME="BaselineSpectralFormationBRW"></A> Left channel, spectral
formation, bass range. Spectral formation from 20 Hz to 200 Hz with a 100
ms sliding Blackman window.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc147.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 123: <A NAME="BaselineHigResSpectrogram01ms"></A> High resolution
spectrograms from -10 ms to 40 ms, 1 ms Blackman window, 90 dB level
range, left channel. The frequency range is from DC to Nyquist (22050
Hz) on a linear scale.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc148.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 124: <A NAME="BaselineHigResSpectrogram20ms"></A> High resolution
spectrograms from -100 ms to 400 ms, 20 ms Blackman window, 90 dB level
range, left channel. The frequency range is from DC to Nyquist (22050
Hz) on a linear scale.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--TOC subsubsection Baseline wavelet cycle-octave analysis-->
<H4 CLASS="subsubsection"><!--SEC ANCHOR --><A NAME="htoc246">A.6.5</A>&#XA0;&#XA0;Baseline wavelet cycle-octave analysis</H4><!--SEC END --><P>
<A NAME="BaselineWaveletAnalysis"></A></P><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc149.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 125: <A NAME="MorletScalogramHTRENVSDB"></A> Baseline, Morlet
cycle-octave scalogram envelope, high time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc150.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 126: <A NAME="MorletScalogramHTRENVSFB"></A> Baseline, Morlet
cycle-octave scalogram envelope, high time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc151.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 127: <A NAME="MorletScalogramHTRENVMapB"></A> Baseline, Morlet
cycle-octave scalogram envelope, high time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc152.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 128: <A NAME="MorletScalogramHTRETCSDB"></A> Baseline, Morlet
cycle-octave scalogram ETC, high time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc153.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 129: <A NAME="MorletScalogramHTRETCSFB"></A> Baseline, Morlet
cycle-octave scalogram ETC, high time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc154.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 130: <A NAME="MorletScalogramHTRETCMapB"></A> Baseline, Morlet
cycle-octave scalogram ETC, high time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc155.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 131: <A NAME="MorletScalogramMTRENVSDB"></A> Baseline, Morlet
cycle-octave scalogram envelope, medium time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc156.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 132: <A NAME="MorletScalogramMTRENVSFB"></A> Baseline, Morlet
cycle-octave scalogram envelope, medium time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc157.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 133: <A NAME="MorletScalogramMTRENVMapB"></A> Baseline, Morlet
cycle-octave scalogram envelope, medium time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc158.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 134: <A NAME="MorletScalogramMTRETCSDB"></A> Baseline, Morlet
cycle-octave scalogram ETC, medium time resolution, spectral decay.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc159.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 135: <A NAME="MorletScalogramMTRETCSFB"></A> Baseline, Morlet
cycle-octave scalogram ETC, medium time resolution, spectral formation.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><BLOCKQUOTE CLASS="figure"><DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV>
<DIV CLASS="center">
<IMG SRC="drc160.gif">
<DIV CLASS="caption"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD VALIGN=top ALIGN=left>Figure 136: <A NAME="MorletScalogramMTRETCMapB"></A> Baseline, Morlet
cycle-octave scalogram ETC, medium time resolution, colored map.</TD></TR>
</TABLE></DIV>
</DIV>
<DIV CLASS="center"><HR WIDTH="80%" SIZE=2></DIV></BLOCKQUOTE><!--CUT END -->
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<HR SIZE=2><BLOCKQUOTE CLASS="quote"><EM>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</EM><A HREF="http://hevea.inria.fr/index.html"><EM>H</EM><EM><FONT SIZE=2><sup>E</sup></FONT></EM><EM>V</EM><EM><FONT SIZE=2><sup>E</sup></FONT></EM><EM>A</EM></A><EM>.</EM></BLOCKQUOTE></BODY>
</HTML>
